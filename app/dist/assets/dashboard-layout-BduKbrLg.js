import{u as Gc,r as B,j as I,a as ti,P as qc,S as Hc,c as $e,b as _,p as zc,d as Wc,m as Vc,l as le,B as R,e as ni,f as ri,g as oi,h as ii,i as Mr,s as ci,k as Jc,n as Yc,o as Xc,q as Zc,t as Qc,v as ea,w as ta,x as na,y as ra,N as Io,z as oa,A as ai,L as Nr,C as ia,D as si,E as ca}from"./index-DAGPIPHi.js";import{c as q,C as aa,a as sa,T as ua,P as la,b as ui,A as da,D as fa,d as ya,R as ha,e as _a,f as pa,g as li,h as di,i as fi,j as ga,k as Oo,l as va,m as Dt,n as To,H as ma,o as ba,O as yi,p as hi,q as wa,r as Aa,s as _i,t as pi,u as Ea}from"./index-gt7ugLqO.js";import{c as Sa,a as tt,P as Ia,u as Oa,b as Ta}from"./index-Cs3Kk7dZ.js";import{A as Pa,a as ka,b as Ca}from"./avatar-B6_NxxTd.js";import{u as Ma}from"./useQuery-BxQCRZWO.js";import{L as gi}from"./logo-D1v8IgSy.js";function vi(){const{pathname:e}=Gc();return B.useMemo(()=>e,[e])}/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=q("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=q("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=q("ChevronsLeft",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=q("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=q("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=q("CircuitBoard",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M11 9h4a2 2 0 0 0 2-2V3",key:"1ve2rv"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"M7 21v-4a2 2 0 0 1 2-2h4",key:"1fwkro"}],["circle",{cx:"15",cy:"15",r:"2",key:"3i40o0"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=q("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=q("Command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=q("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=q("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=q("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=q("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=q("HandHelping",[["path",{d:"M11 12h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 14",key:"1j4xps"}],["path",{d:"m7 18 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9",key:"uospg8"}],["path",{d:"m2 13 6 6",key:"16e5sb"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=q("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=q("Laptop",[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=q("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=q("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=q("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ya=q("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=q("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mi=q("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=q("Pizza",[["path",{d:"M15 11h.01",key:"rns66s"}],["path",{d:"M11 15h.01",key:"k85uqc"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"m2 16 20 6-6-20A20 20 0 0 0 2 16",key:"e4slt2"}],["path",{d:"M5.71 17.11a17.04 17.04 0 0 1 11.4-11.4",key:"rerf8f"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=q("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=q("SunMedium",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 3v1",key:"1asbbs"}],["path",{d:"M12 20v1",key:"1wcdkc"}],["path",{d:"M3 12h1",key:"lp3yf2"}],["path",{d:"M20 12h1",key:"1vloll"}],["path",{d:"m18.364 5.636-.707.707",key:"1hakh0"}],["path",{d:"m6.343 17.657-.707.707",key:"18m9nf"}],["path",{d:"m5.636 5.636.707.707",key:"1xv1c5"}],["path",{d:"m17.657 17.657.707.707",key:"vl76zb"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=q("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=q("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=q("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=q("UserRoundX",[["path",{d:"M2 21a8 8 0 0 1 11.873-7",key:"74fkxq"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"m17 17 5 5",key:"p7ous7"}],["path",{d:"m22 17-5 5",key:"gqnmv0"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=q("UserRound",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=q("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=q("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ss={dashboard:Wa,logo:$a,login:Ya,close:as,cog:xa,profile:is,spinner:Va,kanban:La,chevronLeft:aa,chevronRight:sa,trash:ua,employee:os,post:Fa,page:Ga,media:Ha,settings:Qa,billing:Ba,ellipsis:Ua,add:la,warning:ns,user:cs,arrowRight:Na,help:Ra,pizza:Za,sun:es,moon:mi,laptop:za,handHelping:qa,gitHub:({...e})=>I.jsx("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"github",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 496 512",...e,children:I.jsx("path",{fill:"currentColor",d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3 .3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5 .3-6.2 2.3zm44.2-1.7c-2.9 .7-4.9 2.6-4.6 4.9 .3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3 .7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3 .3 2.9 2.3 3.9 1.6 1 3.6 .7 4.3-.7 .7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3 .7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3 .7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"})}),twitter:rs,check:ja};var[fn,Jh]=Sa("Tooltip",[ui]),yn=ui(),bi="TooltipProvider",us=700,Er="tooltip.open",[ls,jr]=fn(bi),wi=e=>{const{__scopeTooltip:t,delayDuration:n=us,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:o}=e,[c,a]=B.useState(!0),d=B.useRef(!1),s=B.useRef(0);return B.useEffect(()=>{const u=s.current;return()=>window.clearTimeout(u)},[]),I.jsx(ls,{scope:t,isOpenDelayed:c,delayDuration:n,onOpen:B.useCallback(()=>{window.clearTimeout(s.current),a(!1)},[]),onClose:B.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(()=>a(!0),r)},[r]),isPointerInTransitRef:d,onPointerInTransitChange:B.useCallback(u=>{d.current=u},[]),disableHoverableContent:i,children:o})};wi.displayName=bi;var hn="Tooltip",[ds,_n]=fn(hn),Ai=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:i=!1,onOpenChange:o,disableHoverableContent:c,delayDuration:a}=e,d=jr(hn,e.__scopeTooltip),s=yn(t),[u,y]=B.useState(null),T=Oa(),m=B.useRef(0),k=c??d.disableHoverableContent,M=a??d.delayDuration,N=B.useRef(!1),[K=!1,j]=Ta({prop:r,defaultProp:i,onChange:$=>{$?(d.onOpen(),document.dispatchEvent(new CustomEvent(Er))):d.onClose(),o==null||o($)}}),W=B.useMemo(()=>K?N.current?"delayed-open":"instant-open":"closed",[K]),Q=B.useCallback(()=>{window.clearTimeout(m.current),N.current=!1,j(!0)},[j]),J=B.useCallback(()=>{window.clearTimeout(m.current),j(!1)},[j]),x=B.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{N.current=!0,j(!0)},M)},[M,j]);return B.useEffect(()=>()=>window.clearTimeout(m.current),[]),I.jsx(pa,{...s,children:I.jsx(ds,{scope:t,contentId:T,open:K,stateAttribute:W,trigger:u,onTriggerChange:y,onTriggerEnter:B.useCallback(()=>{d.isOpenDelayed?x():Q()},[d.isOpenDelayed,x,Q]),onTriggerLeave:B.useCallback(()=>{k?J():window.clearTimeout(m.current)},[J,k]),onOpen:Q,onClose:J,disableHoverableContent:k,children:n})})};Ai.displayName=hn;var Sr="TooltipTrigger",Ei=B.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,i=_n(Sr,n),o=jr(Sr,n),c=yn(n),a=B.useRef(null),d=ti(t,a,i.onTriggerChange),s=B.useRef(!1),u=B.useRef(!1),y=B.useCallback(()=>s.current=!1,[]);return B.useEffect(()=>()=>document.removeEventListener("pointerup",y),[y]),I.jsx(da,{asChild:!0,...c,children:I.jsx(qc.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:d,onPointerMove:tt(e.onPointerMove,T=>{T.pointerType!=="touch"&&!u.current&&!o.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:tt(e.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:tt(e.onPointerDown,()=>{s.current=!0,document.addEventListener("pointerup",y,{once:!0})}),onFocus:tt(e.onFocus,()=>{s.current||i.onOpen()}),onBlur:tt(e.onBlur,i.onClose),onClick:tt(e.onClick,i.onClose)})})});Ei.displayName=Sr;var fs="TooltipPortal",[Yh,ys]=fn(fs,{forceMount:void 0}),dt="TooltipContent",Si=B.forwardRef((e,t)=>{const n=ys(dt,e.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...o}=e,c=_n(dt,e.__scopeTooltip);return I.jsx(Ia,{present:r||c.open,children:c.disableHoverableContent?I.jsx(Ii,{side:i,...o,ref:t}):I.jsx(hs,{side:i,...o,ref:t})})}),hs=B.forwardRef((e,t)=>{const n=_n(dt,e.__scopeTooltip),r=jr(dt,e.__scopeTooltip),i=B.useRef(null),o=ti(t,i),[c,a]=B.useState(null),{trigger:d,onClose:s}=n,u=i.current,{onPointerInTransitChange:y}=r,T=B.useCallback(()=>{a(null),y(!1)},[y]),m=B.useCallback((k,M)=>{const N=k.currentTarget,K={x:k.clientX,y:k.clientY},j=vs(K,N.getBoundingClientRect()),W=ms(K,j),Q=bs(M.getBoundingClientRect()),J=As([...W,...Q]);a(J),y(!0)},[y]);return B.useEffect(()=>()=>T(),[T]),B.useEffect(()=>{if(d&&u){const k=N=>m(N,u),M=N=>m(N,d);return d.addEventListener("pointerleave",k),u.addEventListener("pointerleave",M),()=>{d.removeEventListener("pointerleave",k),u.removeEventListener("pointerleave",M)}}},[d,u,m,T]),B.useEffect(()=>{if(c){const k=M=>{const N=M.target,K={x:M.clientX,y:M.clientY},j=(d==null?void 0:d.contains(N))||(u==null?void 0:u.contains(N)),W=!ws(K,c);j?T():W&&(T(),s())};return document.addEventListener("pointermove",k),()=>document.removeEventListener("pointermove",k)}},[d,u,c,s,T]),I.jsx(Ii,{...e,ref:o})}),[_s,ps]=fn(hn,{isInside:!1}),Ii=B.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:o,onPointerDownOutside:c,...a}=e,d=_n(dt,n),s=yn(n),{onClose:u}=d;return B.useEffect(()=>(document.addEventListener(Er,u),()=>document.removeEventListener(Er,u)),[u]),B.useEffect(()=>{if(d.trigger){const y=T=>{const m=T.target;m!=null&&m.contains(d.trigger)&&u()};return window.addEventListener("scroll",y,{capture:!0}),()=>window.removeEventListener("scroll",y,{capture:!0})}},[d.trigger,u]),I.jsx(fa,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:y=>y.preventDefault(),onDismiss:u,children:I.jsxs(ya,{"data-state":d.stateAttribute,...s,...a,ref:t,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[I.jsx(Hc,{children:r}),I.jsx(_s,{scope:n,isInside:!0,children:I.jsx(ha,{id:d.contentId,role:"tooltip",children:i||r})})]})})});Si.displayName=dt;var Oi="TooltipArrow",gs=B.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,i=yn(n);return ps(Oi,n).isInside?null:I.jsx(_a,{...i,...r,ref:t})});gs.displayName=Oi;function vs(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(n,r,i,o)){case o:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function ms(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function bs(e){const{top:t,right:n,bottom:r,left:i}=e;return[{x:i,y:t},{x:n,y:t},{x:n,y:r},{x:i,y:r}]}function ws(e,t){const{x:n,y:r}=e;let i=!1;for(let o=0,c=t.length-1;o<t.length;c=o++){const a=t[o].x,d=t[o].y,s=t[c].x,u=t[c].y;d>r!=u>r&&n<(s-a)*(r-d)/(u-d)+a&&(i=!i)}return i}function As(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),Es(t)}function Es(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const i=e[r];for(;t.length>=2;){const o=t[t.length-1],c=t[t.length-2];if((o.x-c.x)*(i.y-c.y)>=(o.y-c.y)*(i.x-c.x))t.pop();else break}t.push(i)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const i=e[r];for(;n.length>=2;){const o=n[n.length-1],c=n[n.length-2];if((o.x-c.x)*(i.y-c.y)>=(o.y-c.y)*(i.x-c.x))n.pop();else break}n.push(i)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var Ss=wi,Is=Ai,Os=Ei,Ti=Si;const Ts=Ss,Ps=Is,ks=Os,Pi=B.forwardRef(({className:e,sideOffset:t=4,...n},r)=>I.jsx(Ti,{ref:r,sideOffset:t,className:$e("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));Pi.displayName=Ti.displayName;var ki={},Rt={},Ke={};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.STORAGE_COST_PER_BYTES_IN_ATOMIC_UNITS=Ke.ONE_YOCTO=Ke.MINIMUM_STORAGE_IN_BYTES=Ke.GAS_FEE_IN_ATOMIC_UNITS=void 0;Ke.GAS_FEE_IN_ATOMIC_UNITS="30000000000000";Ke.MINIMUM_STORAGE_IN_BYTES="2000";Ke.ONE_YOCTO="1";Ke.STORAGE_COST_PER_BYTES_IN_ATOMIC_UNITS="10000000000000000000";var pn={};Object.defineProperty(pn,"__esModule",{value:!0});pn.networkRPCs=void 0;pn.networkRPCs={testnet:"https://rpc.testnet.near.org",mainnet:"https://rpc.mainnet.near.org",betanet:"https://rpc.betanet.near.org",localnet:"http://localhost:3030"};(function(e){var t=_&&_.__createBinding||(Object.create?function(r,i,o,c){c===void 0&&(c=o);var a=Object.getOwnPropertyDescriptor(i,o);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(r,c,a)}:function(r,i,o,c){c===void 0&&(c=o),r[c]=i[o]}),n=_&&_.__exportStar||function(r,i){for(var o in r)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&t(i,r,o)};Object.defineProperty(e,"__esModule",{value:!0}),n(Ke,e),n(pn,e)})(Rt);var Ci={},Kr={},Mi={exports:{}};(function(e){(function(t){var n,r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,o=Math.floor,c="[BigNumber Error] ",a=c+"Number primitive has more than 15 significant digits: ",d=1e14,s=14,u=9007199254740991,y=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],T=1e7,m=1e9;function k(x){var $,Z,ie,C=P.prototype={constructor:P,toString:null,valueOf:null},ae=new P(1),Y=20,ee=4,pe=-7,ve=21,We=-1e7,Oe=1e7,Ve=!1,St=1,Fe=0,Yn={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"Â ",suffix:""},Je="0123456789abcdefghijklmnopqrstuvwxyz",Xn=!0;function P(l,f){var h,A,g,b,S,p,v,E,w=this;if(!(w instanceof P))return new P(l,f);if(f==null){if(l&&l._isBigNumber===!0){w.s=l.s,!l.c||l.e>Oe?w.c=w.e=null:l.e<We?w.c=[w.e=0]:(w.e=l.e,w.c=l.c.slice());return}if((p=typeof l=="number")&&l*0==0){if(w.s=1/l<0?(l=-l,-1):1,l===~~l){for(b=0,S=l;S>=10;S/=10,b++);b>Oe?w.c=w.e=null:(w.e=b,w.c=[l]);return}E=String(l)}else{if(!r.test(E=String(l)))return ie(w,E,p);w.s=E.charCodeAt(0)==45?(E=E.slice(1),-1):1}(b=E.indexOf("."))>-1&&(E=E.replace(".","")),(S=E.search(/e/i))>0?(b<0&&(b=S),b+=+E.slice(S+1),E=E.substring(0,S)):b<0&&(b=E.length)}else{if(j(f,2,Je.length,"Base"),f==10&&Xn)return w=new P(l),be(w,Y+w.e+1,ee);if(E=String(l),p=typeof l=="number"){if(l*0!=0)return ie(w,E,p,f);if(w.s=1/l<0?(E=E.slice(1),-1):1,P.DEBUG&&E.replace(/^0\.0*|\./,"").length>15)throw Error(a+l)}else w.s=E.charCodeAt(0)===45?(E=E.slice(1),-1):1;for(h=Je.slice(0,f),b=S=0,v=E.length;S<v;S++)if(h.indexOf(A=E.charAt(S))<0){if(A=="."){if(S>b){b=v;continue}}else if(!g&&(E==E.toUpperCase()&&(E=E.toLowerCase())||E==E.toLowerCase()&&(E=E.toUpperCase()))){g=!0,S=-1,b=0;continue}return ie(w,String(l),p,f)}p=!1,E=Z(E,f,10,w.s),(b=E.indexOf("."))>-1?E=E.replace(".",""):b=E.length}for(S=0;E.charCodeAt(S)===48;S++);for(v=E.length;E.charCodeAt(--v)===48;);if(E=E.slice(S,++v)){if(v-=S,p&&P.DEBUG&&v>15&&(l>u||l!==o(l)))throw Error(a+w.s*l);if((b=b-S-1)>Oe)w.c=w.e=null;else if(b<We)w.c=[w.e=0];else{if(w.e=b,w.c=[],S=(b+1)%s,b<0&&(S+=s),S<v){for(S&&w.c.push(+E.slice(0,S)),v-=s;S<v;)w.c.push(+E.slice(S,S+=s));S=s-(E=E.slice(S)).length}else S-=v;for(;S--;E+="0");w.c.push(+E)}}else w.c=[w.e=0]}P.clone=k,P.ROUND_UP=0,P.ROUND_DOWN=1,P.ROUND_CEIL=2,P.ROUND_FLOOR=3,P.ROUND_HALF_UP=4,P.ROUND_HALF_DOWN=5,P.ROUND_HALF_EVEN=6,P.ROUND_HALF_CEIL=7,P.ROUND_HALF_FLOOR=8,P.EUCLID=9,P.config=P.set=function(l){var f,h;if(l!=null)if(typeof l=="object"){if(l.hasOwnProperty(f="DECIMAL_PLACES")&&(h=l[f],j(h,0,m,f),Y=h),l.hasOwnProperty(f="ROUNDING_MODE")&&(h=l[f],j(h,0,8,f),ee=h),l.hasOwnProperty(f="EXPONENTIAL_AT")&&(h=l[f],h&&h.pop?(j(h[0],-m,0,f),j(h[1],0,m,f),pe=h[0],ve=h[1]):(j(h,-m,m,f),pe=-(ve=h<0?-h:h))),l.hasOwnProperty(f="RANGE"))if(h=l[f],h&&h.pop)j(h[0],-m,-1,f),j(h[1],1,m,f),We=h[0],Oe=h[1];else if(j(h,-m,m,f),h)We=-(Oe=h<0?-h:h);else throw Error(c+f+" cannot be zero: "+h);if(l.hasOwnProperty(f="CRYPTO"))if(h=l[f],h===!!h)if(h)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))Ve=h;else throw Ve=!h,Error(c+"crypto unavailable");else Ve=h;else throw Error(c+f+" not true or false: "+h);if(l.hasOwnProperty(f="MODULO_MODE")&&(h=l[f],j(h,0,9,f),St=h),l.hasOwnProperty(f="POW_PRECISION")&&(h=l[f],j(h,0,m,f),Fe=h),l.hasOwnProperty(f="FORMAT"))if(h=l[f],typeof h=="object")Yn=h;else throw Error(c+f+" not an object: "+h);if(l.hasOwnProperty(f="ALPHABET"))if(h=l[f],typeof h=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(h))Xn=h.slice(0,10)=="0123456789",Je=h;else throw Error(c+f+" invalid: "+h)}else throw Error(c+"Object expected: "+l);return{DECIMAL_PLACES:Y,ROUNDING_MODE:ee,EXPONENTIAL_AT:[pe,ve],RANGE:[We,Oe],CRYPTO:Ve,MODULO_MODE:St,POW_PRECISION:Fe,FORMAT:Yn,ALPHABET:Je}},P.isBigNumber=function(l){if(!l||l._isBigNumber!==!0)return!1;if(!P.DEBUG)return!0;var f,h,A=l.c,g=l.e,b=l.s;e:if({}.toString.call(A)=="[object Array]"){if((b===1||b===-1)&&g>=-m&&g<=m&&g===o(g)){if(A[0]===0){if(g===0&&A.length===1)return!0;break e}if(f=(g+1)%s,f<1&&(f+=s),String(A[0]).length==f){for(f=0;f<A.length;f++)if(h=A[f],h<0||h>=d||h!==o(h))break e;if(h!==0)return!0}}}else if(A===null&&g===null&&(b===null||b===1||b===-1))return!0;throw Error(c+"Invalid BigNumber: "+l)},P.maximum=P.max=function(){return So(arguments,-1)},P.minimum=P.min=function(){return So(arguments,1)},P.random=function(){var l=9007199254740992,f=Math.random()*l&2097151?function(){return o(Math.random()*l)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(h){var A,g,b,S,p,v=0,E=[],w=new P(ae);if(h==null?h=Y:j(h,0,m),S=i(h/s),Ve)if(crypto.getRandomValues){for(A=crypto.getRandomValues(new Uint32Array(S*=2));v<S;)p=A[v]*131072+(A[v+1]>>>11),p>=9e15?(g=crypto.getRandomValues(new Uint32Array(2)),A[v]=g[0],A[v+1]=g[1]):(E.push(p%1e14),v+=2);v=S/2}else if(crypto.randomBytes){for(A=crypto.randomBytes(S*=7);v<S;)p=(A[v]&31)*281474976710656+A[v+1]*1099511627776+A[v+2]*4294967296+A[v+3]*16777216+(A[v+4]<<16)+(A[v+5]<<8)+A[v+6],p>=9e15?crypto.randomBytes(7).copy(A,v):(E.push(p%1e14),v+=7);v=S/7}else throw Ve=!1,Error(c+"crypto unavailable");if(!Ve)for(;v<S;)p=f(),p<9e15&&(E[v++]=p%1e14);for(S=E[--v],h%=s,S&&h&&(p=y[s-h],E[v]=o(S/p)*p);E[v]===0;E.pop(),v--);if(v<0)E=[b=0];else{for(b=-1;E[0]===0;E.splice(0,1),b-=s);for(v=1,p=E[0];p>=10;p/=10,v++);v<s&&(b-=s-v)}return w.e=b,w.c=E,w}}(),P.sum=function(){for(var l=1,f=arguments,h=new P(f[0]);l<f.length;)h=h.plus(f[l++]);return h},Z=function(){var l="0123456789";function f(h,A,g,b){for(var S,p=[0],v,E=0,w=h.length;E<w;){for(v=p.length;v--;p[v]*=A);for(p[0]+=b.indexOf(h.charAt(E++)),S=0;S<p.length;S++)p[S]>g-1&&(p[S+1]==null&&(p[S+1]=0),p[S+1]+=p[S]/g|0,p[S]%=g)}return p.reverse()}return function(h,A,g,b,S){var p,v,E,w,O,D,L,G,te=h.indexOf("."),se=Y,F=ee;for(te>=0&&(w=Fe,Fe=0,h=h.replace(".",""),G=new P(A),D=G.pow(h.length-te),Fe=w,G.c=f(J(N(D.c),D.e,"0"),10,g,l),G.e=G.c.length),L=f(h,A,g,S?(p=Je,l):(p=l,Je)),E=w=L.length;L[--w]==0;L.pop());if(!L[0])return p.charAt(0);if(te<0?--E:(D.c=L,D.e=E,D.s=b,D=$(D,G,se,F,g),L=D.c,O=D.r,E=D.e),v=E+se+1,te=L[v],w=g/2,O=O||v<0||L[v+1]!=null,O=F<4?(te!=null||O)&&(F==0||F==(D.s<0?3:2)):te>w||te==w&&(F==4||O||F==6&&L[v-1]&1||F==(D.s<0?8:7)),v<1||!L[0])h=O?J(p.charAt(1),-se,p.charAt(0)):p.charAt(0);else{if(L.length=v,O)for(--g;++L[--v]>g;)L[v]=0,v||(++E,L=[1].concat(L));for(w=L.length;!L[--w];);for(te=0,h="";te<=w;h+=p.charAt(L[te++]));h=J(h,E,p.charAt(0))}return h}}(),$=function(){function l(A,g,b){var S,p,v,E,w=0,O=A.length,D=g%T,L=g/T|0;for(A=A.slice();O--;)v=A[O]%T,E=A[O]/T|0,S=L*v+E*D,p=D*v+S%T*T+w,w=(p/b|0)+(S/T|0)+L*E,A[O]=p%b;return w&&(A=[w].concat(A)),A}function f(A,g,b,S){var p,v;if(b!=S)v=b>S?1:-1;else for(p=v=0;p<b;p++)if(A[p]!=g[p]){v=A[p]>g[p]?1:-1;break}return v}function h(A,g,b,S){for(var p=0;b--;)A[b]-=p,p=A[b]<g[b]?1:0,A[b]=p*S+A[b]-g[b];for(;!A[0]&&A.length>1;A.splice(0,1));}return function(A,g,b,S,p){var v,E,w,O,D,L,G,te,se,F,H,de,zt,er,tr,Ce,It,we=A.s==g.s?1:-1,he=A.c,ne=g.c;if(!he||!he[0]||!ne||!ne[0])return new P(!A.s||!g.s||(he?ne&&he[0]==ne[0]:!ne)?NaN:he&&he[0]==0||!ne?we*0:we/0);for(te=new P(we),se=te.c=[],E=A.e-g.e,we=b+E+1,p||(p=d,E=M(A.e/s)-M(g.e/s),we=we/s|0),w=0;ne[w]==(he[w]||0);w++);if(ne[w]>(he[w]||0)&&E--,we<0)se.push(1),O=!0;else{for(er=he.length,Ce=ne.length,w=0,we+=2,D=o(p/(ne[0]+1)),D>1&&(ne=l(ne,D,p),he=l(he,D,p),Ce=ne.length,er=he.length),zt=Ce,F=he.slice(0,Ce),H=F.length;H<Ce;F[H++]=0);It=ne.slice(),It=[0].concat(It),tr=ne[0],ne[1]>=p/2&&tr++;do{if(D=0,v=f(ne,F,Ce,H),v<0){if(de=F[0],Ce!=H&&(de=de*p+(F[1]||0)),D=o(de/tr),D>1)for(D>=p&&(D=p-1),L=l(ne,D,p),G=L.length,H=F.length;f(L,F,G,H)==1;)D--,h(L,Ce<G?It:ne,G,p),G=L.length,v=1;else D==0&&(v=D=1),L=ne.slice(),G=L.length;if(G<H&&(L=[0].concat(L)),h(F,L,H,p),H=F.length,v==-1)for(;f(ne,F,Ce,H)<1;)D++,h(F,Ce<H?It:ne,H,p),H=F.length}else v===0&&(D++,F=[0]);se[w++]=D,F[0]?F[H++]=he[zt]||0:(F=[he[zt]],H=1)}while((zt++<er||F[0]!=null)&&we--);O=F[0]!=null,se[0]||se.splice(0,1)}if(p==d){for(w=1,we=se[0];we>=10;we/=10,w++);be(te,b+(te.e=w+E*s-1)+1,S,O)}else te.e=E,te.r=+O;return te}}();function Zn(l,f,h,A){var g,b,S,p,v;if(h==null?h=ee:j(h,0,8),!l.c)return l.toString();if(g=l.c[0],S=l.e,f==null)v=N(l.c),v=A==1||A==2&&(S<=pe||S>=ve)?Q(v,S):J(v,S,"0");else if(l=be(new P(l),f,h),b=l.e,v=N(l.c),p=v.length,A==1||A==2&&(f<=b||b<=pe)){for(;p<f;v+="0",p++);v=Q(v,b)}else if(f-=S,v=J(v,b,"0"),b+1>p){if(--f>0)for(v+=".";f--;v+="0");}else if(f+=b-p,f>0)for(b+1==p&&(v+=".");f--;v+="0");return l.s<0&&g?"-"+v:v}function So(l,f){for(var h,A,g=1,b=new P(l[0]);g<l.length;g++)A=new P(l[g]),(!A.s||(h=K(b,A))===f||h===0&&b.s===f)&&(b=A);return b}function Qn(l,f,h){for(var A=1,g=f.length;!f[--g];f.pop());for(g=f[0];g>=10;g/=10,A++);return(h=A+h*s-1)>Oe?l.c=l.e=null:h<We?l.c=[l.e=0]:(l.e=h,l.c=f),l}ie=function(){var l=/^(-?)0([xbo])(?=\w[\w.]*$)/i,f=/^([^.]+)\.$/,h=/^\.([^.]+)$/,A=/^-?(Infinity|NaN)$/,g=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(b,S,p,v){var E,w=p?S:S.replace(g,"");if(A.test(w))b.s=isNaN(w)?null:w<0?-1:1;else{if(!p&&(w=w.replace(l,function(O,D,L){return E=(L=L.toLowerCase())=="x"?16:L=="b"?2:8,!v||v==E?D:O}),v&&(E=v,w=w.replace(f,"$1").replace(h,"0.$1")),S!=w))return new P(w,E);if(P.DEBUG)throw Error(c+"Not a"+(v?" base "+v:"")+" number: "+S);b.s=null}b.c=b.e=null}}();function be(l,f,h,A){var g,b,S,p,v,E,w,O=l.c,D=y;if(O){e:{for(g=1,p=O[0];p>=10;p/=10,g++);if(b=f-g,b<0)b+=s,S=f,v=O[E=0],w=o(v/D[g-S-1]%10);else if(E=i((b+1)/s),E>=O.length)if(A){for(;O.length<=E;O.push(0));v=w=0,g=1,b%=s,S=b-s+1}else break e;else{for(v=p=O[E],g=1;p>=10;p/=10,g++);b%=s,S=b-s+g,w=S<0?0:o(v/D[g-S-1]%10)}if(A=A||f<0||O[E+1]!=null||(S<0?v:v%D[g-S-1]),A=h<4?(w||A)&&(h==0||h==(l.s<0?3:2)):w>5||w==5&&(h==4||A||h==6&&(b>0?S>0?v/D[g-S]:0:O[E-1])%10&1||h==(l.s<0?8:7)),f<1||!O[0])return O.length=0,A?(f-=l.e+1,O[0]=D[(s-f%s)%s],l.e=-f||0):O[0]=l.e=0,l;if(b==0?(O.length=E,p=1,E--):(O.length=E+1,p=D[s-b],O[E]=S>0?o(v/D[g-S]%D[S])*p:0),A)for(;;)if(E==0){for(b=1,S=O[0];S>=10;S/=10,b++);for(S=O[0]+=p,p=1;S>=10;S/=10,p++);b!=p&&(l.e++,O[0]==d&&(O[0]=1));break}else{if(O[E]+=p,O[E]!=d)break;O[E--]=0,p=1}for(b=O.length;O[--b]===0;O.pop());}l.e>Oe?l.c=l.e=null:l.e<We&&(l.c=[l.e=0])}return l}function Re(l){var f,h=l.e;return h===null?l.toString():(f=N(l.c),f=h<=pe||h>=ve?Q(f,h):J(f,h,"0"),l.s<0?"-"+f:f)}return C.absoluteValue=C.abs=function(){var l=new P(this);return l.s<0&&(l.s=1),l},C.comparedTo=function(l,f){return K(this,new P(l,f))},C.decimalPlaces=C.dp=function(l,f){var h,A,g,b=this;if(l!=null)return j(l,0,m),f==null?f=ee:j(f,0,8),be(new P(b),l+b.e+1,f);if(!(h=b.c))return null;if(A=((g=h.length-1)-M(this.e/s))*s,g=h[g])for(;g%10==0;g/=10,A--);return A<0&&(A=0),A},C.dividedBy=C.div=function(l,f){return $(this,new P(l,f),Y,ee)},C.dividedToIntegerBy=C.idiv=function(l,f){return $(this,new P(l,f),0,1)},C.exponentiatedBy=C.pow=function(l,f){var h,A,g,b,S,p,v,E,w,O=this;if(l=new P(l),l.c&&!l.isInteger())throw Error(c+"Exponent not an integer: "+Re(l));if(f!=null&&(f=new P(f)),p=l.e>14,!O.c||!O.c[0]||O.c[0]==1&&!O.e&&O.c.length==1||!l.c||!l.c[0])return w=new P(Math.pow(+Re(O),p?l.s*(2-W(l)):+Re(l))),f?w.mod(f):w;if(v=l.s<0,f){if(f.c?!f.c[0]:!f.s)return new P(NaN);A=!v&&O.isInteger()&&f.isInteger(),A&&(O=O.mod(f))}else{if(l.e>9&&(O.e>0||O.e<-1||(O.e==0?O.c[0]>1||p&&O.c[1]>=24e7:O.c[0]<8e13||p&&O.c[0]<=9999975e7)))return b=O.s<0&&W(l)?-0:0,O.e>-1&&(b=1/b),new P(v?1/b:b);Fe&&(b=i(Fe/s+2))}for(p?(h=new P(.5),v&&(l.s=1),E=W(l)):(g=Math.abs(+Re(l)),E=g%2),w=new P(ae);;){if(E){if(w=w.times(O),!w.c)break;b?w.c.length>b&&(w.c.length=b):A&&(w=w.mod(f))}if(g){if(g=o(g/2),g===0)break;E=g%2}else if(l=l.times(h),be(l,l.e+1,1),l.e>14)E=W(l);else{if(g=+Re(l),g===0)break;E=g%2}O=O.times(O),b?O.c&&O.c.length>b&&(O.c.length=b):A&&(O=O.mod(f))}return A?w:(v&&(w=ae.div(w)),f?w.mod(f):b?be(w,Fe,ee,S):w)},C.integerValue=function(l){var f=new P(this);return l==null?l=ee:j(l,0,8),be(f,f.e+1,l)},C.isEqualTo=C.eq=function(l,f){return K(this,new P(l,f))===0},C.isFinite=function(){return!!this.c},C.isGreaterThan=C.gt=function(l,f){return K(this,new P(l,f))>0},C.isGreaterThanOrEqualTo=C.gte=function(l,f){return(f=K(this,new P(l,f)))===1||f===0},C.isInteger=function(){return!!this.c&&M(this.e/s)>this.c.length-2},C.isLessThan=C.lt=function(l,f){return K(this,new P(l,f))<0},C.isLessThanOrEqualTo=C.lte=function(l,f){return(f=K(this,new P(l,f)))===-1||f===0},C.isNaN=function(){return!this.s},C.isNegative=function(){return this.s<0},C.isPositive=function(){return this.s>0},C.isZero=function(){return!!this.c&&this.c[0]==0},C.minus=function(l,f){var h,A,g,b,S=this,p=S.s;if(l=new P(l,f),f=l.s,!p||!f)return new P(NaN);if(p!=f)return l.s=-f,S.plus(l);var v=S.e/s,E=l.e/s,w=S.c,O=l.c;if(!v||!E){if(!w||!O)return w?(l.s=-f,l):new P(O?S:NaN);if(!w[0]||!O[0])return O[0]?(l.s=-f,l):new P(w[0]?S:ee==3?-0:0)}if(v=M(v),E=M(E),w=w.slice(),p=v-E){for((b=p<0)?(p=-p,g=w):(E=v,g=O),g.reverse(),f=p;f--;g.push(0));g.reverse()}else for(A=(b=(p=w.length)<(f=O.length))?p:f,p=f=0;f<A;f++)if(w[f]!=O[f]){b=w[f]<O[f];break}if(b&&(g=w,w=O,O=g,l.s=-l.s),f=(A=O.length)-(h=w.length),f>0)for(;f--;w[h++]=0);for(f=d-1;A>p;){if(w[--A]<O[A]){for(h=A;h&&!w[--h];w[h]=f);--w[h],w[A]+=d}w[A]-=O[A]}for(;w[0]==0;w.splice(0,1),--E);return w[0]?Qn(l,w,E):(l.s=ee==3?-1:1,l.c=[l.e=0],l)},C.modulo=C.mod=function(l,f){var h,A,g=this;return l=new P(l,f),!g.c||!l.s||l.c&&!l.c[0]?new P(NaN):!l.c||g.c&&!g.c[0]?new P(g):(St==9?(A=l.s,l.s=1,h=$(g,l,0,3),l.s=A,h.s*=A):h=$(g,l,0,St),l=g.minus(h.times(l)),!l.c[0]&&St==1&&(l.s=g.s),l)},C.multipliedBy=C.times=function(l,f){var h,A,g,b,S,p,v,E,w,O,D,L,G,te,se,F=this,H=F.c,de=(l=new P(l,f)).c;if(!H||!de||!H[0]||!de[0])return!F.s||!l.s||H&&!H[0]&&!de||de&&!de[0]&&!H?l.c=l.e=l.s=null:(l.s*=F.s,!H||!de?l.c=l.e=null:(l.c=[0],l.e=0)),l;for(A=M(F.e/s)+M(l.e/s),l.s*=F.s,v=H.length,O=de.length,v<O&&(G=H,H=de,de=G,g=v,v=O,O=g),g=v+O,G=[];g--;G.push(0));for(te=d,se=T,g=O;--g>=0;){for(h=0,D=de[g]%se,L=de[g]/se|0,S=v,b=g+S;b>g;)E=H[--S]%se,w=H[S]/se|0,p=L*E+w*D,E=D*E+p%se*se+G[b]+h,h=(E/te|0)+(p/se|0)+L*w,G[b--]=E%te;G[b]=h}return h?++A:G.splice(0,1),Qn(l,G,A)},C.negated=function(){var l=new P(this);return l.s=-l.s||null,l},C.plus=function(l,f){var h,A=this,g=A.s;if(l=new P(l,f),f=l.s,!g||!f)return new P(NaN);if(g!=f)return l.s=-f,A.minus(l);var b=A.e/s,S=l.e/s,p=A.c,v=l.c;if(!b||!S){if(!p||!v)return new P(g/0);if(!p[0]||!v[0])return v[0]?l:new P(p[0]?A:g*0)}if(b=M(b),S=M(S),p=p.slice(),g=b-S){for(g>0?(S=b,h=v):(g=-g,h=p),h.reverse();g--;h.push(0));h.reverse()}for(g=p.length,f=v.length,g-f<0&&(h=v,v=p,p=h,f=g),g=0;f;)g=(p[--f]=p[f]+v[f]+g)/d|0,p[f]=d===p[f]?0:p[f]%d;return g&&(p=[g].concat(p),++S),Qn(l,p,S)},C.precision=C.sd=function(l,f){var h,A,g,b=this;if(l!=null&&l!==!!l)return j(l,1,m),f==null?f=ee:j(f,0,8),be(new P(b),l,f);if(!(h=b.c))return null;if(g=h.length-1,A=g*s+1,g=h[g]){for(;g%10==0;g/=10,A--);for(g=h[0];g>=10;g/=10,A++);}return l&&b.e+1>A&&(A=b.e+1),A},C.shiftedBy=function(l){return j(l,-u,u),this.times("1e"+l)},C.squareRoot=C.sqrt=function(){var l,f,h,A,g,b=this,S=b.c,p=b.s,v=b.e,E=Y+4,w=new P("0.5");if(p!==1||!S||!S[0])return new P(!p||p<0&&(!S||S[0])?NaN:S?b:1/0);if(p=Math.sqrt(+Re(b)),p==0||p==1/0?(f=N(S),(f.length+v)%2==0&&(f+="0"),p=Math.sqrt(+f),v=M((v+1)/2)-(v<0||v%2),p==1/0?f="5e"+v:(f=p.toExponential(),f=f.slice(0,f.indexOf("e")+1)+v),h=new P(f)):h=new P(p+""),h.c[0]){for(v=h.e,p=v+E,p<3&&(p=0);;)if(g=h,h=w.times(g.plus($(b,g,E,1))),N(g.c).slice(0,p)===(f=N(h.c)).slice(0,p))if(h.e<v&&--p,f=f.slice(p-3,p+1),f=="9999"||!A&&f=="4999"){if(!A&&(be(g,g.e+Y+2,0),g.times(g).eq(b))){h=g;break}E+=4,p+=4,A=1}else{(!+f||!+f.slice(1)&&f.charAt(0)=="5")&&(be(h,h.e+Y+2,1),l=!h.times(h).eq(b));break}}return be(h,h.e+Y+1,ee,l)},C.toExponential=function(l,f){return l!=null&&(j(l,0,m),l++),Zn(this,l,f,1)},C.toFixed=function(l,f){return l!=null&&(j(l,0,m),l=l+this.e+1),Zn(this,l,f)},C.toFormat=function(l,f,h){var A,g=this;if(h==null)l!=null&&f&&typeof f=="object"?(h=f,f=null):l&&typeof l=="object"?(h=l,l=f=null):h=Yn;else if(typeof h!="object")throw Error(c+"Argument not an object: "+h);if(A=g.toFixed(l,f),g.c){var b,S=A.split("."),p=+h.groupSize,v=+h.secondaryGroupSize,E=h.groupSeparator||"",w=S[0],O=S[1],D=g.s<0,L=D?w.slice(1):w,G=L.length;if(v&&(b=p,p=v,v=b,G-=b),p>0&&G>0){for(b=G%p||p,w=L.substr(0,b);b<G;b+=p)w+=E+L.substr(b,p);v>0&&(w+=E+L.slice(b)),D&&(w="-"+w)}A=O?w+(h.decimalSeparator||"")+((v=+h.fractionGroupSize)?O.replace(new RegExp("\\d{"+v+"}\\B","g"),"$&"+(h.fractionGroupSeparator||"")):O):w}return(h.prefix||"")+A+(h.suffix||"")},C.toFraction=function(l){var f,h,A,g,b,S,p,v,E,w,O,D,L=this,G=L.c;if(l!=null&&(p=new P(l),!p.isInteger()&&(p.c||p.s!==1)||p.lt(ae)))throw Error(c+"Argument "+(p.isInteger()?"out of range: ":"not an integer: ")+Re(p));if(!G)return new P(L);for(f=new P(ae),E=h=new P(ae),A=v=new P(ae),D=N(G),b=f.e=D.length-L.e-1,f.c[0]=y[(S=b%s)<0?s+S:S],l=!l||p.comparedTo(f)>0?b>0?f:E:p,S=Oe,Oe=1/0,p=new P(D),v.c[0]=0;w=$(p,f,0,1),g=h.plus(w.times(A)),g.comparedTo(l)!=1;)h=A,A=g,E=v.plus(w.times(g=E)),v=g,f=p.minus(w.times(g=f)),p=g;return g=$(l.minus(h),A,0,1),v=v.plus(g.times(E)),h=h.plus(g.times(A)),v.s=E.s=L.s,b=b*2,O=$(E,A,b,ee).minus(L).abs().comparedTo($(v,h,b,ee).minus(L).abs())<1?[E,A]:[v,h],Oe=S,O},C.toNumber=function(){return+Re(this)},C.toPrecision=function(l,f){return l!=null&&j(l,1,m),Zn(this,l,f,2)},C.toString=function(l){var f,h=this,A=h.s,g=h.e;return g===null?A?(f="Infinity",A<0&&(f="-"+f)):f="NaN":(l==null?f=g<=pe||g>=ve?Q(N(h.c),g):J(N(h.c),g,"0"):l===10&&Xn?(h=be(new P(h),Y+g+1,ee),f=J(N(h.c),h.e,"0")):(j(l,2,Je.length,"Base"),f=Z(J(N(h.c),g,"0"),10,l,A,!0)),A<0&&h.c[0]&&(f="-"+f)),f},C.valueOf=C.toJSON=function(){return Re(this)},C._isBigNumber=!0,x!=null&&P.set(x),P}function M(x){var $=x|0;return x>0||x===$?$:$-1}function N(x){for(var $,Z,ie=1,C=x.length,ae=x[0]+"";ie<C;){for($=x[ie++]+"",Z=s-$.length;Z--;$="0"+$);ae+=$}for(C=ae.length;ae.charCodeAt(--C)===48;);return ae.slice(0,C+1||1)}function K(x,$){var Z,ie,C=x.c,ae=$.c,Y=x.s,ee=$.s,pe=x.e,ve=$.e;if(!Y||!ee)return null;if(Z=C&&!C[0],ie=ae&&!ae[0],Z||ie)return Z?ie?0:-ee:Y;if(Y!=ee)return Y;if(Z=Y<0,ie=pe==ve,!C||!ae)return ie?0:!C^Z?1:-1;if(!ie)return pe>ve^Z?1:-1;for(ee=(pe=C.length)<(ve=ae.length)?pe:ve,Y=0;Y<ee;Y++)if(C[Y]!=ae[Y])return C[Y]>ae[Y]^Z?1:-1;return pe==ve?0:pe>ve^Z?1:-1}function j(x,$,Z,ie){if(x<$||x>Z||x!==o(x))throw Error(c+(ie||"Argument")+(typeof x=="number"?x<$||x>Z?" out of range: ":" not an integer: ":" not a primitive number: ")+String(x))}function W(x){var $=x.c.length-1;return M(x.e/s)==$&&x.c[$]%2!=0}function Q(x,$){return(x.length>1?x.charAt(0)+"."+x.slice(1):x)+($<0?"e":"e+")+$}function J(x,$,Z){var ie,C;if($<0){for(C=Z+".";++$;C+=Z);x=C+x}else if(ie=x.length,++$>ie){for(C=Z,$-=ie;--$;C+=Z);x+=C}else $<ie&&(x=x.slice(0,$)+"."+x.slice($));return x}n=k(),n.default=n.BigNumber=n,e.exports?e.exports=n:(t||(t=typeof self<"u"&&self?self:window),t.BigNumber=n)})(_)})(Mi);var gn=Mi.exports,vn={},Ni={},ji={},Ze={},mn={},ke={},Lt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.KeySize=e.KeyType=void 0,function(t){t[t.ED25519=0]="ED25519",t[t.SECP256K1=1]="SECP256K1"}(e.KeyType||(e.KeyType={})),function(t){t[t.SECRET_KEY=32]="SECRET_KEY",t[t.ED25519_PUBLIC_KEY=32]="ED25519_PUBLIC_KEY",t[t.SECP256k1_PUBLIC_KEY=64]="SECP256k1_PUBLIC_KEY"}(e.KeySize||(e.KeySize={}))})(Lt);var bn={},vt={};Object.defineProperty(vt,"__esModule",{value:!0});vt.KeyPairBase=void 0;class Cs{}vt.KeyPairBase=Cs;var xt={},oe={},wn={};Object.defineProperty(wn,"__esModule",{value:!0});wn.DEFAULT_FUNCTION_CALL_GAS=void 0;wn.DEFAULT_FUNCTION_CALL_GAS=BigInt("30000000000000");var Dr={},An={},En={},Sn={},In={};Object.defineProperty(In,"__esModule",{value:!0});In.ConsoleLogger=void 0;class Ms{constructor(t){this.logLevels=t,this.isLevelEnabled=n=>this.logLevels.includes(n)}print(t,n,...r){switch(t){case"error":case"fatal":return console.error(n,...r);case"warn":return console.warn(n,...r);case"log":return console.log(n,...r);case"debug":case"verbose":return console.debug(n,...r)}}verbose(t,...n){this.isLevelEnabled("verbose")&&this.print("verbose",t,...n)}debug(t,...n){this.isLevelEnabled("debug")&&this.print("debug",t,...n)}log(t,...n){this.isLevelEnabled("log")&&this.print("log",t,...n)}warn(t,...n){this.isLevelEnabled("warn")&&this.print("warn",t,...n)}error(t,...n){this.isLevelEnabled("error")&&this.print("error",t,...n)}fatal(t,...n){this.isLevelEnabled("fatal")&&this.print("fatal",t,...n)}}In.ConsoleLogger=Ms;var Ns={},Ki;Object.defineProperty(Sn,"__esModule",{value:!0});Sn.Logger=void 0;const js=In,Ks=["verbose","debug","log","warn","error","fatal"],Ds=typeof zc=="object"&&Ns.NEAR_NO_LOGS?void 0:new js.ConsoleLogger(Ks);class On{static error(t,...n){var r;(r=this.instanceRef)===null||r===void 0||r.error(t,...n)}static log(t,...n){var r;(r=this.instanceRef)===null||r===void 0||r.log(t,...n)}static warn(t,...n){var r;(r=this.instanceRef)===null||r===void 0||r.warn(t,...n)}static debug(t,...n){var r,i;(i=(r=this.instanceRef)===null||r===void 0?void 0:r.debug)===null||i===void 0||i.call(r,t,...n)}static verbose(t,...n){var r,i;(i=(r=this.instanceRef)===null||r===void 0?void 0:r.verbose)===null||i===void 0||i.call(r,t,...n)}static fatal(t,...n){var r,i;(i=(r=this.instanceRef)===null||r===void 0?void 0:r.fatal)===null||i===void 0||i.call(r,t,...n)}}Sn.Logger=On;Ki=On;On.instanceRef=Ds;On.overrideLogger=e=>{Ki.instanceRef=e};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=void 0;var t=Sn;Object.defineProperty(e,"Logger",{enumerable:!0,get:function(){return t.Logger}})})(En);Object.defineProperty(An,"__esModule",{value:!0});An.logWarning=void 0;const Rs=En;function Ls(...e){const[t,...n]=e;Rs.Logger.warn(t,...n)}An.logWarning=Ls;var Se={},Rr={};(function(e){var t=_&&_.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(e,"__esModule",{value:!0}),e.baseDecode=e.baseEncode=e.parseNearAmount=e.formatNearAmount=e.NEAR_NOMINATION=e.NEAR_NOMINATION_EXP=void 0;const n=t(Wc);e.NEAR_NOMINATION_EXP=24,e.NEAR_NOMINATION=BigInt(10)**BigInt(e.NEAR_NOMINATION_EXP);const r=[],i=BigInt(10);for(let m=0,k=BigInt(5);m<e.NEAR_NOMINATION_EXP;m++,k=k*i)r[m]=k;function o(m,k=e.NEAR_NOMINATION_EXP){let M=BigInt(m);if(k!==e.NEAR_NOMINATION_EXP){const j=e.NEAR_NOMINATION_EXP-k-1;j>0&&(M+=r[j])}m=M.toString();const N=m.substring(0,m.length-e.NEAR_NOMINATION_EXP)||"0",K=m.substring(m.length-e.NEAR_NOMINATION_EXP).padStart(e.NEAR_NOMINATION_EXP,"0").substring(0,k);return d(`${u(N)}.${K}`)}e.formatNearAmount=o;function c(m){if(!m)return null;m=a(m);const k=m.split("."),M=k[0],N=k[1]||"";if(k.length>2||N.length>e.NEAR_NOMINATION_EXP)throw new Error(`Cannot parse '${m}' as NEAR amount`);return s(M+N.padEnd(e.NEAR_NOMINATION_EXP,"0"))}e.parseNearAmount=c;function a(m){return m.replace(/,/g,"").trim()}function d(m){return m.replace(/\.?0*$/,"")}function s(m){return m=m.replace(/^0+/,""),m===""?"0":m}function u(m){const k=/(-?\d+)(\d{3})/;for(;k.test(m);)m=m.replace(k,"$1,$2");return m}function y(m){if(typeof m=="string"){const k=[];for(let M=0;M<m.length;M++)k.push(m.charCodeAt(M));m=new Uint8Array(k)}return n.default.encode(m)}e.baseEncode=y;function T(m){return new Uint8Array(n.default.decode(m))}e.baseDecode=T})(Rr);const xs="Exceeded the maximum amount of gas allowed to burn per contract",$s="Method name is empty",Bs="Wasmer compilation error: {{msg}}",Us="Smart contract panicked: {{panic_msg}}",Fs="Error creating Wasm memory",Gs="Exceeded the prepaid gas",qs="Method name is not valid UTF8 string",Hs="String encoding is bad UTF-16 sequence",zs="WebAssembly trap: {{msg}}",Ws="Gas instrumentation failed or contract has denied instructions.",Vs="{{promise_idx}} does not correspond to existing promises",Js="Accessed invalid promise result index: {{result_idx}}",Ys="Error happened while deserializing the module",Xs="Contract method is not found",Zs="Accessed invalid register id: {{register_id}}",Qs="VM Logic returned an invalid receipt index: {{receipt_index}}",eu="Method name is empty in contract call",tu="Returning joint promise is currently prohibited",nu="Stack instrumentation failed",ru="Cannot find contract code for account {{account_id}}",ou="Invalid method signature",iu="Integer overflow happened during contract execution",cu="MemoryAccessViolation",au="Iterator index {{iterator_index}} does not exist",su="Iterator {{iterator_index}} was invalidated after its creation by performing a mutable operation on trie",uu="VM Logic returned an invalid account id",lu="Error happened while serializing the module",du="Actions can only be appended to non-joint promise.",fu="Internal memory declaration has been found in the module",yu="Error happened during instantiation",hu="{{method_name}} is not allowed in view calls",_u="VM Logic returned an invalid method name",pu="String encoding is bad UTF-8 sequence",gu="Exceeded the account balance",vu="Wasm contract link error: {{msg}}",mu="VM Logic provided an invalid public key",bu="Actor {{actor_id}} doesn't have permission to account {{account_id}} to complete the action",wu="The account {{account_id}} wouldn't have enough balance to cover storage, required to have {{amount}} yoctoNEAR more",Au="Wrong AccessKey used for transaction: transaction is sent to receiver_id={{tx_receiver}}, but is signed with function call access key that restricted to only use with receiver_id={{ak_receiver}}. Either change receiver_id in your transaction or switch to use a FullAccessKey.",Eu="Transaction gas or balance cost is too high",Su="Transaction is not signed with the given public key",Iu=`Signer "{{account_id}}" doesn't have access key with the given public_key {{public_key}}`,Ou="Sender {{signer_id}} does not have enough balance {{#formatNear}}{{balance}}{{/formatNear}} for operation costing {{#formatNear}}{{cost}}{{/formatNear}}",Tu="Access Key {account_id}:{public_key} does not have enough balance {{#formatNear}}{{allowance}}{{/formatNear}} for transaction costing {{#formatNear}}{{cost}}{{/formatNear}}",Pu="Transaction has expired",ku="Account {{account_id}} is staking and can not be deleted",Cu="Signer {{signer_id}} does not exist",Mu="Account {{account_id}} tried to stake {{#formatNear}}{{stake}}{{/formatNear}}, but has staked {{#formatNear}}{{locked}}{{/formatNear}} and only has {{#formatNear}}{{balance}}{{/formatNear}}",Nu="The public key {{public_key}} is already used for an existing access key",ju="Invalid signer account ID {{signer_id}} according to requirements",Ku="The new account_id {{account_id}} can't be created by {{predecessor_id}}",Du="The transaction contains more then one action, but it was signed with an access key which allows transaction to apply only one specific action. To apply more then one actions TX must be signed with a full access key",Ru="Account {{account_id}} is not yet staked, but tried to unstake",Lu="Transaction nonce {{tx_nonce}} must be larger than nonce of the used access key {{ak_nonce}}",xu="Can't create a new account {{account_id}}, because it already exists",$u="Transaction parent block hash doesn't belong to the current chain",Bu="Can't complete the action because account {{account_id}} doesn't exist",Uu="Can't complete the action because access key {{public_key}} doesn't exist",Fu="Transaction method name {{method_name}} isn't allowed by the access key",Gu="Account {{account_id}} can't be deleted. It has {{#formatNear}}{{balance}}{{/formatNear}}, which is enough to cover the rent",qu="Account {{account_id}} can't be deleted. It has {{#formatNear}}{{balance}}{{/formatNear}}, which is enough to cover it's storage",Hu="Invalid receiver account ID {{receiver_id}} according to requirements",zu="Account {{account_id}} tries to remove an access key that doesn't exist",Wu="Timeout exceeded",Vu="Connection closed",Ju="Shard {{shard_id}} rejected the transaction due to congestion level {{congestion_level}}, try again later",Yu="Shard {{shard_id}} rejected the transaction because it missed {{missed_chunks}} chunks and needs to recover before accepting new transactions, try again later",Xu={GasLimitExceeded:xs,MethodEmptyName:$s,WasmerCompileError:Bs,GuestPanic:Us,Memory:Fs,GasExceeded:Gs,MethodUTF8Error:qs,BadUTF16:Hs,WasmTrap:zs,GasInstrumentation:Ws,InvalidPromiseIndex:Vs,InvalidPromiseResultIndex:Js,Deserialization:Ys,MethodNotFound:Xs,InvalidRegisterId:Zs,InvalidReceiptIndex:Qs,EmptyMethodName:eu,CannotReturnJointPromise:tu,StackHeightInstrumentation:nu,CodeDoesNotExist:ru,MethodInvalidSignature:ou,IntegerOverflow:iu,MemoryAccessViolation:cu,InvalidIteratorIndex:au,IteratorWasInvalidated:su,InvalidAccountId:uu,Serialization:lu,CannotAppendActionToJointPromise:du,InternalMemoryDeclared:fu,Instantiate:yu,ProhibitedInView:hu,InvalidMethodName:_u,BadUTF8:pu,BalanceExceeded:gu,LinkError:vu,InvalidPublicKey:mu,ActorNoPermission:bu,LackBalanceForState:wu,ReceiverMismatch:Au,CostOverflow:Eu,InvalidSignature:Su,AccessKeyNotFound:Iu,NotEnoughBalance:Ou,NotEnoughAllowance:Tu,Expired:Pu,DeleteAccountStaking:ku,SignerDoesNotExist:Cu,TriesToStake:Mu,AddKeyAlreadyExists:Nu,InvalidSigner:ju,CreateAccountNotAllowed:Ku,RequiresFullAccess:Du,TriesToUnstake:Ru,InvalidNonce:Lu,AccountAlreadyExists:xu,InvalidChain:$u,AccountDoesNotExist:Bu,AccessKeyDoesNotExist:Uu,MethodNameMismatch:Fu,DeleteAccountHasRent:Gu,DeleteAccountHasEnoughBalance:qu,InvalidReceiver:Hu,DeleteKeyDoesNotExist:zu,Timeout:Wu,Closed:Vu,ShardCongested:Ju,ShardStuck:Yu},Zu={AccessKeyNotFound:{name:"AccessKeyNotFound",subtypes:[],props:{account_id:"",public_key:""}},AccountAlreadyExists:{name:"AccountAlreadyExists",subtypes:[],props:{account_id:""}},AccountDoesNotExist:{name:"AccountDoesNotExist",subtypes:[],props:{account_id:""}},ActionError:{name:"ActionError",subtypes:["AccountAlreadyExists","AccountDoesNotExist","CreateAccountOnlyByRegistrar","CreateAccountNotAllowed","ActorNoPermission","DeleteKeyDoesNotExist","AddKeyAlreadyExists","DeleteAccountStaking","LackBalanceForState","TriesToUnstake","TriesToStake","InsufficientStake","FunctionCallError","NewReceiptValidationError","OnlyImplicitAccountCreationAllowed","DeleteAccountWithLargeState","DelegateActionInvalidSignature","DelegateActionSenderDoesNotMatchTxReceiver","DelegateActionExpired","DelegateActionAccessKeyError","DelegateActionInvalidNonce","DelegateActionNonceTooLarge"],props:{index:""}},ActionsValidationError:{name:"ActionsValidationError",subtypes:["DeleteActionMustBeFinal","TotalPrepaidGasExceeded","TotalNumberOfActionsExceeded","AddKeyMethodNamesNumberOfBytesExceeded","AddKeyMethodNameLengthExceeded","IntegerOverflow","InvalidAccountId","ContractSizeExceeded","FunctionCallMethodNameLengthExceeded","FunctionCallArgumentsLengthExceeded","UnsuitableStakingKey","FunctionCallZeroAttachedGas","DelegateActionMustBeOnlyOne","UnsupportedProtocolFeature"],props:{}},ActorNoPermission:{name:"ActorNoPermission",subtypes:[],props:{account_id:"",actor_id:""}},AddKeyAlreadyExists:{name:"AddKeyAlreadyExists",subtypes:[],props:{account_id:"",public_key:""}},AddKeyMethodNameLengthExceeded:{name:"AddKeyMethodNameLengthExceeded",subtypes:[],props:{length:"",limit:""}},AddKeyMethodNamesNumberOfBytesExceeded:{name:"AddKeyMethodNamesNumberOfBytesExceeded",subtypes:[],props:{limit:"",total_number_of_bytes:""}},AltBn128InvalidInput:{name:"AltBn128InvalidInput",subtypes:[],props:{msg:""}},BadUTF16:{name:"BadUTF16",subtypes:[],props:{}},BadUTF8:{name:"BadUTF8",subtypes:[],props:{}},BalanceExceeded:{name:"BalanceExceeded",subtypes:[],props:{}},BalanceMismatchError:{name:"BalanceMismatchError",subtypes:[],props:{final_accounts_balance:"",final_postponed_receipts_balance:"",forwarded_buffered_receipts_balance:"",incoming_receipts_balance:"",incoming_validator_rewards:"",initial_accounts_balance:"",initial_postponed_receipts_balance:"",new_buffered_receipts_balance:"",new_delayed_receipts_balance:"",other_burnt_amount:"",outgoing_receipts_balance:"",processed_delayed_receipts_balance:"",slashed_burnt_amount:"",tx_burnt_amount:""}},CallIndirectOOB:{name:"CallIndirectOOB",subtypes:[],props:{}},CannotAppendActionToJointPromise:{name:"CannotAppendActionToJointPromise",subtypes:[],props:{}},CannotReturnJointPromise:{name:"CannotReturnJointPromise",subtypes:[],props:{}},CodeDoesNotExist:{name:"CodeDoesNotExist",subtypes:[],props:{account_id:""}},CompilationError:{name:"CompilationError",subtypes:["CodeDoesNotExist","PrepareError","WasmerCompileError"],props:{}},ContractSizeExceeded:{name:"ContractSizeExceeded",subtypes:[],props:{limit:"",size:""}},CostOverflow:{name:"CostOverflow",subtypes:[],props:{}},CreateAccountNotAllowed:{name:"CreateAccountNotAllowed",subtypes:[],props:{account_id:"",predecessor_id:""}},CreateAccountOnlyByRegistrar:{name:"CreateAccountOnlyByRegistrar",subtypes:[],props:{account_id:"",predecessor_id:"",registrar_account_id:""}},DelegateActionExpired:{name:"DelegateActionExpired",subtypes:[],props:{}},DelegateActionInvalidNonce:{name:"DelegateActionInvalidNonce",subtypes:[],props:{ak_nonce:"",delegate_nonce:""}},DelegateActionInvalidSignature:{name:"DelegateActionInvalidSignature",subtypes:[],props:{}},DelegateActionMustBeOnlyOne:{name:"DelegateActionMustBeOnlyOne",subtypes:[],props:{}},DelegateActionNonceTooLarge:{name:"DelegateActionNonceTooLarge",subtypes:[],props:{delegate_nonce:"",upper_bound:""}},DelegateActionSenderDoesNotMatchTxReceiver:{name:"DelegateActionSenderDoesNotMatchTxReceiver",subtypes:[],props:{receiver_id:"",sender_id:""}},DeleteAccountStaking:{name:"DeleteAccountStaking",subtypes:[],props:{account_id:""}},DeleteAccountWithLargeState:{name:"DeleteAccountWithLargeState",subtypes:[],props:{account_id:""}},DeleteActionMustBeFinal:{name:"DeleteActionMustBeFinal",subtypes:[],props:{}},DeleteKeyDoesNotExist:{name:"DeleteKeyDoesNotExist",subtypes:[],props:{account_id:"",public_key:""}},DepositWithFunctionCall:{name:"DepositWithFunctionCall",subtypes:[],props:{}},Deprecated:{name:"Deprecated",subtypes:[],props:{method_name:""}},Deserialization:{name:"Deserialization",subtypes:[],props:{}},ECRecoverError:{name:"ECRecoverError",subtypes:[],props:{msg:""}},Ed25519VerifyInvalidInput:{name:"Ed25519VerifyInvalidInput",subtypes:[],props:{msg:""}},EmptyMethodName:{name:"EmptyMethodName",subtypes:[],props:{}},Expired:{name:"Expired",subtypes:[],props:{}},FunctionCallArgumentsLengthExceeded:{name:"FunctionCallArgumentsLengthExceeded",subtypes:[],props:{length:"",limit:""}},FunctionCallMethodNameLengthExceeded:{name:"FunctionCallMethodNameLengthExceeded",subtypes:[],props:{length:"",limit:""}},FunctionCallZeroAttachedGas:{name:"FunctionCallZeroAttachedGas",subtypes:[],props:{}},GasExceeded:{name:"GasExceeded",subtypes:[],props:{}},GasInstrumentation:{name:"GasInstrumentation",subtypes:[],props:{}},GasLimitExceeded:{name:"GasLimitExceeded",subtypes:[],props:{}},GenericTrap:{name:"GenericTrap",subtypes:[],props:{}},GuestPanic:{name:"GuestPanic",subtypes:[],props:{panic_msg:""}},HostError:{name:"HostError",subtypes:["BadUTF16","BadUTF8","GasExceeded","GasLimitExceeded","BalanceExceeded","EmptyMethodName","GuestPanic","IntegerOverflow","InvalidPromiseIndex","CannotAppendActionToJointPromise","CannotReturnJointPromise","InvalidPromiseResultIndex","InvalidRegisterId","IteratorWasInvalidated","MemoryAccessViolation","InvalidReceiptIndex","InvalidIteratorIndex","InvalidAccountId","InvalidMethodName","InvalidPublicKey","ProhibitedInView","NumberOfLogsExceeded","KeyLengthExceeded","ValueLengthExceeded","TotalLogLengthExceeded","NumberPromisesExceeded","NumberInputDataDependenciesExceeded","ReturnedValueLengthExceeded","ContractSizeExceeded","Deprecated","ECRecoverError","AltBn128InvalidInput","Ed25519VerifyInvalidInput"],props:{}},IllegalArithmetic:{name:"IllegalArithmetic",subtypes:[],props:{}},IncorrectCallIndirectSignature:{name:"IncorrectCallIndirectSignature",subtypes:[],props:{}},IndirectCallToNull:{name:"IndirectCallToNull",subtypes:[],props:{}},Instantiate:{name:"Instantiate",subtypes:[],props:{}},InsufficientStake:{name:"InsufficientStake",subtypes:[],props:{account_id:"",minimum_stake:"",stake:""}},IntegerOverflow:{name:"IntegerOverflow",subtypes:[],props:{}},InternalMemoryDeclared:{name:"InternalMemoryDeclared",subtypes:[],props:{}},InvalidAccessKeyError:{name:"InvalidAccessKeyError",subtypes:["AccessKeyNotFound","ReceiverMismatch","MethodNameMismatch","RequiresFullAccess","NotEnoughAllowance","DepositWithFunctionCall"],props:{}},InvalidAccountId:{name:"InvalidAccountId",subtypes:[],props:{}},InvalidChain:{name:"InvalidChain",subtypes:[],props:{}},InvalidDataReceiverId:{name:"InvalidDataReceiverId",subtypes:[],props:{account_id:""}},InvalidIteratorIndex:{name:"InvalidIteratorIndex",subtypes:[],props:{iterator_index:""}},InvalidMethodName:{name:"InvalidMethodName",subtypes:[],props:{}},InvalidNonce:{name:"InvalidNonce",subtypes:[],props:{ak_nonce:"",tx_nonce:""}},InvalidPredecessorId:{name:"InvalidPredecessorId",subtypes:[],props:{account_id:""}},InvalidPromiseIndex:{name:"InvalidPromiseIndex",subtypes:[],props:{promise_idx:""}},InvalidPromiseResultIndex:{name:"InvalidPromiseResultIndex",subtypes:[],props:{result_idx:""}},InvalidPublicKey:{name:"InvalidPublicKey",subtypes:[],props:{}},InvalidReceiptIndex:{name:"InvalidReceiptIndex",subtypes:[],props:{receipt_index:""}},InvalidReceiverId:{name:"InvalidReceiverId",subtypes:[],props:{account_id:""}},InvalidRegisterId:{name:"InvalidRegisterId",subtypes:[],props:{register_id:""}},InvalidSignature:{name:"InvalidSignature",subtypes:[],props:{}},InvalidSignerId:{name:"InvalidSignerId",subtypes:[],props:{account_id:""}},InvalidTxError:{name:"InvalidTxError",subtypes:["InvalidAccessKeyError","InvalidSignerId","SignerDoesNotExist","InvalidNonce","NonceTooLarge","InvalidReceiverId","InvalidSignature","NotEnoughBalance","LackBalanceForState","CostOverflow","InvalidChain","Expired","ActionsValidation","TransactionSizeExceeded","StorageError","ShardCongested","ShardStuck"],props:{}},IteratorWasInvalidated:{name:"IteratorWasInvalidated",subtypes:[],props:{iterator_index:""}},KeyLengthExceeded:{name:"KeyLengthExceeded",subtypes:[],props:{length:"",limit:""}},LackBalanceForState:{name:"LackBalanceForState",subtypes:[],props:{account_id:"",amount:""}},Memory:{name:"Memory",subtypes:[],props:{}},MemoryAccessViolation:{name:"MemoryAccessViolation",subtypes:[],props:{}},MemoryOutOfBounds:{name:"MemoryOutOfBounds",subtypes:[],props:{}},MethodEmptyName:{name:"MethodEmptyName",subtypes:[],props:{}},MethodInvalidSignature:{name:"MethodInvalidSignature",subtypes:[],props:{}},MethodNameMismatch:{name:"MethodNameMismatch",subtypes:[],props:{method_name:""}},MethodNotFound:{name:"MethodNotFound",subtypes:[],props:{}},MethodResolveError:{name:"MethodResolveError",subtypes:["MethodEmptyName","MethodNotFound","MethodInvalidSignature"],props:{}},MisalignedAtomicAccess:{name:"MisalignedAtomicAccess",subtypes:[],props:{}},NonceTooLarge:{name:"NonceTooLarge",subtypes:[],props:{tx_nonce:"",upper_bound:""}},NotEnoughAllowance:{name:"NotEnoughAllowance",subtypes:[],props:{account_id:"",allowance:"",cost:"",public_key:""}},NotEnoughBalance:{name:"NotEnoughBalance",subtypes:[],props:{balance:"",cost:"",signer_id:""}},NumberInputDataDependenciesExceeded:{name:"NumberInputDataDependenciesExceeded",subtypes:[],props:{limit:"",number_of_input_data_dependencies:""}},NumberOfLogsExceeded:{name:"NumberOfLogsExceeded",subtypes:[],props:{limit:""}},NumberPromisesExceeded:{name:"NumberPromisesExceeded",subtypes:[],props:{limit:"",number_of_promises:""}},OnlyImplicitAccountCreationAllowed:{name:"OnlyImplicitAccountCreationAllowed",subtypes:[],props:{account_id:""}},PrepareError:{name:"PrepareError",subtypes:["Serialization","Deserialization","InternalMemoryDeclared","GasInstrumentation","StackHeightInstrumentation","Instantiate","Memory","TooManyFunctions","TooManyLocals"],props:{}},ProhibitedInView:{name:"ProhibitedInView",subtypes:[],props:{method_name:""}},ReceiptSizeExceeded:{name:"ReceiptSizeExceeded",subtypes:[],props:{limit:"",size:""}},ReceiptValidationError:{name:"ReceiptValidationError",subtypes:["InvalidPredecessorId","InvalidReceiverId","InvalidSignerId","InvalidDataReceiverId","ReturnedValueLengthExceeded","NumberInputDataDependenciesExceeded","ActionsValidation","ReceiptSizeExceeded"],props:{}},ReceiverMismatch:{name:"ReceiverMismatch",subtypes:[],props:{ak_receiver:"",tx_receiver:""}},RequiresFullAccess:{name:"RequiresFullAccess",subtypes:[],props:{}},ReturnedValueLengthExceeded:{name:"ReturnedValueLengthExceeded",subtypes:[],props:{length:"",limit:""}},Serialization:{name:"Serialization",subtypes:[],props:{}},ShardCongested:{name:"ShardCongested",subtypes:[],props:{congestion_level:"",shard_id:""}},ShardStuck:{name:"ShardStuck",subtypes:[],props:{missed_chunks:"",shard_id:""}},SignerDoesNotExist:{name:"SignerDoesNotExist",subtypes:[],props:{signer_id:""}},StackHeightInstrumentation:{name:"StackHeightInstrumentation",subtypes:[],props:{}},StackOverflow:{name:"StackOverflow",subtypes:[],props:{}},TooManyFunctions:{name:"TooManyFunctions",subtypes:[],props:{}},TooManyLocals:{name:"TooManyLocals",subtypes:[],props:{}},TotalLogLengthExceeded:{name:"TotalLogLengthExceeded",subtypes:[],props:{length:"",limit:""}},TotalNumberOfActionsExceeded:{name:"TotalNumberOfActionsExceeded",subtypes:[],props:{limit:"",total_number_of_actions:""}},TotalPrepaidGasExceeded:{name:"TotalPrepaidGasExceeded",subtypes:[],props:{limit:"",total_prepaid_gas:""}},TransactionSizeExceeded:{name:"TransactionSizeExceeded",subtypes:[],props:{limit:"",size:""}},TriesToStake:{name:"TriesToStake",subtypes:[],props:{account_id:"",balance:"",locked:"",stake:""}},TriesToUnstake:{name:"TriesToUnstake",subtypes:[],props:{account_id:""}},TxExecutionError:{name:"TxExecutionError",subtypes:["ActionError","InvalidTxError"],props:{}},Unreachable:{name:"Unreachable",subtypes:[],props:{}},UnsuitableStakingKey:{name:"UnsuitableStakingKey",subtypes:[],props:{public_key:""}},UnsupportedProtocolFeature:{name:"UnsupportedProtocolFeature",subtypes:[],props:{protocol_feature:"",version:""}},ValueLengthExceeded:{name:"ValueLengthExceeded",subtypes:[],props:{length:"",limit:""}},WasmTrap:{name:"WasmTrap",subtypes:["Unreachable","IncorrectCallIndirectSignature","MemoryOutOfBounds","CallIndirectOOB","IllegalArithmetic","MisalignedAtomicAccess","IndirectCallToNull","StackOverflow","GenericTrap"],props:{}},WasmerCompileError:{name:"WasmerCompileError",subtypes:[],props:{msg:""}},Closed:{name:"Closed",subtypes:[],props:{}},ServerError:{name:"ServerError",subtypes:["TxExecutionError","Timeout","Closed"],props:{}},Timeout:{name:"Timeout",subtypes:[],props:{}}},Qu={schema:Zu};var Lr=_&&_.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Se,"__esModule",{value:!0});Se.getErrorTypeFromErrorMessage=Se.formatError=Se.parseResultError=Se.parseRpcError=Se.ServerError=void 0;const el=le,tl=Lr(Vc),nl=Rr,Po=Lr(Xu),rl=Lr(Qu),ol={formatNear:()=>(e,t)=>(0,nl.formatNearAmount)(t(e))};class xr extends el.TypedError{}Se.ServerError=xr;class il extends xr{}function Di(e){const t={},n=Li(e,rl.default.schema,t,""),r=new xr(Ri(n,t),n);return Object.assign(r,t),r}Se.parseRpcError=Di;function cl(e){const t=Di(e.status.Failure),n=new il;return Object.assign(n,t),n.type=t.type,n.message=t.message,n.transaction_outcome=e.transaction_outcome,n}Se.parseResultError=cl;function Ri(e,t){return typeof Po.default[e]=="string"?tl.default.render(Po.default[e],Object.assign(Object.assign({},t),ol)):JSON.stringify(t)}Se.formatError=Ri;function Li(e,t,n,r){let i,o,c;for(const a in t){if(sl(e[a]))return e[a];if(nr(e[a]))i=e[a],o=t[a],c=a;else if(nr(e.kind)&&nr(e.kind[a]))i=e.kind[a],o=t[a],c=a;else continue}if(i&&o){for(const a of Object.keys(o.props))n[a]=i[a];return Li(i,t,n,c)}else return n.kind=e,r}function al(e,t){switch(!0){case/^account .*? does not exist while viewing$/.test(e):return"AccountDoesNotExist";case/^Account .*? doesn't exist$/.test(e):return"AccountDoesNotExist";case/^access key .*? does not exist while viewing$/.test(e):return"AccessKeyDoesNotExist";case/wasm execution failed with error: FunctionCallError\(CompilationError\(CodeDoesNotExist/.test(e):return"CodeDoesNotExist";case/wasm execution failed with error: CompilationError\(CodeDoesNotExist/.test(e):return"CodeDoesNotExist";case/wasm execution failed with error: FunctionCallError\(MethodResolveError\(MethodNotFound/.test(e):return"MethodNotFound";case/wasm execution failed with error: MethodResolveError\(MethodNotFound/.test(e):return"MethodNotFound";case/Transaction nonce \d+ must be larger than nonce of the used access key \d+/.test(e):return"InvalidNonce";default:return t}}Se.getErrorTypeFromErrorMessage=al;function nr(e){return Object.prototype.toString.call(e)==="[object Object]"}function sl(e){return Object.prototype.toString.call(e)==="[object String]"}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.parseRpcError=e.parseResultError=e.getErrorTypeFromErrorMessage=e.formatError=e.ServerError=e.logWarning=void 0;var t=An;Object.defineProperty(e,"logWarning",{enumerable:!0,get:function(){return t.logWarning}});var n=Se;Object.defineProperty(e,"ServerError",{enumerable:!0,get:function(){return n.ServerError}}),Object.defineProperty(e,"formatError",{enumerable:!0,get:function(){return n.formatError}}),Object.defineProperty(e,"getErrorTypeFromErrorMessage",{enumerable:!0,get:function(){return n.getErrorTypeFromErrorMessage}}),Object.defineProperty(e,"parseResultError",{enumerable:!0,get:function(){return n.parseResultError}}),Object.defineProperty(e,"parseRpcError",{enumerable:!0,get:function(){return n.parseRpcError}})})(Dr);var ft={};Object.defineProperty(ft,"__esModule",{value:!0});ft.printTxOutcomeLogs=ft.printTxOutcomeLogsAndFailures=void 0;const ul=Dr,Ir=En;function ll({contractId:e,outcome:t}){const n=[t.transaction_outcome,...t.receipts_outcome].reduce((r,i)=>{const o=typeof i.outcome.status=="object"&&typeof i.outcome.status.Failure=="object";return i.outcome.logs.length||o?r.concat({receiptIds:i.outcome.receipt_ids,logs:i.outcome.logs,failure:typeof i.outcome.status=="object"&&i.outcome.status.Failure!==void 0?(0,ul.parseRpcError)(i.outcome.status.Failure):null}):r},[]);for(const r of n)Ir.Logger.log(`Receipt${r.receiptIds.length>1?"s":""}: ${r.receiptIds.join(", ")}`),xi({contractId:e,logs:r.logs,prefix:"	"}),r.failure&&Ir.Logger.warn(`	Failure [${e}]: ${r.failure}`)}ft.printTxOutcomeLogsAndFailures=ll;function xi({contractId:e,logs:t,prefix:n=""}){for(const r of t)Ir.Logger.log(`${n}Log [${e}]: ${r}`)}ft.printTxOutcomeLogs=xi;var Tn={};Object.defineProperty(Tn,"__esModule",{value:!0});Tn.getTransactionLastResult=void 0;function dl(e){if(typeof e.status=="object"&&typeof e.status.SuccessValue=="string"){const t=R.from(e.status.SuccessValue,"base64").toString();try{return JSON.parse(t)}catch{return t}}return null}Tn.getTransactionLastResult=dl;var yt={},$t={};Object.defineProperty($t,"__esModule",{value:!0});$t.sortBigIntAsc=void 0;function fl(e,t){return e<t?-1:e>t?1:0}$t.sortBigIntAsc=fl;var yl=_&&_.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(yt,"__esModule",{value:!0});yt.diffEpochValidators=yt.findSeatPrice=void 0;const hl=yl(ni),$i=$t;function _l(e,t,n,r){return r&&r<49?pl(e,t):(n||((0,hl.default)("findSeatPrice(validators, maxNumberOfSeats)")("`use `findSeatPrice(validators, maxNumberOfSeats, minimumStakeRatio)` instead"),n=[1,6250]),gl(e,t,n))}yt.findSeatPrice=_l;function pl(e,t){const n=e.map(a=>BigInt(a.stake)).sort($i.sortBigIntAsc),r=BigInt(t),i=n.reduce((a,d)=>a+d);if(i<r)throw new Error("Stakes are below seats");let o=BigInt(1),c=i+BigInt(1);for(;o!==c-BigInt(1);){const a=(o+c)/BigInt(2);let d=!1,s=BigInt(0);for(let u=0;u<n.length;++u)if(s=s+n[u]/a,s>=r){o=a,d=!0;break}d||(c=a)}return o}function gl(e,t,n){if(n.length!=2)throw Error("minimumStakeRatio should have 2 elements");const r=e.map(o=>BigInt(o.stake)).sort($i.sortBigIntAsc),i=r.reduce((o,c)=>o+c);return e.length<t?i*BigInt(n[0])/BigInt(n[1]):r[0]+BigInt(1)}function vl(e,t){const n=new Map;e.forEach(i=>n.set(i.account_id,i));const r=new Set(t.map(i=>i.account_id));return{newValidators:t.filter(i=>!n.has(i.account_id)),removedValidators:e.filter(i=>!r.has(i.account_id)),changedValidators:t.filter(i=>n.has(i.account_id)&&n.get(i.account_id).stake!=i.stake).map(i=>({current:n.get(i.account_id),next:i}))}}yt.diffEpochValidators=vl;(function(e){var t=_&&_.__createBinding||(Object.create?function(r,i,o,c){c===void 0&&(c=o);var a=Object.getOwnPropertyDescriptor(i,o);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(r,c,a)}:function(r,i,o,c){c===void 0&&(c=o),r[c]=i[o]}),n=_&&_.__exportStar||function(r,i){for(var o in r)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&t(i,r,o)};Object.defineProperty(e,"__esModule",{value:!0}),n(wn,e),n(Dr,e),n(Rr,e),n(ft,e),n(Tn,e),n(yt,e),n(En,e),n($t,e)})(oe);var mt={},ml=_&&_.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(mt,"__esModule",{value:!0});mt.PublicKey=void 0;const ko=oe,bl=oi,wl=ml(ri),fe=Lt,$r=le;function Al(e){switch(e){case fe.KeyType.ED25519:return"ed25519";case fe.KeyType.SECP256K1:return"secp256k1";default:throw new Error(`Unknown key type ${e}`)}}function El(e){switch(e.toLowerCase()){case"ed25519":return fe.KeyType.ED25519;case"secp256k1":return fe.KeyType.SECP256K1;default:throw new Error(`Unknown key type ${e}`)}}class Xh extends $r.Assignable{constructor(){super(...arguments),this.keyType=fe.KeyType.ED25519}}class Zh extends $r.Assignable{constructor(){super(...arguments),this.keyType=fe.KeyType.SECP256K1}}class rn extends $r.Assignable{constructor({keyType:t,data:n}){super({}),t===fe.KeyType.ED25519?this.ed25519Key={keyType:t,data:n}:t===fe.KeyType.SECP256K1&&(this.secp256k1Key={keyType:t,data:n})}static from(t){return typeof t=="string"?rn.fromString(t):t}static fromString(t){const n=t.split(":");let r,i;if(n.length===1)r=n[0];else if(n.length===2)r=n[1],i=El(n[0]);else throw new Error("Invalid encoded key format, must be <curve>:<encoded key>");const o=(0,ko.baseDecode)(r);i||(i=o.length===fe.KeySize.SECP256k1_PUBLIC_KEY?fe.KeyType.SECP256K1:fe.KeyType.ED25519);const c=i===fe.KeyType.ED25519?fe.KeySize.ED25519_PUBLIC_KEY:fe.KeySize.SECP256k1_PUBLIC_KEY;if(o.length!==c)throw new Error(`Invalid public key size (${o.length}), must be ${c}`);return new rn({keyType:i,data:o})}toString(){const t=(0,ko.baseEncode)(this.data);return`${Al(this.keyType)}:${t}`}verify(t,n){const r=this.keyType,i=this.data;switch(r){case fe.KeyType.ED25519:return bl.ed25519.verify(n,t,i);case fe.KeyType.SECP256K1:return wl.default.ecdsaVerify(n.subarray(0,64),t,new Uint8Array([4,...i]));default:throw new Error(`Unknown key type: ${r}`)}}get keyPair(){return this.ed25519Key||this.secp256k1Key}get keyType(){return this.keyPair.keyType}get data(){return this.keyPair.data}}mt.PublicKey=rn;var Sl=_&&_.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xt,"__esModule",{value:!0});xt.KeyPairEd25519=void 0;const Wt=oe,rr=oi,Il=Sl(ii),or=Lt,Ol=vt,Tl=mt;class Br extends Ol.KeyPairBase{constructor(t){super();const n=(0,Wt.baseDecode)(t),r=new Uint8Array(n.slice(0,or.KeySize.SECRET_KEY)),i=rr.ed25519.getPublicKey(new Uint8Array(r));this.publicKey=new Tl.PublicKey({keyType:or.KeyType.ED25519,data:i}),this.secretKey=(0,Wt.baseEncode)(r),this.extendedSecretKey=t}static fromRandom(){const t=(0,Il.default)(or.KeySize.SECRET_KEY),n=rr.ed25519.getPublicKey(new Uint8Array(t)),r=new Uint8Array([...t,...n]);return new Br((0,Wt.baseEncode)(r))}sign(t){return{signature:rr.ed25519.sign(t,(0,Wt.baseDecode)(this.secretKey)),publicKey:this.publicKey}}verify(t,n){return this.publicKey.verify(t,n)}toString(){return`ed25519:${this.extendedSecretKey}`}getPublicKey(){return this.publicKey}}xt.KeyPairEd25519=Br;var Bt={},Bi=_&&_.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.KeyPairSecp256k1=void 0;const ir=Lt,Pl=vt,kl=mt,cr=Bi(ri),Cl=Bi(ii),Vt=oe;class Ur extends Pl.KeyPairBase{constructor(t){super();const n=(0,Vt.baseDecode)(t),r=new Uint8Array(n.slice(0,ir.KeySize.SECRET_KEY)),i=cr.default.publicKeyCreate(new Uint8Array(r),!1),o=i.subarray(1,i.length);this.publicKey=new kl.PublicKey({keyType:ir.KeyType.SECP256K1,data:o}),this.secretKey=(0,Vt.baseEncode)(r),this.extendedSecretKey=t}static fromRandom(){const t=(0,Cl.default)(ir.KeySize.SECRET_KEY),n=cr.default.publicKeyCreate(new Uint8Array(t),!1),r=n.subarray(1,n.length),i=new Uint8Array([...t,...r]);return new Ur((0,Vt.baseEncode)(i))}sign(t){const{signature:n,recid:r}=cr.default.ecdsaSign(t,(0,Vt.baseDecode)(this.secretKey));return{signature:new Uint8Array([...n,r]),publicKey:this.publicKey}}verify(t,n){return this.publicKey.verify(t,n)}toString(){return`secp256k1:${this.extendedSecretKey}`}getPublicKey(){return this.publicKey}}Bt.KeyPairSecp256k1=Ur;Object.defineProperty(bn,"__esModule",{value:!0});bn.KeyPair=void 0;const Ml=vt,Co=xt,Mo=Bt;class Nl extends Ml.KeyPairBase{static fromRandom(t){switch(t.toUpperCase()){case"ED25519":return Co.KeyPairEd25519.fromRandom();case"SECP256K1":return Mo.KeyPairSecp256k1.fromRandom();default:throw new Error(`Unknown curve ${t}`)}}static fromString(t){const n=t.split(":");if(n.length===2)switch(n[0].toUpperCase()){case"ED25519":return new Co.KeyPairEd25519(n[1]);case"SECP256K1":return new Mo.KeyPairSecp256k1(n[1]);default:throw new Error(`Unknown curve: ${n[0]}`)}else throw new Error("Invalid encoded key format, must be <curve>:<encoded key>")}}bn.KeyPair=Nl;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PublicKey=e.KeyPairSecp256k1=e.KeyPairEd25519=e.KeyPair=e.KeyType=void 0;var t=Lt;Object.defineProperty(e,"KeyType",{enumerable:!0,get:function(){return t.KeyType}});var n=bn;Object.defineProperty(e,"KeyPair",{enumerable:!0,get:function(){return n.KeyPair}});var r=xt;Object.defineProperty(e,"KeyPairEd25519",{enumerable:!0,get:function(){return r.KeyPairEd25519}});var i=Bt;Object.defineProperty(e,"KeyPairSecp256k1",{enumerable:!0,get:function(){return i.KeyPairSecp256k1}});var o=mt;Object.defineProperty(e,"PublicKey",{enumerable:!0,get:function(){return o.PublicKey}})})(ke);var bt={};Object.defineProperty(bt,"__esModule",{value:!0});bt.KeyStore=void 0;class jl{}bt.KeyStore=jl;var nt=_&&_.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function a(u){try{s(r.next(u))}catch(y){c(y)}}function d(u){try{s(r.throw(u))}catch(y){c(y)}}function s(u){u.done?o(u.value):i(u.value).then(a,d)}s((r=r.apply(e,t||[])).next())})};Object.defineProperty(mn,"__esModule",{value:!0});mn.InMemoryKeyStore=void 0;const Kl=ke,Dl=bt;class Rl extends Dl.KeyStore{constructor(){super(),this.keys={}}setKey(t,n,r){return nt(this,void 0,void 0,function*(){this.keys[`${n}:${t}`]=r.toString()})}getKey(t,n){return nt(this,void 0,void 0,function*(){const r=this.keys[`${n}:${t}`];return r?Kl.KeyPair.fromString(r):null})}removeKey(t,n){return nt(this,void 0,void 0,function*(){delete this.keys[`${n}:${t}`]})}clear(){return nt(this,void 0,void 0,function*(){this.keys={}})}getNetworks(){return nt(this,void 0,void 0,function*(){const t=new Set;return Object.keys(this.keys).forEach(n=>{const r=n.split(":");t.add(r[1])}),Array.from(t.values())})}getAccounts(t){return nt(this,void 0,void 0,function*(){const n=new Array;return Object.keys(this.keys).forEach(r=>{const i=r.split(":");i[i.length-1]===t&&n.push(i.slice(0,i.length-1).join(":"))}),n})}toString(){return"InMemoryKeyStore"}}mn.InMemoryKeyStore=Rl;var Pn={},rt=_&&_.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function a(u){try{s(r.next(u))}catch(y){c(y)}}function d(u){try{s(r.throw(u))}catch(y){c(y)}}function s(u){u.done?o(u.value):i(u.value).then(a,d)}s((r=r.apply(e,t||[])).next())})};Object.defineProperty(Pn,"__esModule",{value:!0});Pn.MergeKeyStore=void 0;const Ll=bt;class xl extends Ll.KeyStore{constructor(t,n={writeKeyStoreIndex:0}){super(),this.options=n,this.keyStores=t}setKey(t,n,r){return rt(this,void 0,void 0,function*(){yield this.keyStores[this.options.writeKeyStoreIndex].setKey(t,n,r)})}getKey(t,n){return rt(this,void 0,void 0,function*(){for(const r of this.keyStores){const i=yield r.getKey(t,n);if(i)return i}return null})}removeKey(t,n){return rt(this,void 0,void 0,function*(){for(const r of this.keyStores)yield r.removeKey(t,n)})}clear(){return rt(this,void 0,void 0,function*(){for(const t of this.keyStores)yield t.clear()})}getNetworks(){return rt(this,void 0,void 0,function*(){const t=new Set;for(const n of this.keyStores)for(const r of yield n.getNetworks())t.add(r);return Array.from(t)})}getAccounts(t){return rt(this,void 0,void 0,function*(){const n=new Set;for(const r of this.keyStores)for(const i of yield r.getAccounts(t))n.add(i);return Array.from(n)})}toString(){return`MergeKeyStore(${this.keyStores.join(", ")})`}}Pn.MergeKeyStore=xl;var kn={};Object.defineProperty(kn,"__esModule",{value:!0});kn.MultiContractKeyStore=void 0;class $l{}kn.MultiContractKeyStore=$l;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MultiContractKeyStore=e.MergeKeyStore=e.KeyStore=e.InMemoryKeyStore=void 0;var t=mn;Object.defineProperty(e,"InMemoryKeyStore",{enumerable:!0,get:function(){return t.InMemoryKeyStore}});var n=bt;Object.defineProperty(e,"KeyStore",{enumerable:!0,get:function(){return n.KeyStore}});var r=Pn;Object.defineProperty(e,"MergeKeyStore",{enumerable:!0,get:function(){return r.MergeKeyStore}});var i=kn;Object.defineProperty(e,"MultiContractKeyStore",{enumerable:!0,get:function(){return i.MultiContractKeyStore}})})(Ze);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.KeyStore=void 0;var t=Ze;Object.defineProperty(e,"KeyStore",{enumerable:!0,get:function(){return t.KeyStore}})})(ji);var Ui={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.InMemoryKeyStore=void 0;var t=Ze;Object.defineProperty(e,"InMemoryKeyStore",{enumerable:!0,get:function(){return t.InMemoryKeyStore}})})(Ui);var Fi={},Gi={},Cn={},ot=_&&_.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function a(u){try{s(r.next(u))}catch(y){c(y)}}function d(u){try{s(r.throw(u))}catch(y){c(y)}}function s(u){u.done?o(u.value):i(u.value).then(a,d)}s((r=r.apply(e,t||[])).next())})};Object.defineProperty(Cn,"__esModule",{value:!0});Cn.BrowserLocalStorageKeyStore=void 0;const Bl=ke,Ul=Ze,Fl="near-api-js:keystore:";class Gl extends Ul.KeyStore{constructor(t=window.localStorage,n=Fl){super(),this.localStorage=t,this.prefix=n}setKey(t,n,r){return ot(this,void 0,void 0,function*(){this.localStorage.setItem(this.storageKeyForSecretKey(t,n),r.toString())})}getKey(t,n){return ot(this,void 0,void 0,function*(){const r=this.localStorage.getItem(this.storageKeyForSecretKey(t,n));return r?Bl.KeyPair.fromString(r):null})}removeKey(t,n){return ot(this,void 0,void 0,function*(){this.localStorage.removeItem(this.storageKeyForSecretKey(t,n))})}clear(){return ot(this,void 0,void 0,function*(){for(const t of this.storageKeys())t.startsWith(this.prefix)&&this.localStorage.removeItem(t)})}getNetworks(){return ot(this,void 0,void 0,function*(){const t=new Set;for(const n of this.storageKeys())if(n.startsWith(this.prefix)){const r=n.substring(this.prefix.length).split(":");t.add(r[1])}return Array.from(t.values())})}getAccounts(t){return ot(this,void 0,void 0,function*(){const n=new Array;for(const r of this.storageKeys())if(r.startsWith(this.prefix)){const i=r.substring(this.prefix.length).split(":");i[1]===t&&n.push(i[0])}return n})}storageKeyForSecretKey(t,n){return`${this.prefix}${n}:${t}`}*storageKeys(){for(let t=0;t<this.localStorage.length;t++)yield this.localStorage.key(t)}}Cn.BrowserLocalStorageKeyStore=Gl;var Mn={},Ye=_&&_.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function a(u){try{s(r.next(u))}catch(y){c(y)}}function d(u){try{s(r.throw(u))}catch(y){c(y)}}function s(u){u.done?o(u.value):i(u.value).then(a,d)}s((r=r.apply(e,t||[])).next())})};Object.defineProperty(Mn,"__esModule",{value:!0});Mn.MultiContractBrowserLocalStorageKeyStore=void 0;const ql=ke,Hl=Ze,No="near-api-js:keystore:";class zl extends Hl.MultiContractKeyStore{constructor(t=window.localStorage,n=No){super(),this.localStorage=t,this.prefix=n||No}setKey(t,n,r,i){return Ye(this,void 0,void 0,function*(){this.localStorage.setItem(this.storageKeyForSecretKey(t,n,i),r.toString())})}getKey(t,n,r){return Ye(this,void 0,void 0,function*(){const i=this.localStorage.getItem(this.storageKeyForSecretKey(t,n,r));return i?ql.KeyPair.fromString(i):null})}removeKey(t,n,r){return Ye(this,void 0,void 0,function*(){this.localStorage.removeItem(this.storageKeyForSecretKey(t,n,r))})}clear(){return Ye(this,void 0,void 0,function*(){for(const t of this.storageKeys())t.startsWith(this.prefix)&&this.localStorage.removeItem(t)})}getNetworks(){return Ye(this,void 0,void 0,function*(){const t=new Set;for(const n of this.storageKeys())if(n.startsWith(this.prefix)){const r=n.substring(this.prefix.length).split(":");t.add(r[1])}return Array.from(t.values())})}getAccounts(t){return Ye(this,void 0,void 0,function*(){const n=[];for(const r of this.storageKeys())if(r.startsWith(this.prefix)){const i=r.substring(this.prefix.length).split(":");i[1]===t&&n.push(i[0])}return n})}getContracts(t,n){return Ye(this,void 0,void 0,function*(){const r=[];for(const i of this.storageKeys())if(i.startsWith(this.prefix)){const o=i.substring(this.prefix.length).split(":");o[1]===t&&o[0]===n&&r.push(o[2])}return r})}storageKeyForSecretKey(t,n,r){return`${this.prefix}${n}:${t}:${r}`}*storageKeys(){for(let t=0;t<this.localStorage.length;t++)yield this.localStorage.key(t)}}Mn.MultiContractBrowserLocalStorageKeyStore=zl;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MultiContractBrowserLocalStorageKeyStore=e.BrowserLocalStorageKeyStore=void 0;var t=Cn;Object.defineProperty(e,"BrowserLocalStorageKeyStore",{enumerable:!0,get:function(){return t.BrowserLocalStorageKeyStore}});var n=Mn;Object.defineProperty(e,"MultiContractBrowserLocalStorageKeyStore",{enumerable:!0,get:function(){return n.MultiContractBrowserLocalStorageKeyStore}})})(Gi);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.BrowserLocalStorageKeyStore=void 0;var t=Gi;Object.defineProperty(e,"BrowserLocalStorageKeyStore",{enumerable:!0,get:function(){return t.BrowserLocalStorageKeyStore}})})(Fi);var qi={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MergeKeyStore=void 0;var t=Ze;Object.defineProperty(e,"MergeKeyStore",{enumerable:!0,get:function(){return t.MergeKeyStore}})})(qi);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MergeKeyStore=e.BrowserLocalStorageKeyStore=e.InMemoryKeyStore=e.KeyStore=void 0;const t=ji;Object.defineProperty(e,"KeyStore",{enumerable:!0,get:function(){return t.KeyStore}});const n=Ui;Object.defineProperty(e,"InMemoryKeyStore",{enumerable:!0,get:function(){return n.InMemoryKeyStore}});const r=Fi;Object.defineProperty(e,"BrowserLocalStorageKeyStore",{enumerable:!0,get:function(){return r.BrowserLocalStorageKeyStore}});const i=qi;Object.defineProperty(e,"MergeKeyStore",{enumerable:!0,get:function(){return i.MergeKeyStore}})})(Ni);var Hi={},zi={},Wi={},Be={},wt={},Wl=_&&_.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function a(u){try{s(r.next(u))}catch(y){c(y)}}function d(u){try{s(r.throw(u))}catch(y){c(y)}}function s(u){u.done?o(u.value):i(u.value).then(a,d)}s((r=r.apply(e,t||[])).next())})};Object.defineProperty(wt,"__esModule",{value:!0});wt.exponentialBackoff=void 0;function Vl(e,t,n,r){return Wl(this,void 0,void 0,function*(){let i=e;for(let o=0;o<t;o++){const c=yield r();if(c)return c;yield Jl(i),i*=n}return null})}wt.exponentialBackoff=Vl;function Jl(e){return new Promise(t=>setTimeout(t,e))}var Nn={},He={},Xe={},U={};Object.defineProperty(U,"__esModule",{value:!0});U.Action=U.SignedDelegate=U.DeleteAccount=U.DeleteKey=U.AddKey=U.Stake=U.Transfer=U.FunctionCall=U.DeployContract=U.CreateAccount=U.IAction=U.AccessKey=U.AccessKeyPermission=U.FullAccessPermission=U.FunctionCallPermission=void 0;const jn=le;class Vi{constructor(t){if(Object.keys(t).length!==1)throw new Error("Enum can only take single value");Object.keys(t).map(n=>{this[n]=t[n],this.enum=n})}}class Yl extends jn.Assignable{}U.FunctionCallPermission=Yl;class Xl extends jn.Assignable{}U.FullAccessPermission=Xl;class Zl extends Vi{}U.AccessKeyPermission=Zl;class Ql extends jn.Assignable{}U.AccessKey=Ql;class De extends jn.Assignable{}U.IAction=De;class ed extends De{}U.CreateAccount=ed;class td extends De{}U.DeployContract=td;class nd extends De{}U.FunctionCall=nd;class rd extends De{}U.Transfer=rd;class od extends De{}U.Stake=od;class id extends De{}U.AddKey=id;class cd extends De{}U.DeleteKey=cd;class ad extends De{}U.DeleteAccount=ad;class sd extends De{}U.SignedDelegate=sd;class ud extends Vi{}U.Action=ud;Object.defineProperty(Xe,"__esModule",{value:!0});Xe.actionCreators=Xe.stringifyJsonOrBytes=void 0;const V=U;function ld(){return new V.AccessKey({nonce:0,permission:new V.AccessKeyPermission({fullAccess:new V.FullAccessPermission({})})})}function dd(e,t,n){return new V.AccessKey({nonce:0,permission:new V.AccessKeyPermission({functionCall:new V.FunctionCallPermission({receiverId:e,allowance:n,methodNames:t})})})}function fd(){return new V.Action({createAccount:new V.CreateAccount({})})}function yd(e){return new V.Action({deployContract:new V.DeployContract({code:e})})}function Ji(e){return e.byteLength!==void 0&&e.byteLength===e.length?e:R.from(JSON.stringify(e))}Xe.stringifyJsonOrBytes=Ji;function hd(e,t,n=BigInt(0),r=BigInt(0),i=Ji,o=!1){return o?new V.Action({functionCall:new V.FunctionCall({methodName:e,args:t,gas:n,deposit:r})}):new V.Action({functionCall:new V.FunctionCall({methodName:e,args:i(t),gas:n,deposit:r})})}function _d(e=BigInt(0)){return new V.Action({transfer:new V.Transfer({deposit:e})})}function pd(e=BigInt(0),t){return new V.Action({stake:new V.Stake({stake:e,publicKey:t})})}function gd(e,t){return new V.Action({addKey:new V.AddKey({publicKey:e,accessKey:t})})}function vd(e){return new V.Action({deleteKey:new V.DeleteKey({publicKey:e})})}function md(e){return new V.Action({deleteAccount:new V.DeleteAccount({beneficiaryId:e})})}function bd({delegateAction:e,signature:t}){return new V.Action({signedDelegate:new V.SignedDelegate({delegateAction:e,signature:t})})}Xe.actionCreators={addKey:gd,createAccount:fd,deleteAccount:md,deleteKey:vd,deployContract:yd,fullAccessKey:ld,functionCall:hd,functionCallAccessKey:dd,signedDelegate:bd,stake:pd,transfer:_d};var Ut={},Kn={},Dn={};Object.defineProperty(Dn,"__esModule",{value:!0});Dn.DelegateActionPrefix=void 0;const wd=le,Ad=Math.pow(2,30),Ed={MetaTransactions:366};class Sd extends wd.Assignable{}class Id extends Sd{constructor(t){super({prefix:Ad+t})}}class Od extends Id{constructor(){super(Ed.MetaTransactions)}}Dn.DelegateActionPrefix=Od;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SCHEMA=e.SignedTransaction=e.Transaction=e.decodeSignedTransaction=e.decodeTransaction=e.encodeTransaction=e.encodeSignedDelegate=e.encodeDelegateAction=void 0;const t=le,n=Mr,r=Dn;function i(y){return new Uint8Array([...(0,n.serialize)(e.SCHEMA.DelegateActionPrefix,new r.DelegateActionPrefix),...(0,n.serialize)(e.SCHEMA.DelegateAction,y)])}e.encodeDelegateAction=i;function o(y){return(0,n.serialize)(e.SCHEMA.SignedDelegate,y)}e.encodeSignedDelegate=o;function c(y){const T=y instanceof u?e.SCHEMA.SignedTransaction:e.SCHEMA.Transaction;return(0,n.serialize)(T,y)}e.encodeTransaction=c;function a(y){return new s((0,n.deserialize)(e.SCHEMA.Transaction,y))}e.decodeTransaction=a;function d(y){return new u((0,n.deserialize)(e.SCHEMA.SignedTransaction,y))}e.decodeSignedTransaction=d;class s extends t.Assignable{encode(){return c(this)}static decode(T){return a(T)}}e.Transaction=s;class u extends t.Assignable{encode(){return c(this)}static decode(T){return d(T)}}e.SignedTransaction=u,e.SCHEMA=new class{constructor(){this.Ed25519Signature={struct:{data:{array:{type:"u8",len:64}}}},this.Secp256k1Signature={struct:{data:{array:{type:"u8",len:65}}}},this.Signature={enum:[{struct:{ed25519Signature:this.Ed25519Signature}},{struct:{secp256k1Signature:this.Secp256k1Signature}}]},this.Ed25519Data={struct:{data:{array:{type:"u8",len:32}}}},this.Secp256k1Data={struct:{data:{array:{type:"u8",len:64}}}},this.PublicKey={enum:[{struct:{ed25519Key:this.Ed25519Data}},{struct:{secp256k1Key:this.Secp256k1Data}}]},this.FunctionCallPermission={struct:{allowance:{option:"u128"},receiverId:"string",methodNames:{array:{type:"string"}}}},this.FullAccessPermission={struct:{}},this.AccessKeyPermission={enum:[{struct:{functionCall:this.FunctionCallPermission}},{struct:{fullAccess:this.FullAccessPermission}}]},this.AccessKey={struct:{nonce:"u64",permission:this.AccessKeyPermission}},this.CreateAccount={struct:{}},this.DeployContract={struct:{code:{array:{type:"u8"}}}},this.FunctionCall={struct:{methodName:"string",args:{array:{type:"u8"}},gas:"u64",deposit:"u128"}},this.Transfer={struct:{deposit:"u128"}},this.Stake={struct:{stake:"u128",publicKey:this.PublicKey}},this.AddKey={struct:{publicKey:this.PublicKey,accessKey:this.AccessKey}},this.DeleteKey={struct:{publicKey:this.PublicKey}},this.DeleteAccount={struct:{beneficiaryId:"string"}},this.DelegateActionPrefix={struct:{prefix:"u32"}},this.ClassicActions={enum:[{struct:{createAccount:this.CreateAccount}},{struct:{deployContract:this.DeployContract}},{struct:{functionCall:this.FunctionCall}},{struct:{transfer:this.Transfer}},{struct:{stake:this.Stake}},{struct:{addKey:this.AddKey}},{struct:{deleteKey:this.DeleteKey}},{struct:{deleteAccount:this.DeleteAccount}}]},this.DelegateAction={struct:{senderId:"string",receiverId:"string",actions:{array:{type:this.ClassicActions}},nonce:"u64",maxBlockHeight:"u64",publicKey:this.PublicKey}},this.SignedDelegate={struct:{delegateAction:this.DelegateAction,signature:this.Signature}},this.Action={enum:[{struct:{createAccount:this.CreateAccount}},{struct:{deployContract:this.DeployContract}},{struct:{functionCall:this.FunctionCall}},{struct:{transfer:this.Transfer}},{struct:{stake:this.Stake}},{struct:{addKey:this.AddKey}},{struct:{deleteKey:this.DeleteKey}},{struct:{deleteAccount:this.DeleteAccount}},{struct:{signedDelegate:this.SignedDelegate}}]},this.Transaction={struct:{signerId:"string",publicKey:this.PublicKey,nonce:"u64",receiverId:"string",blockHash:{array:{type:"u8",len:32}},actions:{array:{type:this.Action}}}},this.SignedTransaction={struct:{transaction:this.Transaction,signature:this.Signature}}}}})(Kn);Object.defineProperty(Ut,"__esModule",{value:!0});Ut.createTransaction=void 0;const Td=Kn;function Pd(e,t,n,r,i,o){const c=typeof r=="bigint"?r:BigInt(r);return new Td.Transaction({signerId:e,publicKey:t,nonce:c,receiverId:n,actions:i,blockHash:o})}Ut.createTransaction=Pd;var ht={};Object.defineProperty(ht,"__esModule",{value:!0});ht.buildDelegateAction=ht.DelegateAction=void 0;const kd=le,Cd=Xe,{addKey:Md,createAccount:Nd,deleteAccount:jd,deleteKey:Kd,deployContract:Dd,functionCall:Rd,stake:Ld,transfer:xd}=Cd.actionCreators;class Yi extends kd.Assignable{}ht.DelegateAction=Yi;function $d({actions:e,maxBlockHeight:t,nonce:n,publicKey:r,receiverId:i,senderId:o}){return new Yi({senderId:o,receiverId:i,actions:e.map(c=>{if(!c.type&&!c.params)return c;switch(c.type){case"AddKey":{const{publicKey:a,accessKey:d}=c.params;return Md(a,d)}case"CreateAccount":return Nd(c.params.createAccount);case"DeleteAccount":return jd(c.params.deleteAccount);case"DeleteKey":return Kd(c.params.publicKey);case"DeployContract":return Dd(c.params.code);case"FunctionCall":{const{methodName:a,args:d,gas:s,deposit:u}=c.params;return Rd(a,d,s,u)}case"Stake":return Ld(c.params.stake,c.params.publicKey);case"Transfer":{const{deposit:a}=c.params;return xd(a)}}throw new Error("Unrecognized action")}),nonce:n,maxBlockHeight:t,publicKey:r})}ht.buildDelegateAction=$d;var _t={},Ft={};Object.defineProperty(Ft,"__esModule",{value:!0});Ft.Signature=void 0;const on=ke,Fr=le;class e_ extends Fr.Assignable{constructor(){super(...arguments),this.keyType=on.KeyType.ED25519}}class t_ extends Fr.Assignable{constructor(){super(...arguments),this.keyType=on.KeyType.SECP256K1}}class Bd extends Fr.Assignable{constructor({keyType:t,data:n}){super({}),t===on.KeyType.ED25519?this.ed25519Signature={keyType:t,data:n}:t===on.KeyType.SECP256K1&&(this.secp256k1Signature={keyType:t,data:n})}get signature(){return this.ed25519Signature||this.secp256k1Signature}get signatureType(){return this.signature.keyType}get data(){return this.signature.data}}Ft.Signature=Bd;var Gr=_&&_.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function a(u){try{s(r.next(u))}catch(y){c(y)}}function d(u){try{s(r.throw(u))}catch(y){c(y)}}function s(u){u.done?o(u.value):i(u.value).then(a,d)}s((r=r.apply(e,t||[])).next())})};Object.defineProperty(_t,"__esModule",{value:!0});_t.signDelegateAction=_t.signTransaction=void 0;const Xi=ci,Ud=U,Fd=Ut,cn=Kn,Zi=Ft,an=ke;function jo(e,t,n,r){return Gr(this,void 0,void 0,function*(){const i=(0,cn.encodeTransaction)(e),o=new Uint8Array((0,Xi.sha256)(i)),c=yield t.signMessage(i,n,r),a=e.publicKey.ed25519Key?an.KeyType.ED25519:an.KeyType.SECP256K1,d=new cn.SignedTransaction({transaction:e,signature:new Zi.Signature({keyType:a,data:c.signature})});return[o,d]})}function Gd(...e){return Gr(this,void 0,void 0,function*(){if(e[0].constructor===cn.Transaction){const[t,n,r,i]=e;return jo(t,n,r,i)}else{const[t,n,r,i,o,c,a]=e,d=yield o.getPublicKey(c,a),s=(0,Fd.createTransaction)(c,d,t,n,r,i);return jo(s,o,c,a)}})}_t.signTransaction=Gd;function qd({delegateAction:e,signer:t}){return Gr(this,void 0,void 0,function*(){const n=(0,cn.encodeDelegateAction)(e),r=yield t.sign(n),i=e.publicKey.ed25519Key?an.KeyType.ED25519:an.KeyType.SECP256K1,o=new Ud.SignedDelegate({delegateAction:e,signature:new Zi.Signature({keyType:i,data:r})});return{hash:new Uint8Array((0,Xi.sha256)(n)),signedDelegateAction:o}})}_t.signDelegateAction=qd;(function(e){var t=_&&_.__createBinding||(Object.create?function(r,i,o,c){c===void 0&&(c=o);var a=Object.getOwnPropertyDescriptor(i,o);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(r,c,a)}:function(r,i,o,c){c===void 0&&(c=o),r[c]=i[o]}),n=_&&_.__exportStar||function(r,i){for(var o in r)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&t(i,r,o)};Object.defineProperty(e,"__esModule",{value:!0}),n(Xe,e),n(U,e),n(Ut,e),n(ht,e),n(Kn,e),n(_t,e),n(Ft,e)})(He);var At={};Object.defineProperty(At,"__esModule",{value:!0});At.Provider=void 0;class Hd{}At.Provider=Hd;var Gt={},Jt={},Ko;function zd(){if(Ko)return Jt;Ko=1;var e=_&&_.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(Jt,"__esModule",{value:!0});const t=e(Jc()),n=e(Yc()),r=e(Xc()),i=new n.default.Agent({keepAlive:!0}),o=new r.default.Agent({keepAlive:!0});function c(d){return d.protocol==="http:"?i:o}function a(d,s){return(0,t.default)(d,Object.assign({agent:c(new URL(d.toString()))},s))}return Jt.default=a,Jt}var Wd=_&&_.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Vd=_&&_.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Jd=_&&_.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&Wd(t,e,n);return Vd(t,e),t},Do=_&&_.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function a(u){try{s(r.next(u))}catch(y){c(y)}}function d(u){try{s(r.throw(u))}catch(y){c(y)}}function s(u){u.done?o(u.value):i(u.value).then(a,d)}s((r=r.apply(e,t||[])).next())})},Yd=_&&_.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gt,"__esModule",{value:!0});Gt.fetchJson=void 0;const Xd=le,ar=oe,Zd=Yd(Zc),Qd=wt,ef=1e3,tf=1.5,Ro=10;function nf(e,t){return Do(this,void 0,void 0,function*(){let n={url:null};typeof e=="string"?n.url=e:n=e;const r=yield(0,Qd.exponentialBackoff)(ef,Ro,tf,()=>Do(this,void 0,void 0,function*(){var i;try{const o=yield((i=_.fetch)!==null&&i!==void 0?i:(yield Promise.resolve().then(()=>Jd(zd()))).default)(n.url,{method:t?"POST":"GET",body:t||void 0,headers:Object.assign(Object.assign({},n.headers),{"Content-Type":"application/json"})});if(!o.ok){if(o.status===503)return ar.Logger.warn(`Retrying HTTP request for ${n.url} as it's not available now`),null;if(o.status===408)return ar.Logger.warn(`Retrying HTTP request for ${n.url} as the previous connection was unused for some time`),null;throw(0,Zd.default)(o.status,yield o.text())}return o}catch(o){if(o.toString().includes("FetchError")||o.toString().includes("Failed to fetch"))return ar.Logger.warn(`Retrying HTTP request for ${n.url} because of error: ${o}`),null;throw o}}));if(!r)throw new Xd.TypedError(`Exceeded ${Ro} attempts for ${n.url}.`,"RetriesExceeded");return yield r.json()})}Gt.fetchJson=nf;var X=_&&_.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function a(u){try{s(r.next(u))}catch(y){c(y)}}function d(u){try{s(r.throw(u))}catch(y){c(y)}}function s(u){u.done?o(u.value):i(u.value).then(a,d)}s((r=r.apply(e,t||[])).next())})},Lo=_&&_.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};Object.defineProperty(Nn,"__esModule",{value:!0});Nn.JsonRpcProvider=void 0;const Me=oe,it=le,rf=He,of=wt,cf=At,af=Gt,sf=12,uf=500,lf=1.5;let df=123;class ff extends cf.Provider{constructor(t,n){super(),this.connection=t||{url:""};const r={retries:sf,wait:uf,backoff:lf};this.options=Object.assign({},r,n)}status(){return X(this,void 0,void 0,function*(){return this.sendJsonRpc("status",[])})}sendTransactionUntil(t,n){return X(this,void 0,void 0,function*(){const r=(0,rf.encodeTransaction)(t);return this.sendJsonRpc("send_tx",{signed_tx_base64:R.from(r).toString("base64"),wait_until:n})})}sendTransaction(t){return X(this,void 0,void 0,function*(){return this.sendTransactionUntil(t,"EXECUTED_OPTIMISTIC")})}sendTransactionAsync(t){return X(this,void 0,void 0,function*(){return this.sendTransactionUntil(t,"NONE")})}txStatus(t,n,r="EXECUTED_OPTIMISTIC"){return X(this,void 0,void 0,function*(){return typeof t=="string"?this.txStatusString(t,n,r):this.txStatusUint8Array(t,n,r)})}txStatusUint8Array(t,n,r){return X(this,void 0,void 0,function*(){return this.sendJsonRpc("tx",{tx_hash:(0,Me.baseEncode)(t),sender_account_id:n,wait_until:r})})}txStatusString(t,n,r){return X(this,void 0,void 0,function*(){return this.sendJsonRpc("tx",{tx_hash:t,sender_account_id:n,wait_until:r})})}txStatusReceipts(t,n,r="EXECUTED_OPTIMISTIC"){return X(this,void 0,void 0,function*(){return typeof t=="string"?this.sendJsonRpc("EXPERIMENTAL_tx_status",{tx_hash:t,sender_account_id:n,wait_until:r}):this.sendJsonRpc("EXPERIMENTAL_tx_status",{tx_hash:(0,Me.baseEncode)(t),sender_account_id:n,wait_until:r})})}query(...t){return X(this,void 0,void 0,function*(){let n;if(t.length===1){const r=t[0],{block_id:i,blockId:o}=r,c=Lo(r,["block_id","blockId"]);n=yield this.sendJsonRpc("query",Object.assign(Object.assign({},c),{block_id:i||o}))}else{const[r,i]=t;n=yield this.sendJsonRpc("query",[r,i])}if(n&&n.error)throw new it.TypedError(`Querying failed: ${n.error}.
${JSON.stringify(n,null,2)}`,(0,Me.getErrorTypeFromErrorMessage)(n.error,n.error.name));return n})}block(t){return X(this,void 0,void 0,function*(){const{finality:n}=t,{blockId:r}=t;return this.sendJsonRpc("block",{block_id:r,finality:n})})}blockChanges(t){return X(this,void 0,void 0,function*(){const{finality:n}=t,{blockId:r}=t;return this.sendJsonRpc("EXPERIMENTAL_changes_in_block",{block_id:r,finality:n})})}chunk(t){return X(this,void 0,void 0,function*(){return this.sendJsonRpc("chunk",[t])})}validators(t){return X(this,void 0,void 0,function*(){return this.sendJsonRpc("validators",[t])})}experimental_protocolConfig(t){return X(this,void 0,void 0,function*(){const n=t,{blockId:r}=n,i=Lo(n,["blockId"]);return yield this.sendJsonRpc("EXPERIMENTAL_protocol_config",Object.assign(Object.assign({},i),{block_id:r}))})}lightClientProof(t){return X(this,void 0,void 0,function*(){return yield this.sendJsonRpc("EXPERIMENTAL_light_client_proof",t)})}nextLightClientBlock(t){return X(this,void 0,void 0,function*(){return yield this.sendJsonRpc("next_light_client_block",t)})}accessKeyChanges(t,n){return X(this,void 0,void 0,function*(){const{finality:r}=n,{blockId:i}=n;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"all_access_key_changes",account_ids:t,block_id:i,finality:r})})}singleAccessKeyChanges(t,n){return X(this,void 0,void 0,function*(){const{finality:r}=n,{blockId:i}=n;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"single_access_key_changes",keys:t,block_id:i,finality:r})})}accountChanges(t,n){return X(this,void 0,void 0,function*(){const{finality:r}=n,{blockId:i}=n;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"account_changes",account_ids:t,block_id:i,finality:r})})}contractStateChanges(t,n,r=""){return X(this,void 0,void 0,function*(){const{finality:i}=n,{blockId:o}=n;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"data_changes",account_ids:t,key_prefix_base64:r,block_id:o,finality:i})})}contractCodeChanges(t,n){return X(this,void 0,void 0,function*(){const{finality:r}=n,{blockId:i}=n;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"contract_code_changes",account_ids:t,block_id:i,finality:r})})}gasPrice(t){return X(this,void 0,void 0,function*(){return yield this.sendJsonRpc("gas_price",[t])})}sendJsonRpc(t,n){return X(this,void 0,void 0,function*(){const r=yield(0,of.exponentialBackoff)(this.options.wait,this.options.retries,this.options.backoff,()=>X(this,void 0,void 0,function*(){var o;try{const c={method:t,params:n,id:df++,jsonrpc:"2.0"},a=yield(0,af.fetchJson)(this.connection,JSON.stringify(c));if(a.error){if(typeof a.error.data=="object")throw typeof a.error.data.error_message=="string"&&typeof a.error.data.error_type=="string"?new it.TypedError(a.error.data.error_message,a.error.data.error_type):(0,Me.parseRpcError)(a.error.data);{const d=`[${a.error.code}] ${a.error.message}: ${a.error.data}`;if(a.error.data==="Timeout"||d.includes("Timeout error")||d.includes("query has timed out"))throw new it.TypedError(d,"TimeoutError");const s=(0,Me.getErrorTypeFromErrorMessage)(a.error.data,"");throw s?new it.TypedError((0,Me.formatError)(s,n),s):new it.TypedError(d,a.error.name)}}else if(typeof((o=a.result)===null||o===void 0?void 0:o.error)=="string"){const d=(0,Me.getErrorTypeFromErrorMessage)(a.result.error,"");if(d)throw new Me.ServerError((0,Me.formatError)(d,n),d)}return a}catch(c){if(c.type==="TimeoutError")return Me.Logger.warn(`Retrying request to ${t} as it has timed out`,n),null;throw c}})),{result:i}=r;if(typeof i>"u")throw new it.TypedError(`Exceeded ${this.options.retries} attempts for request to ${t}.`,"RetriesExceeded");return i})}}Nn.JsonRpcProvider=ff;var Rn={},ce=_&&_.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function a(u){try{s(r.next(u))}catch(y){c(y)}}function d(u){try{s(r.throw(u))}catch(y){c(y)}}function s(u){u.done?o(u.value):i(u.value).then(a,d)}s((r=r.apply(e,t||[])).next())})};Object.defineProperty(Rn,"__esModule",{value:!0});Rn.FailoverRpcProvider=void 0;const yf=oe,hf=le,_f=At;class pf extends _f.Provider{constructor(t){if(super(),t.length===0)throw new Error("At least one provider must be specified");this.providers=t,this.currentProviderIndex=0}switchToNextProvider(){this.providers.length!==1&&(this.providers.length-1<=this.currentProviderIndex?this.currentProviderIndex=0:this.currentProviderIndex+=1,yf.Logger.debug(`Switched to provider at the index ${this.currentProviderIndex}`))}get currentProvider(){const t=this.providers[this.currentProviderIndex];if(!t)throw new Error(`Provider wasn't found at index ${this.currentProviderIndex}`);return t}withBackoff(t){return ce(this,void 0,void 0,function*(){for(let n=0;n<this.providers.length;n++)try{const r=yield t(this.currentProvider);if(r)return r}catch{this.switchToNextProvider()}throw new hf.TypedError(`Exceeded ${this.providers.length} providers to execute request`,"RetriesExceeded")})}status(){return ce(this,void 0,void 0,function*(){return this.withBackoff(t=>t.status())})}sendTransactionUntil(t,n){return ce(this,void 0,void 0,function*(){return this.withBackoff(r=>r.sendTransactionUntil(t,n))})}sendTransaction(t){return ce(this,void 0,void 0,function*(){return this.withBackoff(n=>n.sendTransaction(t))})}sendTransactionAsync(t){return ce(this,void 0,void 0,function*(){return this.withBackoff(n=>n.sendTransactionAsync(t))})}txStatus(t,n,r){return ce(this,void 0,void 0,function*(){return this.withBackoff(i=>i.txStatus(t,n,r))})}txStatusReceipts(t,n,r){return ce(this,void 0,void 0,function*(){return this.withBackoff(i=>i.txStatusReceipts(t,n,r))})}query(t,n){return ce(this,void 0,void 0,function*(){return n?this.withBackoff(r=>r.query(t,n)):this.withBackoff(r=>r.query(t))})}block(t){return ce(this,void 0,void 0,function*(){return this.withBackoff(n=>n.block(t))})}blockChanges(t){return ce(this,void 0,void 0,function*(){return this.withBackoff(n=>n.blockChanges(t))})}chunk(t){return ce(this,void 0,void 0,function*(){return this.withBackoff(n=>n.chunk(t))})}validators(t){return ce(this,void 0,void 0,function*(){return this.withBackoff(n=>n.validators(t))})}experimental_protocolConfig(t){return ce(this,void 0,void 0,function*(){return this.withBackoff(n=>n.experimental_protocolConfig(t))})}lightClientProof(t){return ce(this,void 0,void 0,function*(){return this.withBackoff(n=>n.lightClientProof(t))})}nextLightClientBlock(t){return ce(this,void 0,void 0,function*(){return this.withBackoff(n=>n.nextLightClientBlock(t))})}accessKeyChanges(t,n){return ce(this,void 0,void 0,function*(){return this.withBackoff(r=>r.accessKeyChanges(t,n))})}singleAccessKeyChanges(t,n){return ce(this,void 0,void 0,function*(){return this.withBackoff(r=>r.singleAccessKeyChanges(t,n))})}accountChanges(t,n){return ce(this,void 0,void 0,function*(){return this.withBackoff(r=>r.accountChanges(t,n))})}contractStateChanges(t,n,r=""){return ce(this,void 0,void 0,function*(){return this.withBackoff(i=>i.contractStateChanges(t,n,r))})}contractCodeChanges(t,n){return ce(this,void 0,void 0,function*(){return this.withBackoff(r=>r.contractCodeChanges(t,n))})}gasPrice(t){return ce(this,void 0,void 0,function*(){return this.withBackoff(n=>n.gasPrice(t))})}}Rn.FailoverRpcProvider=pf;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fetchJson=e.Provider=e.FailoverRpcProvider=e.JsonRpcProvider=e.exponentialBackoff=void 0;var t=wt;Object.defineProperty(e,"exponentialBackoff",{enumerable:!0,get:function(){return t.exponentialBackoff}});var n=Nn;Object.defineProperty(e,"JsonRpcProvider",{enumerable:!0,get:function(){return n.JsonRpcProvider}});var r=Rn;Object.defineProperty(e,"FailoverRpcProvider",{enumerable:!0,get:function(){return r.FailoverRpcProvider}});var i=At;Object.defineProperty(e,"Provider",{enumerable:!0,get:function(){return i.Provider}});var o=Gt;Object.defineProperty(e,"fetchJson",{enumerable:!0,get:function(){return o.fetchJson}})})(Be);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FinalExecutionStatusBasic=e.ExecutionStatusBasic=e.IdType=e.Provider=e.getTransactionLastResult=void 0;var t=oe;Object.defineProperty(e,"getTransactionLastResult",{enumerable:!0,get:function(){return t.getTransactionLastResult}});var n=Be;Object.defineProperty(e,"Provider",{enumerable:!0,get:function(){return n.Provider}});var r=le;Object.defineProperty(e,"IdType",{enumerable:!0,get:function(){return r.IdType}}),Object.defineProperty(e,"ExecutionStatusBasic",{enumerable:!0,get:function(){return r.ExecutionStatusBasic}}),Object.defineProperty(e,"FinalExecutionStatusBasic",{enumerable:!0,get:function(){return r.FinalExecutionStatusBasic}})})(Wi);var Qi={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.JsonRpcProvider=e.TypedError=e.ErrorContext=void 0;var t=le;Object.defineProperty(e,"ErrorContext",{enumerable:!0,get:function(){return t.ErrorContext}}),Object.defineProperty(e,"TypedError",{enumerable:!0,get:function(){return t.TypedError}});var n=Be;Object.defineProperty(e,"JsonRpcProvider",{enumerable:!0,get:function(){return n.JsonRpcProvider}})})(Qi);var ec={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FailoverRpcProvider=void 0;var t=Be;Object.defineProperty(e,"FailoverRpcProvider",{enumerable:!0,get:function(){return t.FailoverRpcProvider}})})(ec);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ErrorContext=e.TypedError=e.getTransactionLastResult=e.FinalExecutionStatusBasic=e.FailoverRpcProvider=e.JsonRpcProvider=e.Provider=void 0;const t=Wi;Object.defineProperty(e,"Provider",{enumerable:!0,get:function(){return t.Provider}}),Object.defineProperty(e,"getTransactionLastResult",{enumerable:!0,get:function(){return t.getTransactionLastResult}}),Object.defineProperty(e,"FinalExecutionStatusBasic",{enumerable:!0,get:function(){return t.FinalExecutionStatusBasic}});const n=Qi;Object.defineProperty(e,"JsonRpcProvider",{enumerable:!0,get:function(){return n.JsonRpcProvider}}),Object.defineProperty(e,"TypedError",{enumerable:!0,get:function(){return n.TypedError}}),Object.defineProperty(e,"ErrorContext",{enumerable:!0,get:function(){return n.ErrorContext}});const r=ec;Object.defineProperty(e,"FailoverRpcProvider",{enumerable:!0,get:function(){return r.FailoverRpcProvider}})})(zi);var tc={},sn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PublicKey=e.KeyType=e.KeyPairEd25519=e.KeyPair=void 0;var t=ke;Object.defineProperty(e,"KeyPair",{enumerable:!0,get:function(){return t.KeyPair}}),Object.defineProperty(e,"KeyPairEd25519",{enumerable:!0,get:function(){return t.KeyPairEd25519}}),Object.defineProperty(e,"KeyType",{enumerable:!0,get:function(){return t.KeyType}}),Object.defineProperty(e,"PublicKey",{enumerable:!0,get:function(){return t.PublicKey}})})(sn);var nc={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.base_decode=e.base_encode=e.deserialize=e.serialize=void 0;var t=Mr;Object.defineProperty(e,"serialize",{enumerable:!0,get:function(){return t.serialize}}),Object.defineProperty(e,"deserialize",{enumerable:!0,get:function(){return t.deserialize}});var n=oe;Object.defineProperty(e,"base_encode",{enumerable:!0,get:function(){return n.baseEncode}}),Object.defineProperty(e,"base_decode",{enumerable:!0,get:function(){return n.baseDecode}})})(nc);var rc={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fetchJson=void 0;var t=Be;Object.defineProperty(e,"fetchJson",{enumerable:!0,get:function(){return t.fetchJson}})})(rc);var oc={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Enum=e.Assignable=void 0;var t=le;Object.defineProperty(e,"Assignable",{enumerable:!0,get:function(){return t.Assignable}});class n{constructor(i){if(Object.keys(i).length!==1)throw new Error("Enum can only take single value");Object.keys(i).map(o=>{this[o]=i[o],this.enum=o})}}e.Enum=n})(oc);var ic={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.parseNearAmount=e.formatNearAmount=e.NEAR_NOMINATION_EXP=e.NEAR_NOMINATION=void 0;var t=oe;Object.defineProperty(e,"NEAR_NOMINATION",{enumerable:!0,get:function(){return t.NEAR_NOMINATION}}),Object.defineProperty(e,"NEAR_NOMINATION_EXP",{enumerable:!0,get:function(){return t.NEAR_NOMINATION_EXP}}),Object.defineProperty(e,"formatNearAmount",{enumerable:!0,get:function(){return t.formatNearAmount}}),Object.defineProperty(e,"parseNearAmount",{enumerable:!0,get:function(){return t.parseNearAmount}})})(ic);var cc={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ServerError=e.getErrorTypeFromErrorMessage=e.formatError=e.parseResultError=e.parseRpcError=void 0;var t=oe;Object.defineProperty(e,"parseRpcError",{enumerable:!0,get:function(){return t.parseRpcError}}),Object.defineProperty(e,"parseResultError",{enumerable:!0,get:function(){return t.parseResultError}}),Object.defineProperty(e,"formatError",{enumerable:!0,get:function(){return t.formatError}}),Object.defineProperty(e,"getErrorTypeFromErrorMessage",{enumerable:!0,get:function(){return t.getErrorTypeFromErrorMessage}}),Object.defineProperty(e,"ServerError",{enumerable:!0,get:function(){return t.ServerError}})})(cc);var ac={},Ue={},Et={},Ie={},sc=_&&_.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function a(u){try{s(r.next(u))}catch(y){c(y)}}function d(u){try{s(r.throw(u))}catch(y){c(y)}}function s(u){u.done?o(u.value):i(u.value).then(a,d)}s((r=r.apply(e,t||[])).next())})};Object.defineProperty(Ie,"__esModule",{value:!0});Ie.viewFunction=Ie.viewState=Ie.encodeJSContractArgs=Ie.validateArgs=void 0;const gf=le,vf=oe;function mf(e){return JSON.parse(R.from(e).toString())}function bf(e){return R.from(JSON.stringify(e))}function uc(e){if(!(e.byteLength!==void 0&&e.byteLength===e.length)&&(Array.isArray(e)||typeof e!="object"))throw new gf.PositionalArgsError}Ie.validateArgs=uc;function lc(e,t,n){return R.concat([R.from(e),R.from([0]),R.from(t),R.from([0]),R.from(n)])}Ie.encodeJSContractArgs=lc;function wf(e,t,n,r={finality:"optimistic"}){return sc(this,void 0,void 0,function*(){const{values:i}=yield e.provider.query(Object.assign(Object.assign({request_type:"view_state"},r),{account_id:t,prefix_base64:R.from(n).toString("base64")}));return i.map(({key:o,value:c})=>({key:R.from(o,"base64"),value:R.from(c,"base64")}))})}Ie.viewState=wf;function Af(e,{contractId:t,methodName:n,args:r={},parse:i=mf,stringify:o=bf,jsContract:c=!1,blockQuery:a={finality:"optimistic"}}){return sc(this,void 0,void 0,function*(){let d;uc(r),c?d=lc(t,n,Object.keys(r).length>0?JSON.stringify(r):""):d=o(r);const s=yield e.provider.query(Object.assign(Object.assign({request_type:"call_function"},a),{account_id:c?e.jsvmAccountId:t,method_name:c?"view_js_contract":n,args_base64:d.toString("base64")}));return s.logs&&(0,vf.printTxOutcomeLogs)({contractId:t,logs:s.logs}),s.result&&s.result.length>0&&i(R.from(s.result))})}Ie.viewFunction=Af;var re=_&&_.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function a(u){try{s(r.next(u))}catch(y){c(y)}}function d(u){try{s(r.throw(u))}catch(y){c(y)}}function s(u){u.done?o(u.value):i(u.value).then(a,d)}s((r=r.apply(e,t||[])).next())})};Object.defineProperty(Et,"__esModule",{value:!0});Et.Account=void 0;const Ot=ke,Ef=Be,jt=He,ct=le,Ne=oe,xo=Ie,{addKey:sr,createAccount:$o,deleteAccount:Sf,deleteKey:If,deployContract:Bo,fullAccessKey:ur,functionCall:Of,functionCallAccessKey:Tf,stake:Pf,transfer:lr}=jt.actionCreators,kf=12,Cf=500,Mf=1.5;class qr{constructor(t,n){this.accessKeyByPublicKeyCache={},this.connection=t,this.accountId=n}getConnection(){return this.connection}state(){return re(this,void 0,void 0,function*(){return this.connection.provider.query({request_type:"view_account",account_id:this.accountId,finality:"optimistic"})})}signTransaction(t,n){return re(this,void 0,void 0,function*(){const r=yield this.findAccessKey(t,n);if(!r)throw new ct.TypedError(`Can not sign transactions for account ${this.accountId} on network ${this.connection.networkId}, no matching key pair exists for this account`,"KeyNotFound");const{accessKey:i}=r,c=(yield this.connection.provider.block({finality:"final"})).header.hash,a=i.nonce+BigInt(1);return yield(0,jt.signTransaction)(t,a,n,(0,Ne.baseDecode)(c),this.connection.signer,this.accountId,this.connection.networkId)})}signAndSendTransaction({receiverId:t,actions:n,returnError:r}){return re(this,void 0,void 0,function*(){let i,o;const c=yield(0,Ef.exponentialBackoff)(Cf,kf,Mf,()=>re(this,void 0,void 0,function*(){[i,o]=yield this.signTransaction(t,n);const a=o.transaction.publicKey;try{return yield this.connection.provider.sendTransaction(o)}catch(d){if(d.type==="InvalidNonce")return Ne.Logger.warn(`Retrying transaction ${t}:${(0,Ne.baseEncode)(i)} with new nonce.`),delete this.accessKeyByPublicKeyCache[a.toString()],null;if(d.type==="Expired")return Ne.Logger.warn(`Retrying transaction ${t}:${(0,Ne.baseEncode)(i)} due to expired block hash`),null;throw d.context=new ct.ErrorContext((0,Ne.baseEncode)(i)),d}}));if(!c)throw new ct.TypedError("nonce retries exceeded for transaction. This usually means there are too many parallel requests with the same access key.","RetriesExceeded");if((0,Ne.printTxOutcomeLogsAndFailures)({contractId:o.transaction.receiverId,outcome:c}),!r&&typeof c.status=="object"&&typeof c.status.Failure=="object"&&c.status.Failure!==null)throw c.status.Failure.error_message&&c.status.Failure.error_type?new ct.TypedError(`Transaction ${c.transaction_outcome.id} failed. ${c.status.Failure.error_message}`,c.status.Failure.error_type):(0,Ne.parseResultError)(c);return c})}findAccessKey(t,n){return re(this,void 0,void 0,function*(){const r=yield this.connection.signer.getPublicKey(this.accountId,this.connection.networkId);if(!r)throw new ct.TypedError(`no matching key pair found in ${this.connection.signer}`,"PublicKeyNotFound");const i=this.accessKeyByPublicKeyCache[r.toString()];if(i!==void 0)return{publicKey:r,accessKey:i};try{const o=yield this.connection.provider.query({request_type:"view_access_key",account_id:this.accountId,public_key:r.toString(),finality:"optimistic"}),c=Object.assign(Object.assign({},o),{nonce:BigInt(o.nonce||0)});return this.accessKeyByPublicKeyCache[r.toString()]?{publicKey:r,accessKey:this.accessKeyByPublicKeyCache[r.toString()]}:(this.accessKeyByPublicKeyCache[r.toString()]=c,{publicKey:r,accessKey:c})}catch(o){if(o.type=="AccessKeyDoesNotExist")return null;throw o}})}createAndDeployContract(t,n,r,i){return re(this,void 0,void 0,function*(){const o=ur();return yield this.signAndSendTransaction({receiverId:t,actions:[$o(),lr(i),sr(Ot.PublicKey.from(n),o),Bo(r)]}),new qr(this.connection,t)})}sendMoney(t,n){return re(this,void 0,void 0,function*(){return this.signAndSendTransaction({receiverId:t,actions:[lr(n)]})})}createAccount(t,n,r){return re(this,void 0,void 0,function*(){const i=ur();return this.signAndSendTransaction({receiverId:t,actions:[$o(),lr(r),sr(Ot.PublicKey.from(n),i)]})})}deleteAccount(t){return re(this,void 0,void 0,function*(){return Ne.Logger.log("Deleting an account does not automatically transfer NFTs and FTs to the beneficiary address. Ensure to transfer assets before deleting."),this.signAndSendTransaction({receiverId:this.accountId,actions:[Sf(t)]})})}deployContract(t){return re(this,void 0,void 0,function*(){return this.signAndSendTransaction({receiverId:this.accountId,actions:[Bo(t)]})})}encodeJSContractArgs(t,n,r){return R.concat([R.from(t),R.from([0]),R.from(n),R.from([0]),R.from(r)])}functionCall({contractId:t,methodName:n,args:r={},gas:i=Ne.DEFAULT_FUNCTION_CALL_GAS,attachedDeposit:o,walletMeta:c,walletCallbackUrl:a,stringify:d,jsContract:s}){return re(this,void 0,void 0,function*(){this.validateArgs(r);let u;if(s)u=["call_js_contract",this.encodeJSContractArgs(t,n,JSON.stringify(r)),i,o,null,!0];else{const y=d===void 0?jt.stringifyJsonOrBytes:d;u=[n,r,i,o,y,!1]}return this.signAndSendTransaction({receiverId:s?this.connection.jsvmAccountId:t,actions:[Of.apply(void 0,u)],walletMeta:c,walletCallbackUrl:a})})}addKey(t,n,r,i){return re(this,void 0,void 0,function*(){r||(r=[]),Array.isArray(r)||(r=[r]);let o;return n?o=Tf(n,r,i):o=ur(),this.signAndSendTransaction({receiverId:this.accountId,actions:[sr(Ot.PublicKey.from(t),o)]})})}deleteKey(t){return re(this,void 0,void 0,function*(){return this.signAndSendTransaction({receiverId:this.accountId,actions:[If(Ot.PublicKey.from(t))]})})}stake(t,n){return re(this,void 0,void 0,function*(){return this.signAndSendTransaction({receiverId:this.accountId,actions:[Pf(n,Ot.PublicKey.from(t))]})})}signedDelegate({actions:t,blockHeightTtl:n,receiverId:r}){return re(this,void 0,void 0,function*(){const{provider:i,signer:o}=this.connection,{header:c}=yield i.block({finality:"final"}),{accessKey:a,publicKey:d}=yield this.findAccessKey(null,null),s=(0,jt.buildDelegateAction)({actions:t,maxBlockHeight:BigInt(c.height)+BigInt(n),nonce:BigInt(a.nonce)+BigInt(1),publicKey:d,receiverId:r,senderId:this.accountId}),{signedDelegateAction:u}=yield(0,jt.signDelegateAction)({delegateAction:s,signer:{sign:y=>re(this,void 0,void 0,function*(){const{signature:T}=yield o.signMessage(y,s.senderId,this.connection.networkId);return T})}});return u})}validateArgs(t){if(!(t.byteLength!==void 0&&t.byteLength===t.length)&&(Array.isArray(t)||typeof t!="object"))throw new ct.PositionalArgsError}viewFunction(t){return re(this,void 0,void 0,function*(){return yield(0,xo.viewFunction)(this.connection,t)})}viewState(t,n={finality:"optimistic"}){return re(this,void 0,void 0,function*(){return yield(0,xo.viewState)(this.connection,this.accountId,t,n)})}getAccessKeys(){var t;return re(this,void 0,void 0,function*(){const n=yield this.connection.provider.query({request_type:"view_access_key_list",account_id:this.accountId,finality:"optimistic"});return(t=n==null?void 0:n.keys)===null||t===void 0?void 0:t.map(r=>Object.assign(Object.assign({},r),{access_key:Object.assign(Object.assign({},r.access_key),{nonce:BigInt(r.access_key.nonce)})}))})}getAccountDetails(){return re(this,void 0,void 0,function*(){return{authorizedApps:(yield this.getAccessKeys()).filter(r=>r.access_key.permission!=="FullAccess").map(r=>{const i=r.access_key.permission;return{contractId:i.FunctionCall.receiver_id,amount:i.FunctionCall.allowance,publicKey:r.public_key}})}})}getAccountBalance(){return re(this,void 0,void 0,function*(){const t=yield this.connection.provider.experimental_protocolConfig({finality:"final"}),n=yield this.state(),r=BigInt(t.runtime_config.storage_amount_per_byte),i=BigInt(n.storage_usage)*r,o=BigInt(n.locked),c=BigInt(n.amount)+o,a=c-(o>i?o:i);return{total:c.toString(),stateStaked:i.toString(),staked:o.toString(),available:a.toString()}})}getActiveDelegatedStakeBalance(){return re(this,void 0,void 0,function*(){const t=yield this.connection.provider.block({finality:"final"}),n=t.header.hash,r=t.header.epoch_id,{current_validators:i,next_validators:o,current_proposals:c}=yield this.connection.provider.validators(r),a=new Set;[...i,...o,...c].forEach(m=>a.add(m.account_id));const d=[...a],s=d.map(m=>this.viewFunction({contractId:m,methodName:"get_account_total_balance",args:{account_id:this.accountId},blockQuery:{blockId:n}})),u=yield Promise.allSettled(s);if(u.some(m=>m.status==="rejected"&&m.reason.type==="TimeoutError"))throw new Error("Failed to get delegated stake balance");const T=u.reduce((m,k,M)=>{const N=d[M];if(k.status==="fulfilled"){const K=BigInt(k.value);if(K!==BigInt(0))return Object.assign(Object.assign({},m),{stakedValidators:[...m.stakedValidators,{validatorId:N,amount:K.toString()}],total:m.total+K})}return k.status==="rejected"?Object.assign(Object.assign({},m),{failedValidators:[...m.failedValidators,{validatorId:N,error:k.reason}]}):m},{stakedValidators:[],failedValidators:[],total:BigInt(0)});return Object.assign(Object.assign({},T),{total:T.total.toString()})})}}Et.Account=qr;var Ln={},qt={},ye={};Object.defineProperty(ye,"__esModule",{value:!0});ye.MULTISIG_CONFIRM_METHODS=ye.MULTISIG_CHANGE_METHODS=ye.MULTISIG_DEPOSIT=ye.MULTISIG_GAS=ye.MULTISIG_ALLOWANCE=ye.MULTISIG_STORAGE_KEY=void 0;const Nf=oe;ye.MULTISIG_STORAGE_KEY="__multisigRequest";ye.MULTISIG_ALLOWANCE=BigInt((0,Nf.parseNearAmount)("1"));ye.MULTISIG_GAS=BigInt("100000000000000");ye.MULTISIG_DEPOSIT=BigInt("0");ye.MULTISIG_CHANGE_METHODS=["add_request","add_request_and_confirm","delete_request","confirm"];ye.MULTISIG_CONFIRM_METHODS=["confirm"];var xn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MultisigStateStatus=e.MultisigDeleteRequestRejectionError=void 0,function(t){t.CANNOT_DESERIALIZE_STATE="Cannot deserialize the contract state",t.MULTISIG_NOT_INITIALIZED="Smart contract panicked: Multisig contract should be initialized before usage",t.NO_SUCH_REQUEST="Smart contract panicked: panicked at 'No such request: either wrong number or already confirmed'",t.REQUEST_COOLDOWN_ERROR="Request cannot be deleted immediately after creation.",t.METHOD_NOT_FOUND="Contract method is not found"}(e.MultisigDeleteRequestRejectionError||(e.MultisigDeleteRequestRejectionError={})),function(t){t[t.INVALID_STATE=0]="INVALID_STATE",t[t.STATE_NOT_INITIALIZED=1]="STATE_NOT_INITIALIZED",t[t.VALID_STATE=2]="VALID_STATE",t[t.UNKNOWN_STATE=3]="UNKNOWN_STATE"}(e.MultisigStateStatus||(e.MultisigStateStatus={}))})(xn);var at=_&&_.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function a(u){try{s(r.next(u))}catch(y){c(y)}}function d(u){try{s(r.throw(u))}catch(y){c(y)}}function s(u){u.done?o(u.value):i(u.value).then(a,d)}s((r=r.apply(e,t||[])).next())})};Object.defineProperty(qt,"__esModule",{value:!0});qt.AccountMultisig=void 0;const jf=He,Kf=oe,Df=Et,_e=ye,Le=xn,{deployContract:Rf,functionCall:Yt}=jf.actionCreators;var lt;(function(e){e[e.INVALID_CODE=0]="INVALID_CODE",e[e.VALID_CODE=1]="VALID_CODE",e[e.UNKNOWN_CODE=2]="UNKNOWN_CODE"})(lt||(lt={}));const Uo={[_e.MULTISIG_STORAGE_KEY]:null};class Lf extends Df.Account{constructor(t,n,r){super(t,n),this.storage=r.storage,this.onAddRequestResult=r.onAddRequestResult}signAndSendTransactionWithAccount(t,n){const r=Object.create(null,{signAndSendTransaction:{get:()=>super.signAndSendTransaction}});return at(this,void 0,void 0,function*(){return r.signAndSendTransaction.call(this,{receiverId:t,actions:n})})}signAndSendTransaction({receiverId:t,actions:n}){const r=Object.create(null,{signAndSendTransaction:{get:()=>super.signAndSendTransaction}});return at(this,void 0,void 0,function*(){const{accountId:i}=this,o=R.from(JSON.stringify({request:{receiver_id:t,actions:$f(n,i,t)}}));let c;try{c=yield r.signAndSendTransaction.call(this,{receiverId:i,actions:[Yt("add_request_and_confirm",o,_e.MULTISIG_GAS,_e.MULTISIG_DEPOSIT)]})}catch(d){if(d.toString().includes("Account has too many active requests. Confirm or delete some"))return yield this.deleteUnconfirmedRequests(),yield this.signAndSendTransaction({receiverId:t,actions:n});throw d}if(!c.status)throw new Error("Request failed");const a=Object.assign({},c.status);if(!a.SuccessValue||typeof a.SuccessValue!="string")throw new Error("Request failed");return this.setRequest({accountId:i,actions:n,requestId:parseInt(R.from(a.SuccessValue,"base64").toString("ascii"),10)}),this.onAddRequestResult&&(yield this.onAddRequestResult(c)),this.deleteUnconfirmedRequests(),c})}checkMultisigCodeAndStateStatus(t){const n=Object.create(null,{signAndSendTransaction:{get:()=>super.signAndSendTransaction}});return at(this,void 0,void 0,function*(){const i=t?lt.UNKNOWN_CODE:lt.VALID_CODE;try{return t?yield n.signAndSendTransaction.call(this,{receiverId:this.accountId,actions:[Rf(t),Yt("delete_request",{request_id:4294967295},_e.MULTISIG_GAS,_e.MULTISIG_DEPOSIT)]}):yield this.deleteRequest(4294967295),{codeStatus:lt.VALID_CODE,stateStatus:Le.MultisigStateStatus.VALID_STATE}}catch(o){if(new RegExp(Le.MultisigDeleteRequestRejectionError.CANNOT_DESERIALIZE_STATE).test(o&&o.kind&&o.kind.ExecutionError))return{codeStatus:i,stateStatus:Le.MultisigStateStatus.INVALID_STATE};if(new RegExp(Le.MultisigDeleteRequestRejectionError.MULTISIG_NOT_INITIALIZED).test(o&&o.kind&&o.kind.ExecutionError))return{codeStatus:i,stateStatus:Le.MultisigStateStatus.STATE_NOT_INITIALIZED};if(new RegExp(Le.MultisigDeleteRequestRejectionError.NO_SUCH_REQUEST).test(o&&o.kind&&o.kind.ExecutionError))return{codeStatus:i,stateStatus:Le.MultisigStateStatus.VALID_STATE};if(new RegExp(Le.MultisigDeleteRequestRejectionError.METHOD_NOT_FOUND).test(o&&o.message))return{codeStatus:lt.INVALID_CODE,stateStatus:Le.MultisigStateStatus.UNKNOWN_STATE};throw o}})}deleteRequest(t){return super.signAndSendTransaction({receiverId:this.accountId,actions:[Yt("delete_request",{request_id:t},_e.MULTISIG_GAS,_e.MULTISIG_DEPOSIT)]})}deleteAllRequests(){return at(this,void 0,void 0,function*(){const t=yield this.getRequestIds();t.length&&(yield Promise.all(t.map(n=>this.deleteRequest(n))))})}deleteUnconfirmedRequests(){const t=Object.create(null,{signAndSendTransaction:{get:()=>super.signAndSendTransaction}});return at(this,void 0,void 0,function*(){const n=yield this.getRequestIds(),{requestId:r}=this.getRequest();for(const i of n)if(i!=r)try{yield t.signAndSendTransaction.call(this,{receiverId:this.accountId,actions:[Yt("delete_request",{request_id:i},_e.MULTISIG_GAS,_e.MULTISIG_DEPOSIT)]})}catch{Kf.Logger.warn("Attempt to delete an earlier request before 15 minutes failed. Will try again.")}})}getRequestIds(){return at(this,void 0,void 0,function*(){return this.viewFunction({contractId:this.accountId,methodName:"list_request_ids"})})}getRequest(){return this.storage?JSON.parse(this.storage.getItem(_e.MULTISIG_STORAGE_KEY)||"{}"):Uo[_e.MULTISIG_STORAGE_KEY]}setRequest(t){if(this.storage)return this.storage.setItem(_e.MULTISIG_STORAGE_KEY,JSON.stringify(t));Uo[_e.MULTISIG_STORAGE_KEY]=t}}qt.AccountMultisig=Lf;const xf=e=>e.toString().replace("ed25519:",""),$f=(e,t,n)=>e.map(r=>{const i=r.enum,{gas:o,publicKey:c,methodName:a,args:d,deposit:s,accessKey:u,code:y}=r[i],T={type:i[0].toUpperCase()+i.substr(1),gas:o&&o.toString()||void 0,public_key:c&&xf(c)||void 0,method_name:a,args:d&&R.from(d).toString("base64")||void 0,code:y&&R.from(y).toString("base64")||void 0,amount:s&&s.toString()||void 0,deposit:s&&s.toString()||"0",permission:void 0};if(u&&(n===t&&u.permission.enum!=="fullAccess"&&(T.permission={receiver_id:t,allowance:_e.MULTISIG_ALLOWANCE.toString(),method_names:_e.MULTISIG_CHANGE_METHODS}),u.permission.enum==="functionCall")){const{receiverId:m,methodNames:k,allowance:M}=u.permission.functionCall;T.permission={receiver_id:m,allowance:M&&M.toString()||void 0,method_names:k}}return T});var ge=_&&_.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function a(u){try{s(r.next(u))}catch(y){c(y)}}function d(u){try{s(r.throw(u))}catch(y){c(y)}}function s(u){u.done?o(u.value):i(u.value).then(a,d)}s((r=r.apply(e,t||[])).next())})};Object.defineProperty(Ln,"__esModule",{value:!0});Ln.Account2FA=void 0;const tn=ke,Tt=le,Bf=Be,Uf=He,dr=oe,Ff=qt,Pt=ye,kt=xn,{addKey:fr,deleteKey:yr,deployContract:Xt,fullAccessKey:Gf,functionCall:Fo,functionCallAccessKey:Go}=Uf.actionCreators;class qf extends Ff.AccountMultisig{constructor(t,n,r){super(t,n,r),this.helperUrl="https://helper.testnet.near.org",this.helperUrl=r.helperUrl||this.helperUrl,this.storage=r.storage,this.sendCode=r.sendCode||this.sendCodeDefault,this.getCode=r.getCode||this.getCodeDefault,this.verifyCode=r.verifyCode||this.verifyCodeDefault,this.onConfirmResult=r.onConfirmResult}signAndSendTransaction({receiverId:t,actions:n}){const r=Object.create(null,{signAndSendTransaction:{get:()=>super.signAndSendTransaction}});return ge(this,void 0,void 0,function*(){yield r.signAndSendTransaction.call(this,{receiverId:t,actions:n}),yield this.sendCode();const i=yield this.promptAndVerify();return this.onConfirmResult&&(yield this.onConfirmResult(i)),i})}deployMultisig(t){const n=Object.create(null,{signAndSendTransactionWithAccount:{get:()=>super.signAndSendTransactionWithAccount}});return ge(this,void 0,void 0,function*(){const{accountId:r}=this,i=(yield this.getRecoveryMethods()).data.filter(({kind:y,publicKey:T})=>(y==="phrase"||y==="ledger")&&T!==null).map(y=>y.publicKey),o=(yield this.getAccessKeys()).filter(({public_key:y,access_key:{permission:T}})=>T==="FullAccess"&&!i.includes(y)).map(y=>y.public_key).map(qo),c=qo((yield this.postSignedJson("/2fa/getAccessKey",{accountId:r})).publicKey),a=R.from(JSON.stringify({num_confirmations:2})),d=[...o.map(y=>yr(y)),...o.map(y=>fr(y,Go(r,Pt.MULTISIG_CHANGE_METHODS,null))),fr(c,Go(r,Pt.MULTISIG_CONFIRM_METHODS,null)),Xt(t)],s=d.concat(Fo("new",a,Pt.MULTISIG_GAS,Pt.MULTISIG_DEPOSIT));dr.Logger.log("deploying multisig contract for",r);const{stateStatus:u}=yield this.checkMultisigCodeAndStateStatus(t);switch(u){case kt.MultisigStateStatus.STATE_NOT_INITIALIZED:return yield n.signAndSendTransactionWithAccount.call(this,r,s);case kt.MultisigStateStatus.VALID_STATE:return yield n.signAndSendTransactionWithAccount.call(this,r,d);case kt.MultisigStateStatus.INVALID_STATE:throw new Tt.TypedError(`Can not deploy a contract to account ${this.accountId} on network ${this.connection.networkId}, the account has existing state.`,"ContractHasExistingState");default:throw new Tt.TypedError(`Can not deploy a contract to account ${this.accountId} on network ${this.connection.networkId}, the account state could not be verified.`,"ContractStateUnknown")}})}disableWithFAK({contractBytes:t,cleanupContractBytes:n}){return ge(this,void 0,void 0,function*(){let r=[];n&&(yield this.deleteAllRequests().catch(a=>a),r=yield this.get2faDisableCleanupActions(n));const i=yield this.get2faDisableKeyConversionActions(),o=[...r,...i,Xt(t)],c=yield this.findAccessKey(this.accountId,o);if(c&&c.accessKey&&c.accessKey.permission!=="FullAccess")throw new Tt.TypedError("No full access key found in keystore. Unable to bypass multisig","NoFAKFound");return this.signAndSendTransactionWithAccount(this.accountId,o)})}get2faDisableCleanupActions(t){return ge(this,void 0,void 0,function*(){const n=yield this.viewState("").catch(i=>{const o=i.cause&&i.cause.name;if(o=="NO_CONTRACT_CODE")return[];throw o=="TOO_LARGE_CONTRACT_STATE"?new Tt.TypedError(`Can not deploy a contract to account ${this.accountId} on network ${this.connection.networkId}, the account has existing state.`,"ContractHasExistingState"):i}),r=n.map(({key:i})=>i.toString("base64"));return n.length?[Xt(t),Fo("clean",{keys:r},Pt.MULTISIG_GAS,BigInt("0"))]:[]})}get2faDisableKeyConversionActions(){return ge(this,void 0,void 0,function*(){const{accountId:t}=this,r=(yield this.getAccessKeys()).filter(({access_key:o})=>o.permission!=="FullAccess").filter(({access_key:o})=>{const c=o.permission.FunctionCall;return c.receiver_id===t&&c.method_names.length===4&&c.method_names.includes("add_request_and_confirm")}),i=tn.PublicKey.from((yield this.postSignedJson("/2fa/getAccessKey",{accountId:t})).publicKey);return[yr(i),...r.map(({public_key:o})=>yr(tn.PublicKey.from(o))),...r.map(({public_key:o})=>fr(tn.PublicKey.from(o),Gf()))]})}disable(t,n){return ge(this,void 0,void 0,function*(){const{stateStatus:r}=yield this.checkMultisigCodeAndStateStatus();if(r!==kt.MultisigStateStatus.VALID_STATE&&r!==kt.MultisigStateStatus.STATE_NOT_INITIALIZED)throw new Tt.TypedError(`Can not deploy a contract to account ${this.accountId} on network ${this.connection.networkId}, the account state could not be verified.`,"ContractStateUnknown");let i;yield this.deleteAllRequests().catch(a=>i=a);const c=[...yield this.get2faDisableCleanupActions(n).catch(a=>{throw a.type==="ContractHasExistingState"&&i||a}),...yield this.get2faDisableKeyConversionActions(),Xt(t)];return dr.Logger.log("disabling 2fa for",this.accountId),yield this.signAndSendTransaction({receiverId:this.accountId,actions:c})})}sendCodeDefault(){return ge(this,void 0,void 0,function*(){const{accountId:t}=this,{requestId:n}=this.getRequest(),r=yield this.get2faMethod();return yield this.postSignedJson("/2fa/send",{accountId:t,method:r,requestId:n}),n})}getCodeDefault(){return ge(this,void 0,void 0,function*(){throw new Error('There is no getCode callback provided. Please provide your own in AccountMultisig constructor options. It has a parameter method where method.kind is "email" or "phone".')})}promptAndVerify(){return ge(this,void 0,void 0,function*(){const t=yield this.get2faMethod(),n=yield this.getCode(t);try{return yield this.verifyCode(n)}catch(r){if(dr.Logger.warn("Error validating security code:",r),r.toString().includes("invalid 2fa code provided")||r.toString().includes("2fa code not valid"))return yield this.promptAndVerify();throw r}})}verifyCodeDefault(t){return ge(this,void 0,void 0,function*(){const{accountId:n}=this,r=this.getRequest();if(!r)throw new Error("no request pending");const{requestId:i}=r;return yield this.postSignedJson("/2fa/verify",{accountId:n,securityCode:t,requestId:i})})}getRecoveryMethods(){return ge(this,void 0,void 0,function*(){const{accountId:t}=this;return{accountId:t,data:yield this.postSignedJson("/account/recoveryMethods",{accountId:t})}})}get2faMethod(){return ge(this,void 0,void 0,function*(){let{data:t}=yield this.getRecoveryMethods();if(t&&t.length&&(t=t.find(i=>i.kind.indexOf("2fa-")===0)),!t)return null;const{kind:n,detail:r}=t;return{kind:n,detail:r}})}signatureFor(){return ge(this,void 0,void 0,function*(){const{accountId:t}=this,r=(yield this.connection.provider.block({finality:"final"})).header.height.toString(),i=yield this.connection.signer.signMessage(R.from(r),t,this.connection.networkId),o=R.from(i.signature).toString("base64");return{blockNumber:r,blockNumberSignature:o}})}postSignedJson(t,n){return ge(this,void 0,void 0,function*(){return yield(0,Bf.fetchJson)(this.helperUrl+t,JSON.stringify(Object.assign(Object.assign({},n),yield this.signatureFor())))})}}Ln.Account2FA=qf;const qo=e=>tn.PublicKey.from(e);var qe={},dc=_&&_.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function a(u){try{s(r.next(u))}catch(y){c(y)}}function d(u){try{s(r.throw(u))}catch(y){c(y)}}function s(u){u.done?o(u.value):i(u.value).then(a,d)}s((r=r.apply(e,t||[])).next())})};Object.defineProperty(qe,"__esModule",{value:!0});qe.UrlAccountCreator=qe.LocalAccountCreator=qe.AccountCreator=void 0;const Hf=Be;class Hr{}qe.AccountCreator=Hr;class zf extends Hr{constructor(t,n){super(),this.masterAccount=t,this.initialBalance=n}createAccount(t,n){return dc(this,void 0,void 0,function*(){yield this.masterAccount.createAccount(t,n,this.initialBalance)})}}qe.LocalAccountCreator=zf;class Wf extends Hr{constructor(t,n){super(),this.connection=t,this.helperUrl=n}createAccount(t,n){return dc(this,void 0,void 0,function*(){yield(0,Hf.fetchJson)(`${this.helperUrl}/account`,JSON.stringify({newAccountId:t,newAccountPublicKey:n.toString()}))})}}qe.UrlAccountCreator=Wf;var $n={},zr={},Bn={},Ht={};Object.defineProperty(Ht,"__esModule",{value:!0});Ht.Signer=void 0;class Vf{}Ht.Signer=Vf;var Zt=_&&_.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function a(u){try{s(r.next(u))}catch(y){c(y)}}function d(u){try{s(r.throw(u))}catch(y){c(y)}}function s(u){u.done?o(u.value):i(u.value).then(a,d)}s((r=r.apply(e,t||[])).next())})};Object.defineProperty(Bn,"__esModule",{value:!0});Bn.InMemorySigner=void 0;const hr=ke,Jf=Ze,Yf=ci,Xf=Ht;class Wr extends Xf.Signer{constructor(t){super(),this.keyStore=t}static fromKeyPair(t,n,r){return Zt(this,void 0,void 0,function*(){const i=new Jf.InMemoryKeyStore;return yield i.setKey(t,n,r),new Wr(i)})}createKey(t,n,r){return Zt(this,void 0,void 0,function*(){const i=r===hr.KeyType.SECP256K1?hr.KeyPair.fromRandom("secp256k1"):hr.KeyPair.fromRandom("ed25519");return yield this.keyStore.setKey(n,t,i),i.getPublicKey()})}getPublicKey(t,n){return Zt(this,void 0,void 0,function*(){const r=yield this.keyStore.getKey(n,t);return r===null?null:r.getPublicKey()})}signMessage(t,n,r){return Zt(this,void 0,void 0,function*(){const i=new Uint8Array((0,Yf.sha256)(t));if(!n)throw new Error("InMemorySigner requires provided account id");const o=yield this.keyStore.getKey(r,n);if(o===null)throw new Error(`Key for ${n} not found in ${r}`);return o.sign(i)})}toString(){return`InMemorySigner(${this.keyStore})`}}Bn.InMemorySigner=Wr;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Signer=e.InMemorySigner=void 0;var t=Bn;Object.defineProperty(e,"InMemorySigner",{enumerable:!0,get:function(){return t.InMemorySigner}});var n=Ht;Object.defineProperty(e,"Signer",{enumerable:!0,get:function(){return n.Signer}})})(zr);Object.defineProperty($n,"__esModule",{value:!0});$n.Connection=void 0;const Zf=zr,_r=Be;function Qf(e){switch(e.type){case void 0:return e;case"JsonRpcProvider":return new _r.JsonRpcProvider(Object.assign({},e.args));case"FailoverRpcProvider":{const t=((e==null?void 0:e.args)||[]).map(n=>new _r.JsonRpcProvider(n));return new _r.FailoverRpcProvider(t)}default:throw new Error(`Unknown provider type ${e.type}`)}}function ey(e){switch(e.type){case void 0:return e;case"InMemorySigner":return new Zf.InMemorySigner(e.keyStore);default:throw new Error(`Unknown signer type ${e.type}`)}}class Vr{constructor(t,n,r,i){this.networkId=t,this.provider=n,this.signer=r,this.jsvmAccountId=i}getConnection(){return this}static fromConfig(t){const n=Qf(t.provider),r=ey(t.signer);return new Vr(t.networkId,n,r,t.jsvmAccountId)}}$n.Connection=Vr;var Un={},Fn={},Gn={};Object.defineProperty(Gn,"__esModule",{value:!0});Gn.Storage=void 0;const ty=Qc;class qn{constructor(t={max:qn.MAX_ELEMENTS}){this.cache=new ty.LRUMap(t.max),this.blockHeights=new Map}load(t){if(!("blockId"in t))return;let r=t.blockId;return r.toString().length==44&&(r=this.blockHeights.get(r.toString())),this.cache.get(r)}save(t,{blockHeight:n,blockTimestamp:r,contractCode:i,contractState:o}){this.blockHeights.set(t,n),this.cache.set(n,{blockHeight:n,blockTimestamp:r,contractCode:i,contractState:o})}}Gn.Storage=qn;qn.MAX_ELEMENTS=100;var Hn={},ny=_&&_.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function a(u){try{s(r.next(u))}catch(y){c(y)}}function d(u){try{s(r.throw(u))}catch(y){c(y)}}function s(u){u.done?o(u.value):i(u.value).then(a,d)}s((r=r.apply(e,t||[])).next())})},ry=_&&_.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};Object.defineProperty(Hn,"__esModule",{value:!0});Hn.Runtime=void 0;const oy=ea(),Te=e=>()=>{throw new Error("method not implemented: "+e)},z=e=>()=>{throw new Error("method not available for view calls: "+e)};class iy{constructor(t){var{contractCode:n}=t,r=ry(t,["contractCode"]);this.context=r,this.wasm=this.prepareWASM(R.from(n,"base64")),this.memory=new WebAssembly.Memory({initial:1024,maximum:2048}),this.registers={},this.logs=[],this.result=R.from([])}readUTF16CStr(t){const n=[],r=new Uint16Array(this.memory.buffer);let i=Number(t)/2;for(;r[i]!=0;)n.push(r[i]),i++;return R.from(Uint16Array.from(n).buffer).toString("ucs2")}readUTF8CStr(t,n){const r=[],i=new Uint8Array(this.memory.buffer);let o=Number(n);for(let c=0;c<t&&i[o]!=0;c++)r.push(i[o]),o++;return R.from(r).toString("utf8")}storageRead(t,n){const r=R.from(new Uint8Array(this.memory.buffer,Number(n),Number(t))),i=this.context.contractState.filter(o=>R.compare(o.key,r)===0).map(o=>o.value);return i.length===0?null:i.length>1?i:i[0]}prepareWASM(t){const n=[];if(t.subarray(0,4).toString("utf8")!=="\0asm")throw new Error("Invalid magic number");const i=t.readUInt32LE(4);if(i!=1)throw new Error("Invalid version: "+i);let o=8;n.push(t.subarray(0,o));function c(){let y=0,T=0,m;do m=t[o++],y|=(m&127)<<T,T+=7;while(m&128);return y}function a(){const T=t[o++]&1,m=c(),k=T?c():null;return{initial:m,max:k}}function d(){const y=c(),T=t.subarray(o,o+y);return o+=y,T.toString("utf8")}function s(y){const T=[];do{let m=y&127;y>>=7,y!==0&&(m|=128),T.push(m)}while(y!==0);return R.from(T)}function u(y){const T=R.from(y,"utf8");return R.concat([s(T.length),T])}do{const y=o,T=t.readUInt8(o);o++;const m=c(),k=o+m;if(T==5)n.push(R.from([5,1,0]));else if(T==2){const M=[],N=c();for(let W=0;W<N;W++){const Q=o;d(),d();const J=t.readUInt8(o);o++;let x=!1;switch(J){case 0:c();break;case 1:o++,a();break;case 2:a(),x=!0;break;case 3:o++,o++;break;default:throw new Error("Invalid import kind: "+J)}x||M.push(t.subarray(Q,o))}const K=R.concat([u("env"),u("memory"),R.from([2]),R.from([0]),s(1)]);M.push(K);const j=R.concat([s(M.length),...M]);n.push(R.concat([R.from([2]),s(j.length),j]))}else if(T==7){const M=[],N=c();for(let j=0;j<N;j++){const W=o;d();const Q=t.readUInt8(o);o++,c(),Q!==2&&M.push(t.subarray(W,o))}const K=R.concat([s(M.length),...M]);n.push(R.concat([R.from([7]),s(K.length),K]))}else n.push(t.subarray(y,k));o=k}while(o<t.length);return R.concat(n)}getRegisterLength(t){return BigInt(this.registers[t.toString()]?this.registers[t.toString()].length:Number.MAX_SAFE_INTEGER)}readFromRegister(t,n){new Uint8Array(this.memory.buffer).set(this.registers[t.toString()]||R.from([]),Number(n))}getCurrentAccountId(t){this.registers[t.toString()]=R.from(this.context.contractId)}inputMethodArgs(t){this.registers[t.toString()]=R.from(this.context.methodArgs)}getBlockHeight(){return BigInt(this.context.blockHeight)}getBlockTimestamp(){return BigInt(this.context.blockTimestamp)}sha256(t,n,r){const i=new Uint8Array(this.memory.buffer,Number(n),Number(t)),o=(0,oy.createHash)("sha256");o.update(i),this.registers[r.toString()]=o.digest()}returnValue(t,n){this.result=R.from(new Uint8Array(this.memory.buffer,Number(n),Number(t)))}panic(t){throw new Error("panic: "+t)}abort(t,n,r,i){const o=this.readUTF16CStr(t),c=this.readUTF16CStr(n),a=`${o} ${c}:${r}:${i}`;throw!o||!c?new Error("abort: String encoding is bad UTF-16 sequence."):new Error("abort: "+a)}appendToLog(t,n){this.logs.push(this.readUTF8CStr(t,n))}readStorage(t,n,r){const i=this.storageRead(t,n);return i==null?BigInt(0):(this.registers[r]=i,BigInt(1))}hasStorageKey(t,n){return this.storageRead(t,n)==null?BigInt(0):BigInt(1)}getHostImports(){return{register_len:this.getRegisterLength.bind(this),read_register:this.readFromRegister.bind(this),current_account_id:this.getCurrentAccountId.bind(this),input:this.inputMethodArgs.bind(this),block_index:this.getBlockHeight.bind(this),block_timestamp:this.getBlockTimestamp.bind(this),sha256:this.sha256.bind(this),value_return:this.returnValue.bind(this),abort:this.abort.bind(this),log_utf8:this.appendToLog.bind(this),log_utf16:this.appendToLog.bind(this),storage_read:this.readStorage.bind(this),storage_has_key:this.hasStorageKey.bind(this),panic:()=>this.panic("explicit guest panic"),panic_utf8:(t,n)=>this.panic(this.readUTF8CStr(t,n)),epoch_height:Te("epoch_height"),storage_usage:Te("storage_usage"),account_balance:Te("account_balance"),account_locked_balance:Te("account_locked_balance"),random_seed:Te("random_seed"),ripemd160:Te("ripemd160"),keccak256:Te("keccak256"),keccak512:Te("keccak512"),ecrecover:Te("ecrecover"),validator_stake:Te("validator_stake"),validator_total_stake:Te("validator_total_stake"),write_register:z("write_register"),signer_account_id:z("signer_account_id"),signer_account_pk:z("signer_account_pk"),predecessor_account_id:z("predecessor_account_id"),attached_deposit:z("attached_deposit"),prepaid_gas:z("prepaid_gas"),used_gas:z("used_gas"),promise_create:z("promise_create"),promise_then:z("promise_then"),promise_and:z("promise_and"),promise_batch_create:z("promise_batch_create"),promise_batch_then:z("promise_batch_then"),promise_batch_action_create_account:z("promise_batch_action_create_account"),promise_batch_action_deploy_contract:z("promise_batch_action_deploy_contract"),promise_batch_action_function_call:z("promise_batch_action_function_call"),promise_batch_action_function_call_weight:z("promise_batch_action_function_call_weight"),promise_batch_action_transfer:z("promise_batch_action_transfer"),promise_batch_action_stake:z("promise_batch_action_stake"),promise_batch_action_add_key_with_full_access:z("promise_batch_action_add_key_with_full_access"),promise_batch_action_add_key_with_function_call:z("promise_batch_action_add_key_with_function_call"),promise_batch_action_delete_key:z("promise_batch_action_delete_key"),promise_batch_action_delete_account:z("promise_batch_action_delete_account"),promise_results_count:z("promise_results_count"),promise_result:z("promise_result"),promise_return:z("promise_return"),storage_write:z("storage_write"),storage_remove:z("storage_remove")}}execute(t){return ny(this,void 0,void 0,function*(){const n=yield WebAssembly.compile(this.wasm),i=(yield WebAssembly.instantiate(n,{env:Object.assign(Object.assign({},this.getHostImports()),{memory:this.memory})})).exports[t];if(i==null)throw new Error(`Contract method '${t}' does not exists in contract ${this.context.contractId} for block id ${this.context.blockHeight}`);return i(),{result:this.result,logs:this.logs}})}}Hn.Runtime=iy;var Ct=_&&_.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function a(u){try{s(r.next(u))}catch(y){c(y)}}function d(u){try{s(r.throw(u))}catch(y){c(y)}}function s(u){u.done?o(u.value):i(u.value).then(a,d)}s((r=r.apply(e,t||[])).next())})},Ho=_&&_.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};Object.defineProperty(Fn,"__esModule",{value:!0});Fn.LocalViewExecution=void 0;const cy=oe,ay=Gn,sy=Hn,uy=Ie;class ly{constructor(t){this.connection=t.getConnection(),this.storage=new ay.Storage}fetchContractCode(t,n){return Ct(this,void 0,void 0,function*(){return(yield this.connection.provider.query(Object.assign({request_type:"view_code",account_id:t},n))).code_base64})}fetchContractState(t,n){return Ct(this,void 0,void 0,function*(){return(0,uy.viewState)(this.connection,t,"",n)})}fetch(t,n){return Ct(this,void 0,void 0,function*(){const r=yield this.connection.provider.block(n),i=r.header.hash,o=r.header.height,c=r.header.timestamp,a=yield this.fetchContractCode(t,n),d=yield this.fetchContractState(t,n);return{blockHash:i,blockHeight:o,blockTimestamp:c,contractCode:a,contractState:d}})}loadOrFetch(t,n){return Ct(this,void 0,void 0,function*(){const r=this.storage.load(n);if(r)return r;const i=yield this.fetch(t,n),{blockHash:o}=i,c=Ho(i,["blockHash"]);return this.storage.save(o,c),c})}viewFunction(t){var{contractId:n,methodName:r,args:i={},blockQuery:o={finality:"optimistic"}}=t;return Ho(t,["contractId","methodName","args","blockQuery"]),Ct(this,void 0,void 0,function*(){const c=JSON.stringify(i),{contractCode:a,contractState:d,blockHeight:s,blockTimestamp:u}=yield this.loadOrFetch(n,o),y=new sy.Runtime({contractId:n,contractCode:a,contractState:d,blockHeight:s,blockTimestamp:u,methodArgs:c}),{result:T,logs:m}=yield y.execute(r);return m&&(0,cy.printTxOutcomeLogs)({contractId:n,logs:m}),JSON.parse(R.from(T).toString())})}}Fn.LocalViewExecution=ly;var Pe={};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.ConflictingOptions=Pe.ArgumentSchemaError=Pe.UnknownArgumentError=Pe.UnsupportedSerializationError=void 0;class dy extends Error{constructor(t,n){super(`Contract method '${t}' is using an unsupported serialization type ${n}`)}}Pe.UnsupportedSerializationError=dy;class fy extends Error{constructor(t,n){super(`Unrecognized argument '${t}', expected '${JSON.stringify(n)}'`)}}Pe.UnknownArgumentError=fy;class yy extends Error{constructor(t,n){super(`Argument '${t}' does not conform to the specified ABI schema: '${JSON.stringify(n)}'`)}}Pe.ArgumentSchemaError=yy;class hy extends Error{constructor(){super("Conflicting contract method options have been passed. You can either specify ABI or a list of view/call methods.")}}Pe.ConflictingOptions=hy;var pr=_&&_.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function a(u){try{s(r.next(u))}catch(y){c(y)}}function d(u){try{s(r.throw(u))}catch(y){c(y)}}function s(u){u.done?o(u.value):i(u.value).then(a,d)}s((r=r.apply(e,t||[])).next())})},fc=_&&_.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Un,"__esModule",{value:!0});Un.Contract=void 0;const gr=oe,Or=le,_y=Fn,py=fc(ta),zo=fc(ni),un=na,gy=Et,Kt=Pe,vy=Ie;function Wo(e,t){return{[e](...n){return t(...n)}}[e]}function Vo(e,t,n){var r;if(!nn(e))return;if(t.params&&t.params.serialization_type!==un.AbiSerializationType.Json)throw new Kt.UnsupportedSerializationError(t.name,t.params.serialization_type);if(t.result&&t.result.serialization_type!==un.AbiSerializationType.Json)throw new Kt.UnsupportedSerializationError(t.name,t.result.serialization_type);const i=((r=t.params)===null||r===void 0?void 0:r.args)||[];for(const o of i){const c=e[o.name],a=o.type_schema;a.definitions=n.body.root_schema.definitions;const d=(0,py.default)(a);if(!d(c))throw new Kt.ArgumentSchemaError(o.name,d.errors)}for(const o of Object.keys(e))if(!i.find(a=>a.name===o))throw new Kt.UnknownArgumentError(o,i.map(a=>a.name))}const Jo=e=>e&&e.byteLength!==void 0&&e.byteLength===e.length,nn=e=>Object.prototype.toString.call(e)==="[object Object]";class my{constructor(t,n,r){this.connection=t.getConnection(),t instanceof gy.Account&&((0,zo.default)("new Contract(account, contractId, options)")("use `new Contract(connection, contractId, options)` instead"),this.account=t),this.contractId=n,this.lve=new _y.LocalViewExecution(t);const{viewMethods:i=[],changeMethods:o=[],abi:c,useLocalViewExecution:a}=r;let d=i.map(u=>({name:u,abi:null})),s=o.map(u=>({name:u,abi:null}));if(c){if(d.length>0||s.length>0)throw new Kt.ConflictingOptions;d=c.body.functions.filter(u=>u.kind===un.AbiFunctionKind.View).map(u=>({name:u.name,abi:u})),s=c.body.functions.filter(u=>u.kind===un.AbiFunctionKind.Call).map(u=>({name:u.name,abi:u}))}d.forEach(({name:u,abi:y})=>{Object.defineProperty(this,u,{writable:!1,enumerable:!0,value:Wo(u,(T={},m={},...k)=>pr(this,void 0,void 0,function*(){if(k.length||!(nn(T)||Jo(T))||!nn(m))throw new Or.PositionalArgsError;if(y&&Vo(T,y,c),a)try{return yield this.lve.viewFunction(Object.assign({contractId:this.contractId,methodName:u,args:T},m))}catch(M){gr.Logger.warn(`Local view execution failed with: "${M.message}"`),gr.Logger.warn("Fallback to normal RPC call")}return this.account?this.account.viewFunction(Object.assign({contractId:this.contractId,methodName:u,args:T},m)):(0,vy.viewFunction)(this.connection,Object.assign({contractId:this.contractId,methodName:u,args:T},m))}))})}),s.forEach(({name:u,abi:y})=>{Object.defineProperty(this,u,{writable:!1,enumerable:!0,value:Wo(u,(...T)=>pr(this,void 0,void 0,function*(){if(T.length&&(T.length>3||!(nn(T[0])||Jo(T[0]))))throw new Or.PositionalArgsError;return(T.length>1||!(T[0]&&T[0].args))&&((0,zo.default)("contract.methodName(args, gas, amount)")("use `contract.methodName({ signerAccount, args, gas?, amount?, callbackUrl?, meta? })` instead"),T[0]={args:T[0],gas:T[1],amount:T[2]}),y&&Vo(T[0].args,y,c),this._changeMethod(Object.assign({methodName:u},T[0]))}))})})}_changeMethod({signerAccount:t,args:n,methodName:r,gas:i,amount:o,meta:c,callbackUrl:a}){return pr(this,void 0,void 0,function*(){by({gas:i,amount:o});const d=this.account||t;if(!d)throw new Error("signerAccount must be specified");const s=yield d.functionCall({contractId:this.contractId,methodName:r,args:n,gas:i,attachedDeposit:o,walletMeta:c,walletCallbackUrl:a});return(0,gr.getTransactionLastResult)(s)})}}Un.Contract=my;function by(e){const t="number, decimal string or BigInt";for(const n of Object.keys(e)){const r=e[n];if(r&&typeof r!="bigint"&&isNaN(r))throw new Or.ArgumentTypeError(n,t,r)}}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MultisigStateStatus=e.MultisigDeleteRequestRejectionError=e.UnsupportedSerializationError=e.UnknownArgumentError=e.ConflictingOptions=e.ArgumentSchemaError=e.Contract=e.MULTISIG_CONFIRM_METHODS=e.MULTISIG_CHANGE_METHODS=e.MULTISIG_DEPOSIT=e.MULTISIG_GAS=e.MULTISIG_ALLOWANCE=e.MULTISIG_STORAGE_KEY=e.Connection=e.AccountMultisig=e.UrlAccountCreator=e.LocalAccountCreator=e.AccountCreator=e.Account2FA=e.Account=void 0;var t=Et;Object.defineProperty(e,"Account",{enumerable:!0,get:function(){return t.Account}});var n=Ln;Object.defineProperty(e,"Account2FA",{enumerable:!0,get:function(){return n.Account2FA}});var r=qe;Object.defineProperty(e,"AccountCreator",{enumerable:!0,get:function(){return r.AccountCreator}}),Object.defineProperty(e,"LocalAccountCreator",{enumerable:!0,get:function(){return r.LocalAccountCreator}}),Object.defineProperty(e,"UrlAccountCreator",{enumerable:!0,get:function(){return r.UrlAccountCreator}});var i=qt;Object.defineProperty(e,"AccountMultisig",{enumerable:!0,get:function(){return i.AccountMultisig}});var o=$n;Object.defineProperty(e,"Connection",{enumerable:!0,get:function(){return o.Connection}});var c=ye;Object.defineProperty(e,"MULTISIG_STORAGE_KEY",{enumerable:!0,get:function(){return c.MULTISIG_STORAGE_KEY}}),Object.defineProperty(e,"MULTISIG_ALLOWANCE",{enumerable:!0,get:function(){return c.MULTISIG_ALLOWANCE}}),Object.defineProperty(e,"MULTISIG_GAS",{enumerable:!0,get:function(){return c.MULTISIG_GAS}}),Object.defineProperty(e,"MULTISIG_DEPOSIT",{enumerable:!0,get:function(){return c.MULTISIG_DEPOSIT}}),Object.defineProperty(e,"MULTISIG_CHANGE_METHODS",{enumerable:!0,get:function(){return c.MULTISIG_CHANGE_METHODS}}),Object.defineProperty(e,"MULTISIG_CONFIRM_METHODS",{enumerable:!0,get:function(){return c.MULTISIG_CONFIRM_METHODS}});var a=Un;Object.defineProperty(e,"Contract",{enumerable:!0,get:function(){return a.Contract}});var d=Pe;Object.defineProperty(e,"ArgumentSchemaError",{enumerable:!0,get:function(){return d.ArgumentSchemaError}}),Object.defineProperty(e,"ConflictingOptions",{enumerable:!0,get:function(){return d.ConflictingOptions}}),Object.defineProperty(e,"UnknownArgumentError",{enumerable:!0,get:function(){return d.UnknownArgumentError}}),Object.defineProperty(e,"UnsupportedSerializationError",{enumerable:!0,get:function(){return d.UnsupportedSerializationError}});var s=xn;Object.defineProperty(e,"MultisigDeleteRequestRejectionError",{enumerable:!0,get:function(){return s.MultisigDeleteRequestRejectionError}}),Object.defineProperty(e,"MultisigStateStatus",{enumerable:!0,get:function(){return s.MultisigStateStatus}})})(Ue);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.logWarning=e.TypedError=e.PositionalArgsError=e.ErrorContext=e.ArgumentTypeError=e.UnsupportedSerializationError=e.UnknownArgumentError=e.ConflictingOptions=e.ArgumentSchemaError=void 0;var t=Ue;Object.defineProperty(e,"ArgumentSchemaError",{enumerable:!0,get:function(){return t.ArgumentSchemaError}}),Object.defineProperty(e,"ConflictingOptions",{enumerable:!0,get:function(){return t.ConflictingOptions}}),Object.defineProperty(e,"UnknownArgumentError",{enumerable:!0,get:function(){return t.UnknownArgumentError}}),Object.defineProperty(e,"UnsupportedSerializationError",{enumerable:!0,get:function(){return t.UnsupportedSerializationError}});var n=le;Object.defineProperty(e,"ArgumentTypeError",{enumerable:!0,get:function(){return n.ArgumentTypeError}}),Object.defineProperty(e,"ErrorContext",{enumerable:!0,get:function(){return n.ErrorContext}}),Object.defineProperty(e,"PositionalArgsError",{enumerable:!0,get:function(){return n.PositionalArgsError}}),Object.defineProperty(e,"TypedError",{enumerable:!0,get:function(){return n.TypedError}});var r=oe;Object.defineProperty(e,"logWarning",{enumerable:!0,get:function(){return r.logWarning}})})(ac);var yc={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=void 0;var t=oe;Object.defineProperty(e,"Logger",{enumerable:!0,get:function(){return t.Logger}})})(yc);(function(e){var t=_&&_.__createBinding||(Object.create?function(m,k,M,N){N===void 0&&(N=M);var K=Object.getOwnPropertyDescriptor(k,M);(!K||("get"in K?!k.__esModule:K.writable||K.configurable))&&(K={enumerable:!0,get:function(){return k[M]}}),Object.defineProperty(m,N,K)}:function(m,k,M,N){N===void 0&&(N=M),m[N]=k[M]}),n=_&&_.__setModuleDefault||(Object.create?function(m,k){Object.defineProperty(m,"default",{enumerable:!0,value:k})}:function(m,k){m.default=k}),r=_&&_.__importStar||function(m){if(m&&m.__esModule)return m;var k={};if(m!=null)for(var M in m)M!=="default"&&Object.prototype.hasOwnProperty.call(m,M)&&t(k,m,M);return n(k,m),k};Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=e.logWarning=e.rpc_errors=e.KeyPairEd25519=e.KeyPair=e.PublicKey=e.format=e.enums=e.web=e.serialize=e.key_pair=void 0;const i=r(sn);e.key_pair=i;const o=r(nc);e.serialize=o;const c=r(rc);e.web=c;const a=r(oc);e.enums=a;const d=r(ic);e.format=d;const s=r(cc);e.rpc_errors=s;const u=sn;Object.defineProperty(e,"PublicKey",{enumerable:!0,get:function(){return u.PublicKey}}),Object.defineProperty(e,"KeyPair",{enumerable:!0,get:function(){return u.KeyPair}}),Object.defineProperty(e,"KeyPairEd25519",{enumerable:!0,get:function(){return u.KeyPairEd25519}});const y=ac;Object.defineProperty(e,"logWarning",{enumerable:!0,get:function(){return y.logWarning}});const T=yc;Object.defineProperty(e,"Logger",{enumerable:!0,get:function(){return T.Logger}})})(tc);var hc={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.transfer=e.stake=e.functionCallAccessKey=e.functionCall=e.fullAccessKey=e.deployContract=e.deleteKey=e.deleteAccount=e.createAccount=e.addKey=e.encodeTransaction=e.encodeDelegateAction=e.encodeSignedDelegate=e.Transaction=e.SignedTransaction=e.Signature=e.signTransaction=e.createTransaction=e.SCHEMA=e.Transfer=e.Stake=e.FunctionCallPermission=e.FunctionCall=e.FullAccessPermission=e.DeployContract=e.DeleteKey=e.DeleteAccount=e.CreateAccount=e.AddKey=e.AccessKeyPermission=e.AccessKey=e.Action=e.stringifyJsonOrBytes=void 0;var t=He;Object.defineProperty(e,"stringifyJsonOrBytes",{enumerable:!0,get:function(){return t.stringifyJsonOrBytes}}),Object.defineProperty(e,"Action",{enumerable:!0,get:function(){return t.Action}}),Object.defineProperty(e,"AccessKey",{enumerable:!0,get:function(){return t.AccessKey}}),Object.defineProperty(e,"AccessKeyPermission",{enumerable:!0,get:function(){return t.AccessKeyPermission}}),Object.defineProperty(e,"AddKey",{enumerable:!0,get:function(){return t.AddKey}}),Object.defineProperty(e,"CreateAccount",{enumerable:!0,get:function(){return t.CreateAccount}}),Object.defineProperty(e,"DeleteAccount",{enumerable:!0,get:function(){return t.DeleteAccount}}),Object.defineProperty(e,"DeleteKey",{enumerable:!0,get:function(){return t.DeleteKey}}),Object.defineProperty(e,"DeployContract",{enumerable:!0,get:function(){return t.DeployContract}}),Object.defineProperty(e,"FullAccessPermission",{enumerable:!0,get:function(){return t.FullAccessPermission}}),Object.defineProperty(e,"FunctionCall",{enumerable:!0,get:function(){return t.FunctionCall}}),Object.defineProperty(e,"FunctionCallPermission",{enumerable:!0,get:function(){return t.FunctionCallPermission}}),Object.defineProperty(e,"Stake",{enumerable:!0,get:function(){return t.Stake}}),Object.defineProperty(e,"Transfer",{enumerable:!0,get:function(){return t.Transfer}}),Object.defineProperty(e,"SCHEMA",{enumerable:!0,get:function(){return t.SCHEMA}}),Object.defineProperty(e,"createTransaction",{enumerable:!0,get:function(){return t.createTransaction}}),Object.defineProperty(e,"signTransaction",{enumerable:!0,get:function(){return t.signTransaction}}),Object.defineProperty(e,"Signature",{enumerable:!0,get:function(){return t.Signature}}),Object.defineProperty(e,"SignedTransaction",{enumerable:!0,get:function(){return t.SignedTransaction}}),Object.defineProperty(e,"Transaction",{enumerable:!0,get:function(){return t.Transaction}}),Object.defineProperty(e,"encodeSignedDelegate",{enumerable:!0,get:function(){return t.encodeSignedDelegate}}),Object.defineProperty(e,"encodeDelegateAction",{enumerable:!0,get:function(){return t.encodeDelegateAction}}),Object.defineProperty(e,"encodeTransaction",{enumerable:!0,get:function(){return t.encodeTransaction}});const n=He,r=(m,k)=>n.actionCreators.addKey(m,k);e.addKey=r;const i=()=>n.actionCreators.createAccount();e.createAccount=i;const o=m=>n.actionCreators.deleteAccount(m);e.deleteAccount=o;const c=m=>n.actionCreators.deleteKey(m);e.deleteKey=c;const a=m=>n.actionCreators.deployContract(m);e.deployContract=a;const d=()=>n.actionCreators.fullAccessKey();e.fullAccessKey=d;const s=(m,k,M,N,K,j)=>n.actionCreators.functionCall(m,k,M,N,K,j);e.functionCall=s;const u=(m,k,M)=>n.actionCreators.functionCallAccessKey(m,k,M);e.functionCallAccessKey=u;const y=(m,k)=>n.actionCreators.stake(m,k);e.stake=y;const T=m=>n.actionCreators.transfer(m);e.transfer=T})(hc);var _c={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.findSeatPrice=e.diffEpochValidators=void 0;var t=oe;Object.defineProperty(e,"diffEpochValidators",{enumerable:!0,get:function(){return t.diffEpochValidators}}),Object.defineProperty(e,"findSeatPrice",{enumerable:!0,get:function(){return t.findSeatPrice}})})(_c);var pc={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Account=void 0;var t=Ue;Object.defineProperty(e,"Account",{enumerable:!0,get:function(){return t.Account}})})(pc);var gc={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MultisigStateStatus=e.MultisigDeleteRequestRejectionError=e.MULTISIG_CONFIRM_METHODS=e.MULTISIG_CHANGE_METHODS=e.MULTISIG_DEPOSIT=e.MULTISIG_GAS=e.MULTISIG_ALLOWANCE=e.MULTISIG_STORAGE_KEY=e.AccountMultisig=e.Account2FA=void 0;var t=Ue;Object.defineProperty(e,"Account2FA",{enumerable:!0,get:function(){return t.Account2FA}}),Object.defineProperty(e,"AccountMultisig",{enumerable:!0,get:function(){return t.AccountMultisig}}),Object.defineProperty(e,"MULTISIG_STORAGE_KEY",{enumerable:!0,get:function(){return t.MULTISIG_STORAGE_KEY}}),Object.defineProperty(e,"MULTISIG_ALLOWANCE",{enumerable:!0,get:function(){return t.MULTISIG_ALLOWANCE}}),Object.defineProperty(e,"MULTISIG_GAS",{enumerable:!0,get:function(){return t.MULTISIG_GAS}}),Object.defineProperty(e,"MULTISIG_DEPOSIT",{enumerable:!0,get:function(){return t.MULTISIG_DEPOSIT}}),Object.defineProperty(e,"MULTISIG_CHANGE_METHODS",{enumerable:!0,get:function(){return t.MULTISIG_CHANGE_METHODS}}),Object.defineProperty(e,"MULTISIG_CONFIRM_METHODS",{enumerable:!0,get:function(){return t.MULTISIG_CONFIRM_METHODS}}),Object.defineProperty(e,"MultisigDeleteRequestRejectionError",{enumerable:!0,get:function(){return t.MultisigDeleteRequestRejectionError}}),Object.defineProperty(e,"MultisigStateStatus",{enumerable:!0,get:function(){return t.MultisigStateStatus}})})(gc);var vc={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.UrlAccountCreator=e.LocalAccountCreator=e.AccountCreator=void 0;var t=Ue;Object.defineProperty(e,"AccountCreator",{enumerable:!0,get:function(){return t.AccountCreator}}),Object.defineProperty(e,"LocalAccountCreator",{enumerable:!0,get:function(){return t.LocalAccountCreator}}),Object.defineProperty(e,"UrlAccountCreator",{enumerable:!0,get:function(){return t.UrlAccountCreator}})})(vc);var mc={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Connection=void 0;var t=Ue;Object.defineProperty(e,"Connection",{enumerable:!0,get:function(){return t.Connection}})})(mc);var bc={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Signer=e.InMemorySigner=void 0;var t=zr;Object.defineProperty(e,"InMemorySigner",{enumerable:!0,get:function(){return t.InMemorySigner}}),Object.defineProperty(e,"Signer",{enumerable:!0,get:function(){return t.Signer}})})(bc);var wc={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Contract=void 0;var t=Ue;Object.defineProperty(e,"Contract",{enumerable:!0,get:function(){return t.Contract}})})(wc);var Jr={},Yr={},zn={},Yo=_&&_.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function a(u){try{s(r.next(u))}catch(y){c(y)}}function d(u){try{s(r.throw(u))}catch(y){c(y)}}function s(u){u.done?o(u.value):i(u.value).then(a,d)}s((r=r.apply(e,t||[])).next())})};Object.defineProperty(zn,"__esModule",{value:!0});zn.Near=void 0;const st=Ue;class wy{constructor(t){var n;if(this.config=t,this.connection=st.Connection.fromConfig({networkId:t.networkId,provider:t.provider||{type:"JsonRpcProvider",args:{url:t.nodeUrl,headers:t.headers}},signer:t.signer||{type:"InMemorySigner",keyStore:t.keyStore||((n=t.deps)===null||n===void 0?void 0:n.keyStore)},jsvmAccountId:t.jsvmAccountId||`jsvm.${t.networkId}`}),t.masterAccount){const r=t.initialBalance?BigInt(t.initialBalance):BigInt("500000000000000000000000000");this.accountCreator=new st.LocalAccountCreator(new st.Account(this.connection,t.masterAccount),r)}else t.helperUrl?this.accountCreator=new st.UrlAccountCreator(this.connection,t.helperUrl):this.accountCreator=null}account(t){return Yo(this,void 0,void 0,function*(){return new st.Account(this.connection,t)})}createAccount(t,n){return Yo(this,void 0,void 0,function*(){if(!this.accountCreator)throw new Error("Must specify account creator, either via masterAccount or helperUrl configuration settings.");return yield this.accountCreator.createAccount(t,n),new st.Account(this.connection,t)})}}zn.Near=wy;var pt={},Ge=_&&_.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function a(u){try{s(r.next(u))}catch(y){c(y)}}function d(u){try{s(r.throw(u))}catch(y){c(y)}}function s(u){u.done?o(u.value):i(u.value).then(a,d)}s((r=r.apply(e,t||[])).next())})};Object.defineProperty(pt,"__esModule",{value:!0});pt.ConnectedWalletAccount=pt.WalletConnection=void 0;const Ay=Ue,Ac=ke,Ey=oe,Ec=He,Sy=Mr,Iy="/login/",Oy="add_request_and_confirm",Ty="_wallet_auth_key",vr="pending_key";class Py{constructor(t,n){if(typeof n!="string")throw new Error("Please define a clear appKeyPrefix for this WalletConnection instance as the second argument to the constructor");if(typeof window>"u")return new Proxy(this,{get(o,c){return c==="isSignedIn"?()=>!1:c==="getAccountId"?()=>"":o[c]&&typeof o[c]=="function"?()=>{throw new Error("No window found in context, please ensure you are using WalletConnection on the browser")}:o[c]}});this._near=t;const r=n+Ty,i=JSON.parse(window.localStorage.getItem(r));this._networkId=t.config.networkId,this._walletBaseUrl=t.config.walletUrl,n=n||t.config.contractName||"default",this._keyStore=t.connection.signer.keyStore,this._authData=i||{allKeys:[]},this._authDataKey=r,this.isSignedIn()||(this._completeSignInPromise=this._completeSignInWithAccessKey())}isSignedIn(){return!!this._authData.accountId}isSignedInAsync(){return Ge(this,void 0,void 0,function*(){return this._completeSignInPromise?(yield this._completeSignInPromise,this.isSignedIn()):this.isSignedIn()})}getAccountId(){return this._authData.accountId||""}requestSignInUrl({contractId:t,methodNames:n,successUrl:r,failureUrl:i,keyType:o="ed25519"}){return Ge(this,void 0,void 0,function*(){const c=new URL(window.location.href),a=new URL(this._walletBaseUrl+Iy);if(a.searchParams.set("success_url",r||c.href),a.searchParams.set("failure_url",i||c.href),t){yield(yield this._near.account(t)).state(),a.searchParams.set("contract_id",t);const s=Ac.KeyPair.fromRandom(o);a.searchParams.set("public_key",s.getPublicKey().toString()),yield this._keyStore.setKey(this._networkId,vr+s.getPublicKey(),s)}return n&&n.forEach(d=>{a.searchParams.append("methodNames",d)}),a.toString()})}requestSignIn(t){return Ge(this,void 0,void 0,function*(){const n=yield this.requestSignInUrl(t);window.location.assign(n)})}requestSignTransactionsUrl({transactions:t,meta:n,callbackUrl:r}){const i=new URL(window.location.href),o=new URL("sign",this._walletBaseUrl);return o.searchParams.set("transactions",t.map(c=>(0,Sy.serialize)(Ec.SCHEMA.Transaction,c)).map(c=>R.from(c).toString("base64")).join(",")),o.searchParams.set("callbackUrl",r||i.href),n&&o.searchParams.set("meta",n),o.toString()}requestSignTransactions(t){const n=this.requestSignTransactionsUrl(t);window.location.assign(n)}_completeSignInWithAccessKey(){return Ge(this,void 0,void 0,function*(){const t=new URL(window.location.href),n=t.searchParams.get("public_key")||"",r=(t.searchParams.get("all_keys")||"").split(","),i=t.searchParams.get("account_id")||"";if(i){const o={accountId:i,allKeys:r};window.localStorage.setItem(this._authDataKey,JSON.stringify(o)),n&&(yield this._moveKeyFromTempToPermanent(i,n)),this._authData=o}t.searchParams.delete("public_key"),t.searchParams.delete("all_keys"),t.searchParams.delete("account_id"),t.searchParams.delete("meta"),t.searchParams.delete("transactionHashes"),window.history.replaceState({},document.title,t.toString())})}_moveKeyFromTempToPermanent(t,n){return Ge(this,void 0,void 0,function*(){const r=yield this._keyStore.getKey(this._networkId,vr+n);yield this._keyStore.setKey(this._networkId,t,r),yield this._keyStore.removeKey(this._networkId,vr+n)})}signOut(){this._authData={},window.localStorage.removeItem(this._authDataKey)}account(){return this._connectedAccount||(this._connectedAccount=new Sc(this,this._near.connection,this._authData.accountId)),this._connectedAccount}}pt.WalletConnection=Py;class Sc extends Ay.Account{constructor(t,n,r){super(n,r),this.walletConnection=t}signAndSendTransaction({receiverId:t,actions:n,walletMeta:r,walletCallbackUrl:i=window.location.href}){const o=Object.create(null,{signAndSendTransaction:{get:()=>super.signAndSendTransaction}});return Ge(this,void 0,void 0,function*(){const c=yield this.connection.signer.getPublicKey(this.accountId,this.connection.networkId);let a=yield this.accessKeyForTransaction(t,n,c);if(!a)throw new Error(`Cannot find matching key for transaction sent to ${t}`);if(c&&c.toString()===a.public_key)try{return yield o.signAndSendTransaction.call(this,{receiverId:t,actions:n})}catch(m){if(m.type==="NotEnoughAllowance")a=yield this.accessKeyForTransaction(t,n);else throw m}const d=yield this.connection.provider.block({finality:"final"}),s=(0,Ey.baseDecode)(d.header.hash),u=Ac.PublicKey.from(a.public_key),y=a.access_key.nonce+BigInt(1),T=(0,Ec.createTransaction)(this.accountId,u,t,y,n,s);return yield this.walletConnection.requestSignTransactions({transactions:[T],meta:r,callbackUrl:i}),new Promise((m,k)=>{setTimeout(()=>{k(new Error("Failed to redirect to sign transaction"))},1e3)})})}accessKeyMatchesTransaction(t,n,r){return Ge(this,void 0,void 0,function*(){const{access_key:{permission:i}}=t;if(i==="FullAccess")return!0;if(i.FunctionCall){const{receiver_id:o,method_names:c}=i.FunctionCall;if(o===this.accountId&&c.includes(Oy))return!0;if(o===n){if(r.length!==1)return!1;const[{functionCall:a}]=r;return a&&(!a.deposit||a.deposit.toString()==="0")&&(c.length===0||c.includes(a.methodName))}}return!1})}accessKeyForTransaction(t,n,r){return Ge(this,void 0,void 0,function*(){const i=yield this.getAccessKeys();if(r){const c=i.find(a=>a.public_key.toString()===r.toString());if(c&&(yield this.accessKeyMatchesTransaction(c,t,n)))return c}const o=this.walletConnection._authData.allKeys;for(const c of i)if(o.indexOf(c.public_key)!==-1&&(yield this.accessKeyMatchesTransaction(c,t,n)))return c;return null})}}pt.ConnectedWalletAccount=Sc;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WalletConnection=e.ConnectedWalletAccount=e.Near=void 0;var t=zn;Object.defineProperty(e,"Near",{enumerable:!0,get:function(){return t.Near}});var n=pt;Object.defineProperty(e,"ConnectedWalletAccount",{enumerable:!0,get:function(){return n.ConnectedWalletAccount}}),Object.defineProperty(e,"WalletConnection",{enumerable:!0,get:function(){return n.WalletConnection}})})(Yr);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Near=void 0;var t=Yr;Object.defineProperty(e,"Near",{enumerable:!0,get:function(){return t.Near}})})(Jr);var Ic={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WalletConnection=e.ConnectedWalletAccount=void 0;var t=Yr;Object.defineProperty(e,"ConnectedWalletAccount",{enumerable:!0,get:function(){return t.ConnectedWalletAccount}}),Object.defineProperty(e,"WalletConnection",{enumerable:!0,get:function(){return t.WalletConnection}})})(Ic);(function(e){var t=_&&_.__createBinding||(Object.create?function(K,j,W,Q){Q===void 0&&(Q=W);var J=Object.getOwnPropertyDescriptor(j,W);(!J||("get"in J?!j.__esModule:J.writable||J.configurable))&&(J={enumerable:!0,get:function(){return j[W]}}),Object.defineProperty(K,Q,J)}:function(K,j,W,Q){Q===void 0&&(Q=W),K[Q]=j[W]}),n=_&&_.__setModuleDefault||(Object.create?function(K,j){Object.defineProperty(K,"default",{enumerable:!0,value:j})}:function(K,j){K.default=j}),r=_&&_.__importStar||function(K){if(K&&K.__esModule)return K;var j={};if(K!=null)for(var W in K)W!=="default"&&Object.prototype.hasOwnProperty.call(K,W)&&t(j,K,W);return n(j,K),j};Object.defineProperty(e,"__esModule",{value:!0}),e.WalletConnection=e.ConnectedWalletAccount=e.Near=e.KeyPair=e.Signer=e.InMemorySigner=e.Contract=e.Connection=e.Account=e.multisig=e.validators=e.transactions=e.utils=e.providers=e.accountCreator=void 0;const i=r(zi);e.providers=i;const o=r(tc);e.utils=o;const c=r(hc);e.transactions=c;const a=r(_c);e.validators=a;const d=pc;Object.defineProperty(e,"Account",{enumerable:!0,get:function(){return d.Account}});const s=r(gc);e.multisig=s;const u=r(vc);e.accountCreator=u;const y=mc;Object.defineProperty(e,"Connection",{enumerable:!0,get:function(){return y.Connection}});const T=bc;Object.defineProperty(e,"Signer",{enumerable:!0,get:function(){return T.Signer}}),Object.defineProperty(e,"InMemorySigner",{enumerable:!0,get:function(){return T.InMemorySigner}});const m=wc;Object.defineProperty(e,"Contract",{enumerable:!0,get:function(){return m.Contract}});const k=sn;Object.defineProperty(e,"KeyPair",{enumerable:!0,get:function(){return k.KeyPair}});const M=Jr;Object.defineProperty(e,"Near",{enumerable:!0,get:function(){return M.Near}});const N=Ic;Object.defineProperty(e,"ConnectedWalletAccount",{enumerable:!0,get:function(){return N.ConnectedWalletAccount}}),Object.defineProperty(e,"WalletConnection",{enumerable:!0,get:function(){return N.WalletConnection}})})(Hi);var Wn={},ky=_&&_.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function a(u){try{s(r.next(u))}catch(y){c(y)}}function d(u){try{s(r.throw(u))}catch(y){c(y)}}function s(u){u.done?o(u.value):i(u.value).then(a,d)}s((r=r.apply(e,t||[])).next())})};Object.defineProperty(Wn,"__esModule",{value:!0});Wn.connect=void 0;const Cy=Jr;function My(e){return ky(this,void 0,void 0,function*(){return new Cy.Near(e)})}Wn.connect=My;(function(e){var t=_&&_.__createBinding||(Object.create?function(o,c,a,d){d===void 0&&(d=a);var s=Object.getOwnPropertyDescriptor(c,a);(!s||("get"in s?!c.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return c[a]}}),Object.defineProperty(o,d,s)}:function(o,c,a,d){d===void 0&&(d=a),o[d]=c[a]}),n=_&&_.__setModuleDefault||(Object.create?function(o,c){Object.defineProperty(o,"default",{enumerable:!0,value:c})}:function(o,c){o.default=c}),r=_&&_.__importStar||function(o){if(o&&o.__esModule)return o;var c={};if(o!=null)for(var a in o)a!=="default"&&Object.prototype.hasOwnProperty.call(o,a)&&t(c,o,a);return n(c,o),c},i=_&&_.__exportStar||function(o,c){for(var a in o)a!=="default"&&!Object.prototype.hasOwnProperty.call(c,a)&&t(c,o,a)};Object.defineProperty(e,"__esModule",{value:!0}),e.keyStores=void 0,e.keyStores=r(Ni),i(Hi,e),i(Wn,e)})(vn);var ze={},Xr={};Object.defineProperty(Xr,"__esModule",{value:!0});var Tr;(function(e){e.GrantWritePermission="grant_write_permission",e.Set="set",e.StorageDeposit="storage_deposit",e.StorageWithdraw="storage_withdraw"})(Tr||(Tr={}));Xr.default=Tr;var Zr={};Object.defineProperty(Zr,"__esModule",{value:!0});var Pr;(function(e){e[e.InvalidAccountIdError=2e3]="InvalidAccountIdError",e[e.AccountNotFoundError=2001]="AccountNotFoundError",e[e.KeyNotAllowedError=3e3]="KeyNotAllowedError",e[e.UnknownNetworkError=4e3]="UnknownNetworkError"})(Pr||(Pr={}));Zr.default=Pr;var Qr={};Object.defineProperty(Qr,"__esModule",{value:!0});var kr;(function(e){e.Betanet="betanet",e.Localnet="localnet",e.Mainnet="mainnet",e.Testnet="testnet"})(kr||(kr={}));Qr.default=kr;var eo={};Object.defineProperty(eo,"__esModule",{value:!0});var Cr;(function(e){e.Get="get",e.GetVersion="get_version",e.IsWritePermissionGranted="is_write_permission_granted",e.StorageBalanceOf="storage_balance_of",e.Keys="keys"})(Cr||(Cr={}));eo.default=Cr;(function(e){var t=_&&_.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0}),e.ViewMethodEnum=e.NetworkIDEnum=e.ErrorCodeEnum=e.ChangeMethodEnum=void 0;var n=Xr;Object.defineProperty(e,"ChangeMethodEnum",{enumerable:!0,get:function(){return t(n).default}});var r=Zr;Object.defineProperty(e,"ErrorCodeEnum",{enumerable:!0,get:function(){return t(r).default}});var i=Qr;Object.defineProperty(e,"NetworkIDEnum",{enumerable:!0,get:function(){return t(i).default}});var o=eo;Object.defineProperty(e,"ViewMethodEnum",{enumerable:!0,get:function(){return t(o).default}})})(ze);var Oc={},to={},Qe={},Ny=_&&_.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(Qe,"__esModule",{value:!0});var jy=function(e){Ny(t,e);function t(n){return e.call(this,n.toLowerCase())||this}return t}(Error);Qe.default=jy;var Ky=_&&_.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Dy=_&&_.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(to,"__esModule",{value:!0});var Ry=ze,Ly=Dy(Qe),xy=function(e){Ky(t,e);function t(n,r){var i=e.call(this,r||'account "'.concat(n,'" not found'))||this;return i.code=Ry.ErrorCodeEnum.AccountNotFoundError,i.name="AccountNotFoundError",i.accountId=n,i}return t}(Ly.default);to.default=xy;var no={},$y=_&&_.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),By=_&&_.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(no,"__esModule",{value:!0});var Uy=ze,Fy=By(Qe),Gy=function(e){$y(t,e);function t(n,r){var i=e.call(this,r||'account id "'.concat(n,'" not a valid account'))||this;return i.code=Uy.ErrorCodeEnum.InvalidAccountIdError,i.name="InvalidAccountIdError",i.accountId=n,i}return t}(Fy.default);no.default=Gy;var ro={},qy=_&&_.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Hy=_&&_.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ro,"__esModule",{value:!0});var zy=ze,Wy=Hy(Qe),Vy=function(e){qy(t,e);function t(n,r){var i=e.call(this,r||'key "'.concat(n,'" not valid'))||this;return i.code=zy.ErrorCodeEnum.KeyNotAllowedError,i.name="KeyNotAllowedError",i.key=n,i}return t}(Wy.default);ro.default=Vy;var oo={},Jy=_&&_.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Yy=_&&_.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(oo,"__esModule",{value:!0});var Xy=ze,Zy=Yy(Qe),Qy=function(e){Jy(t,e);function t(n,r){var i=e.call(this,r||'network ID "'.concat(n,'" not known'))||this;return i.code=Xy.ErrorCodeEnum.UnknownNetworkError,i.name="UnknownNetworkError",i.networkID=n,i}return t}(Zy.default);oo.default=Qy;(function(e){var t=_&&_.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.UnknownNetworkError=e.KeyNotAllowedError=e.InvalidAccountIdError=e.BaseError=e.AccountNotFoundError=void 0;var n=to;Object.defineProperty(e,"AccountNotFoundError",{enumerable:!0,get:function(){return t(n).default}});var r=Qe;Object.defineProperty(e,"BaseError",{enumerable:!0,get:function(){return t(r).default}});var i=no;Object.defineProperty(e,"InvalidAccountIdError",{enumerable:!0,get:function(){return t(i).default}});var o=ro;Object.defineProperty(e,"KeyNotAllowedError",{enumerable:!0,get:function(){return t(o).default}});var c=oo;Object.defineProperty(e,"UnknownNetworkError",{enumerable:!0,get:function(){return t(c).default}})})(Oc);var io={},co={},Tc={},Vn={};Object.defineProperty(Vn,"__esModule",{value:!0});Vn.EXTRA_STORAGE_BALANCE=void 0;Vn.EXTRA_STORAGE_BALANCE="500";(function(e){var t=_&&_.__createBinding||(Object.create?function(r,i,o,c){c===void 0&&(c=o);var a=Object.getOwnPropertyDescriptor(i,o);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(r,c,a)}:function(r,i,o,c){c===void 0&&(c=o),r[c]=i[o]}),n=_&&_.__exportStar||function(r,i){for(var o in r)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&t(i,r,o)};Object.defineProperty(e,"__esModule",{value:!0}),n(Vn,e)})(Tc);var ao={},so={},Pc={},gt={};Object.defineProperty(gt,"__esModule",{value:!0});gt.ESTIMATED_NODE_SIZE=gt.ESTIMATED_KEY_VALUE_SIZE=void 0;gt.ESTIMATED_KEY_VALUE_SIZE=140;gt.ESTIMATED_NODE_SIZE=98;(function(e){var t=_&&_.__createBinding||(Object.create?function(r,i,o,c){c===void 0&&(c=o);var a=Object.getOwnPropertyDescriptor(i,o);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(r,c,a)}:function(r,i,o,c){c===void 0&&(c=o),r[c]=i[o]}),n=_&&_.__exportStar||function(r,i){for(var o in r)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&t(i,r,o)};Object.defineProperty(e,"__esModule",{value:!0}),n(gt,e)})(Pc);var uo={},lo={};Object.defineProperty(lo,"__esModule",{value:!0});function eh(e){return e===Object(e)&&!Array.isArray(e)&&typeof e!="function"}lo.default=eh;(function(e){var t=_&&_.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=lo;Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t(n).default}})})(uo);var th=_&&_.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(so,"__esModule",{value:!0});var Xo=Pc,Zo=th(uo);function nh(e){var t=function(n,r){return(0,Zo.default)(n)?Object.entries(n).reduce(function(i,o){var c=o[0],a=o[1];return i+BigInt(c.length*2)+t(a)+BigInt(Xo.ESTIMATED_KEY_VALUE_SIZE)},BigInt((0,Zo.default)(r)?0:Xo.ESTIMATED_NODE_SIZE)):BigInt((typeof n=="string"?n.length:8)-0)};return t(e)}so.default=nh;(function(e){var t=_&&_.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=so;Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t(n).default}})})(ao);var kc=_&&_.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(co,"__esModule",{value:!0});var Mt=kc(gn),mr=Rt,rh=Tc,oh=kc(ao);function ih(e){var t=e.data,n=e.storageBalance,r=new Mt.default(mr.MINIMUM_STORAGE_IN_BYTES).multipliedBy(new Mt.default(mr.STORAGE_COST_PER_BYTES_IN_ATOMIC_UNITS)),i=new Mt.default(String((0,oh.default)(t))).plus(rh.EXTRA_STORAGE_BALANCE).multipliedBy(mr.STORAGE_COST_PER_BYTES_IN_ATOMIC_UNITS),o;return n?(o=new Mt.default(n.available.toString()),o.lt(i)?i.minus(o):new Mt.default("0")):i.lt(r)?r:i}co.default=ih;(function(e){var t=_&&_.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=co;Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t(n).default}})})(io);var fo={},yo={},Qo=_&&_.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(yo,"__esModule",{value:!0});function ch(e){var t=function(n,r){return typeof r!="object"?n.join("/"):Object.entries(r).flatMap(function(i){var o=i[0],c=i[1];return t(Qo(Qo([],n,!0),[o],!1),c)})};return t([],e)}yo.default=ch;var Cc={};Object.defineProperty(Cc,"__esModule",{value:!0});(function(e){var t=_&&_.__createBinding||(Object.create?function(o,c,a,d){d===void 0&&(d=a);var s=Object.getOwnPropertyDescriptor(c,a);(!s||("get"in s?!c.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return c[a]}}),Object.defineProperty(o,d,s)}:function(o,c,a,d){d===void 0&&(d=a),o[d]=c[a]}),n=_&&_.__exportStar||function(o,c){for(var a in o)a!=="default"&&!Object.prototype.hasOwnProperty.call(c,a)&&t(c,o,a)},r=_&&_.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=yo;Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r(i).default}}),n(Cc,e)})(fo);var ho={},_o={};Object.defineProperty(_o,"__esModule",{value:!0});var Qt=Rt,en=ze;function ah(e){switch(e){case en.NetworkIDEnum.Betanet:return Qt.networkRPCs.betanet;case en.NetworkIDEnum.Localnet:return Qt.networkRPCs.localnet;case en.NetworkIDEnum.Mainnet:return Qt.networkRPCs.mainnet;case en.NetworkIDEnum.Testnet:return Qt.networkRPCs.testnet;default:return null}}_o.default=ah;(function(e){var t=_&&_.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=_o;Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t(n).default}})})(ho);var po={},go={};Object.defineProperty(go,"__esModule",{value:!0});function sh(e){return e.length>=2&&e.length<=64&&new RegExp(/^(([a-z\d]+[-_])*[a-z\d]+\.)*([a-z\d]+[-_])*[a-z\d]+$/).test(e)}go.default=sh;(function(e){var t=_&&_.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=go;Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t(n).default}})})(po);var vo={},mo={},ln=_&&_.__assign||function(){return ln=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ln.apply(this,arguments)},uh=_&&_.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function a(u){try{s(r.next(u))}catch(y){c(y)}}function d(u){try{s(r.throw(u))}catch(y){c(y)}}function s(u){u.done?o(u.value):i(u.value).then(a,d)}s((r=r.apply(e,t||[])).next())})},lh=_&&_.__generator||function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function a(s){return function(u){return d([s,u])}}function d(s){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,s[0]&&(n=0)),n;)try{if(r=1,i&&(o=s[0]&2?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[s[0]&2,o.value]),s[0]){case 0:case 1:o=s;break;case 4:return n.label++,{value:s[1],done:!1};case 5:n.label++,i=s[1],s=[0];continue;case 7:s=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!o||s[1]>o[0]&&s[1]<o[3])){n.label=s[1];break}if(s[0]===6&&n.label<o[1]){n.label=o[1],o=s;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(s);break}o[2]&&n.ops.pop(),n.trys.pop();continue}s=t.call(e,n)}catch(u){s=[6,u],i=0}finally{r=o=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(mo,"__esModule",{value:!0});function dh(e){return uh(this,arguments,void 0,function(t){var n,r=t.accountID,i=t.provider;return lh(this,function(o){switch(o.label){case 0:return[4,i.query({account_id:r,finality:"optimistic",request_type:"view_access_key_list"})];case 1:return n=o.sent(),[2,n.keys.map(function(c){var a=c.access_key,d=c.public_key;return{public_key:d,access_key:ln(ln({},a),{nonce:BigInt(a.nonce)})}})]}})})}mo.default=dh;var Mc={};Object.defineProperty(Mc,"__esModule",{value:!0});(function(e){var t=_&&_.__createBinding||(Object.create?function(o,c,a,d){d===void 0&&(d=a);var s=Object.getOwnPropertyDescriptor(c,a);(!s||("get"in s?!c.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return c[a]}}),Object.defineProperty(o,d,s)}:function(o,c,a,d){d===void 0&&(d=a),o[d]=c[a]}),n=_&&_.__exportStar||function(o,c){for(var a in o)a!=="default"&&!Object.prototype.hasOwnProperty.call(c,a)&&t(c,o,a)},r=_&&_.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=mo;Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r(i).default}}),n(Mc,e)})(vo);var bo={},wo={},fh=_&&_.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function a(u){try{s(r.next(u))}catch(y){c(y)}}function d(u){try{s(r.throw(u))}catch(y){c(y)}}function s(u){u.done?o(u.value):i(u.value).then(a,d)}s((r=r.apply(e,t||[])).next())})},yh=_&&_.__generator||function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function a(s){return function(u){return d([s,u])}}function d(s){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,s[0]&&(n=0)),n;)try{if(r=1,i&&(o=s[0]&2?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[s[0]&2,o.value]),s[0]){case 0:case 1:o=s;break;case 4:return n.label++,{value:s[1],done:!1};case 5:n.label++,i=s[1],s=[0];continue;case 7:s=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!o||s[1]>o[0]&&s[1]<o[3])){n.label=s[1];break}if(s[0]===6&&n.label<o[1]){n.label=o[1],o=s;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(s);break}o[2]&&n.ops.pop(),n.trys.pop();continue}s=t.call(e,n)}catch(u){s=[6,u],i=0}finally{r=o=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(wo,"__esModule",{value:!0});var hh=ra;function _h(e){return JSON.parse(new TextDecoder().decode(e))}function ph(e){try{return btoa(e)}catch{return R.from(e).toString("base64")}}function gh(e){return fh(this,arguments,void 0,function(t){var n,r=t.args,i=r===void 0?{}:r,o=t.contractId,c=t.method,a=t.provider;return yh(this,function(d){switch(d.label){case 0:return[4,a.query({request_type:"call_function",account_id:o,method_name:c,args_base64:ph(JSON.stringify(i)),finality:"optimistic"})];case 1:return n=d.sent(),"logs"in n&&Array.isArray(n.logs)&&n.logs.length>0&&(0,hh.printTxOutcomeLogs)({contractId:o,logs:n.logs}),"result"in n&&Array.isArray(n.result)&&n.result.length>0&&n.result!==void 0?[2,_h(new Uint8Array(n.result))]:[2,void 0]}})})}wo.default=gh;(function(e){var t=_&&_.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=wo;Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t(n).default}})})(bo);var me=_&&_.__assign||function(){return me=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},me.apply(this,arguments)},Ae=_&&_.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function a(u){try{s(r.next(u))}catch(y){c(y)}}function d(u){try{s(r.throw(u))}catch(y){c(y)}}function s(u){u.done?o(u.value):i(u.value).then(a,d)}s((r=r.apply(e,t||[])).next())})},Ee=_&&_.__generator||function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function a(s){return function(u){return d([s,u])}}function d(s){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,s[0]&&(n=0)),n;)try{if(r=1,i&&(o=s[0]&2?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[s[0]&2,o.value]),s[0]){case 0:case 1:o=s;break;case 4:return n.label++,{value:s[1],done:!1};case 5:n.label++,i=s[1],s=[0];continue;case 7:s=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!o||s[1]>o[0]&&s[1]<o[3])){n.label=s[1];break}if(s[0]===6&&n.label<o[1]){n.label=o[1],o=s;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(s);break}o[2]&&n.ops.pop(),n.trys.pop();continue}s=t.call(e,n)}catch(u){s=[6,u],i=0}finally{r=o=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},ei=_&&_.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},et=_&&_.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Kr,"__esModule",{value:!0});var vh=et(gn),ue=vn,ut=Rt,xe=ze,je=Oc,mh=et(io),bh=et(fo),wh=et(ho),br=et(po),Ah=et(vo),Nt=et(bo),Eh=function(){function e(t){this._contractId=(t==null?void 0:t.contractId)||"social.near",this._provider=e._initializeProvider(t==null?void 0:t.network),this._apiServer=(t==null?void 0:t.apiServer)||"https://api.near.social"}return e._initializeProvider=function(t){var n,r;if(!t)return new ue.providers.JsonRpcProvider({url:ut.networkRPCs.mainnet});if(typeof t=="string"){if(r=(0,wh.default)(t),!r)throw new je.UnknownNetworkError(t);return new ue.providers.JsonRpcProvider({url:r})}return new ue.providers.JsonRpcProvider(me({url:t.url},t.apiKey&&{headers:(n={},n["X-Api-Key"]=t.apiKey,n)}))},e.prototype._accessKeyView=function(t){return Ae(this,arguments,void 0,function(n){var r,i,o=n.accountID,c=n.publicKey;return Ee(this,function(a){switch(a.label){case 0:return[4,(0,Ah.default)({accountID:o,provider:this._provider})];case 1:return r=a.sent(),[2,((i=r.find(function(d){return d.public_key===c.toString()}))===null||i===void 0?void 0:i.access_key)||null]}})})},e.prototype._latestBlockHash=function(){return Ae(this,void 0,void 0,function(){var t;return Ee(this,function(n){switch(n.label){case 0:return[4,this._provider.status()];case 1:return t=n.sent().sync_info,[2,t.latest_block_hash]}})})},e.prototype._storageBalanceOf=function(t){return Ae(this,void 0,void 0,function(){var n;return Ee(this,function(r){switch(r.label){case 0:return[4,(0,Nt.default)({args:{account_id:t},contractId:this._contractId,method:xe.ViewMethodEnum.StorageBalanceOf,provider:this._provider})];case 1:if(n=r.sent(),this._isStorageBalance(n))return[2,n];if(n===null)return[2,null];throw new Error("Unexpected response format from storage_balance_of")}})})},e.prototype._isStorageBalance=function(t){return typeof t=="object"&&t!==null&&"total"in t&&"available"in t&&typeof t.total=="string"&&typeof t.available=="string"},e.prototype._uniqueAccountIdsFromKeys=function(t){return t.reduce(function(n,r){var i=r.split("/")[0]||"";return n.find(function(o){return o===i})?n:ei(ei([],n,!0),[i],!1)},[])},e.prototype.get=function(t){return Ae(this,arguments,void 0,function(n){var r,i=n.keys,o=n.blockHeight,c=n.returnDeleted,a=n.withBlockHeight,d=n.withNodeId,s=n.withTimestamp,u=n.useApiServer,y=u===void 0?!0:u;return Ee(this,function(T){switch(T.label){case 0:return y?[4,fetch(this._apiServer+"/get",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(me({keys:i,blockHeight:o},(c||a||s)&&{options:{with_block_height:a,return_deleted:c,with_timestamp:s}}))})]:[3,3];case 1:return[4,T.sent().json()];case 2:return[2,T.sent()];case 3:return r=me({keys:i},(c||a||d)&&{options:{with_block_height:a,with_node_id:d,return_deleted:c}}),[4,(0,Nt.default)({args:r,contractId:this._contractId,method:xe.ViewMethodEnum.Get,provider:this._provider})];case 4:return[2,T.sent()]}})})},e.prototype.keys=function(t){return Ae(this,arguments,void 0,function(n){var r,i=n.keys,o=n.blockHeight,c=n.returnDeleted,a=n.returnType,d=n.valuesOnly,s=n.useApiServer,u=s===void 0?!0:s;return Ee(this,function(y){switch(y.label){case 0:return u?[4,fetch(this._apiServer+"/keys",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(me({keys:i,blockHeight:o},(c||a||d)&&{options:{return_deleted:c,return_type:a,values_only:d}}))})]:[3,3];case 1:return[4,y.sent().json()];case 2:return[2,y.sent()];case 3:return r=me({keys:i},(c||a||d)&&{options:{return_deleted:c,return_type:a,values_only:d}}),[4,(0,Nt.default)({args:r,contractId:this._contractId,method:xe.ViewMethodEnum.Keys,provider:this._provider})];case 4:return[2,y.sent()]}})})},e.prototype.index=function(t){return Ae(this,arguments,void 0,function(n){var r=n.action,i=n.key,o=n.accountId,c=n.order,a=n.limit,d=n.from;return Ee(this,function(s){switch(s.label){case 0:return[4,fetch(this._apiServer+"/index",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(me({action:r,key:i},(o||c||a||d)&&{options:{accountId:o,order:c,limit:a,from:d}}))})];case 1:return[4,s.sent().json()];case 2:return[2,s.sent()]}})})},e.prototype.getVersion=function(){return Ae(this,void 0,void 0,function(){var t;return Ee(this,function(n){switch(n.label){case 0:return[4,(0,Nt.default)({contractId:this._contractId,method:xe.ViewMethodEnum.GetVersion,provider:this._provider})];case 1:if(t=n.sent(),typeof t!="string")throw new Error("Unexpected response format from get_version: ".concat(JSON.stringify(t)));return[2,t]}})})},e.prototype.grantWritePermission=function(t){return Ae(this,void 0,void 0,function(){var n,r,i,o,c,a,d;return Ee(this,function(s){switch(s.label){case 0:if(n=t.account,r=t.blockHash,i=t.keys,o=t.nonce,a=r||null,d=o||null,t.granteeAccountId&&!(0,br.default)(t.granteeAccountId))throw new je.InvalidAccountIdError(t.granteeAccountId,"the grantee account id is not valid");return i.forEach(function(u){var y=u.split("/")[0]||"";if(!(0,br.default)(y))throw new je.InvalidAccountIdError(y);if(y!==n.accountID)throw new je.KeyNotAllowedError(u,'key "'.concat(u,'" does not belong to granter "').concat(n.accountID,'"'))}),a?[3,2]:[4,this._latestBlockHash()];case 1:a=s.sent(),s.label=2;case 2:return d?[3,4]:[4,this._accessKeyView(n)];case 3:if(c=s.sent(),!c)throw new je.AccountNotFoundError(n.accountID,'failed to get nonce for access key for "'.concat(n.accountID,'" with public key "').concat(n.publicKey.toString(),'"'));d=c.nonce+BigInt(1),s.label=4;case 4:return[2,ue.transactions.createTransaction(n.accountID,ue.utils.PublicKey.fromString(n.publicKey.toString()),this._contractId,d,[ue.transactions.functionCall(xe.ChangeMethodEnum.GrantWritePermission,me(me({keys:i},t.granteeAccountId&&{predecessor_id:t.granteeAccountId}),t.granteePublicKey&&{public_key:t.granteePublicKey.toString()}),BigInt(ut.GAS_FEE_IN_ATOMIC_UNITS),BigInt("1"))],ue.utils.serialize.base_decode(a))]}})})},e.prototype.isWritePermissionGranted=function(t){return Ae(this,void 0,void 0,function(){var n,r;return Ee(this,function(i){switch(i.label){case 0:if(n=t.key,t.granteeAccountId){if(!(0,br.default)(t.granteeAccountId))throw new je.InvalidAccountIdError(t.granteeAccountId,"the grantee account id is not valid");if(t.granteeAccountId===(n.split("/")[0]||""))return[2,!0]}return[4,(0,Nt.default)({args:me(me({key:n},t.granteeAccountId&&{predecessor_id:t.granteeAccountId}),t.granteePublicKey&&{public_key:t.granteePublicKey.toString()}),contractId:this._contractId,method:xe.ViewMethodEnum.IsWritePermissionGranted,provider:this._provider})];case 1:if(r=i.sent(),typeof r!="boolean")throw new Error("Unexpected response format from isWritePermissionGranted: ".concat(JSON.stringify(r)));return[2,r]}})})},e.prototype.set=function(t){return Ae(this,arguments,void 0,function(n){var r,i,o,c,a,d,s,u,y=n.account,T=n.blockHash,m=n.data,k=n.nonce,M=n.refundUnusedDeposit;return Ee(this,function(N){switch(N.label){case 0:return r=(0,bh.default)(m),i=T||null,o=k||null,a=new vh.default("1"),i?[3,2]:[4,this._latestBlockHash()];case 1:i=N.sent(),N.label=2;case 2:return o?[3,4]:[4,this._accessKeyView(y)];case 3:if(c=N.sent(),!c)throw new je.AccountNotFoundError(y.accountID,'failed to get nonce for access key for "'.concat(y.accountID,'" with public key "').concat(y.publicKey.toString(),'"'));o=c.nonce+BigInt(1),N.label=4;case 4:s=0,N.label=5;case 5:return s<r.length?(u=(r[s].split("/")[0]||"")!==y.accountID,u?[4,this.isWritePermissionGranted({granteePublicKey:y.publicKey,key:r[s]})]:[3,7]):[3,9];case 6:u=!N.sent(),N.label=7;case 7:if(u)throw new je.KeyNotAllowedError(r[s],'the supplied public key has not been granted write permission for "'.concat(r[s],'"'));N.label=8;case 8:return s++,[3,5];case 9:return this._uniqueAccountIdsFromKeys(r).find(function(K){return K===y.accountID})?[4,this._storageBalanceOf(y.accountID)]:[3,11];case 10:d=N.sent(),a=(0,mh.default)({data:m,storageBalance:d}),N.label=11;case 11:return[2,ue.transactions.createTransaction(y.accountID,ue.utils.PublicKey.fromString(y.publicKey.toString()),this._contractId,o,[ue.transactions.functionCall(xe.ChangeMethodEnum.Set,me({data:m},M&&{options:{refund_unused_deposit:M}}),BigInt(ut.GAS_FEE_IN_ATOMIC_UNITS),BigInt(a.toFixed()))],ue.utils.serialize.base_decode(i))]}})})},e.prototype.storageDeposit=function(t){return Ae(this,arguments,void 0,function(n){var r,i,o,c,a=n.account,d=n.blockHash,s=n.nonce,u=n.registrationOnly,y=n.accountId,T=n.deposit;return Ee(this,function(m){switch(m.label){case 0:return r=[],r.push(ue.transactions.functionCall(xe.ChangeMethodEnum.StorageDeposit,{account_id:y,registration_only:u},BigInt(ut.GAS_FEE_IN_ATOMIC_UNITS),BigInt(T))),i=d||null,o=s||null,i?[3,2]:[4,this._latestBlockHash()];case 1:i=m.sent(),m.label=2;case 2:return o?[3,4]:[4,this._accessKeyView(a)];case 3:if(c=m.sent(),!c)throw new je.AccountNotFoundError(a.accountID,'failed to get nonce for access key for "'.concat(a.accountID,'" with public key "').concat(a.publicKey.toString(),'"'));o=c.nonce+BigInt(1),m.label=4;case 4:return[2,ue.transactions.createTransaction(a.accountID,ue.utils.PublicKey.fromString(a.publicKey.toString()),this._contractId,o,r,ue.utils.serialize.base_decode(i))]}})})},e.prototype.storageWithdraw=function(t){return Ae(this,arguments,void 0,function(n){var r,i,o,c,a=n.account,d=n.blockHash,s=n.amount,u=n.nonce;return Ee(this,function(y){switch(y.label){case 0:return r=[],r.push(ue.transactions.functionCall(xe.ChangeMethodEnum.StorageWithdraw,{amount:s},BigInt(ut.GAS_FEE_IN_ATOMIC_UNITS),BigInt(ut.ONE_YOCTO))),i=d||null,o=u||null,i?[3,2]:[4,this._latestBlockHash()];case 1:i=y.sent(),y.label=2;case 2:return o?[3,4]:[4,this._accessKeyView(a)];case 3:if(c=y.sent(),!c)throw new je.AccountNotFoundError(a.accountID,'failed to get nonce for access key for "'.concat(a.accountID,'" with public key "').concat(a.publicKey.toString(),'"'));o=c.nonce+BigInt(1),y.label=4;case 4:return[2,ue.transactions.createTransaction(a.accountID,ue.utils.PublicKey.fromString(a.publicKey.toString()),this._contractId,o,r,ue.utils.serialize.base_decode(i))]}})})},e}();Kr.default=Eh;(function(e){var t=_&&_.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(e,"__esModule",{value:!0}),e.Social=void 0;var n=Kr;Object.defineProperty(e,"Social",{enumerable:!0,get:function(){return t(n).default}})})(Ci);var Nc={};Object.defineProperty(Nc,"__esModule",{value:!0});var jc={},Kc={},Ao={},Sh=_&&_.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ao,"__esModule",{value:!0});var wr=Sh(gn),Ih=vn;function Oh(e){return wr.default.config({ROUNDING_MODE:0}),new wr.default(e).multipliedBy(new wr.default("10").pow(Ih.utils.format.NEAR_NOMINATION_EXP)).toFixed()}Ao.default=Oh;(function(e){var t=_&&_.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Ao;Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t(n).default}})})(Kc);var Dc={},Eo={},Th=_&&_.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Eo,"__esModule",{value:!0});var Ar=Th(gn),Ph=vn;function kh(e){return Ar.default.config({ROUNDING_MODE:0}),new Ar.default(e).dividedBy(new Ar.default(10).pow(Ph.utils.format.NEAR_NOMINATION_EXP)).toFixed()}Eo.default=kh;(function(e){var t=_&&_.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Eo;Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t(n).default}})})(Dc);var Rc={};(function(e){var t=_&&_.__createBinding||(Object.create?function(r,i,o,c){c===void 0&&(c=o);var a=Object.getOwnPropertyDescriptor(i,o);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(r,c,a)}:function(r,i,o,c){c===void 0&&(c=o),r[c]=i[o]}),n=_&&_.__exportStar||function(r,i){for(var o in r)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&t(i,r,o)};Object.defineProperty(e,"__esModule",{value:!0}),n(vo,e),n(bo,e)})(Rc);var Lc={},Jn={};Object.defineProperty(Jn,"__esModule",{value:!0});Jn.transformActions=void 0;var Ch=function(e){return e.map(function(t){if(!t.functionCall)throw new Error("Unsupported action type: ".concat(t.enum));var n=t.functionCall;return{type:"FunctionCall",params:{methodName:n.methodName,args:n.args,gas:n.gas,deposit:n.deposit}}})};Jn.transformActions=Ch;(function(e){var t=_&&_.__createBinding||(Object.create?function(r,i,o,c){c===void 0&&(c=o);var a=Object.getOwnPropertyDescriptor(i,o);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(r,c,a)}:function(r,i,o,c){c===void 0&&(c=o),r[c]=i[o]}),n=_&&_.__exportStar||function(r,i){for(var o in r)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&t(i,r,o)};Object.defineProperty(e,"__esModule",{value:!0}),n(Jn,e)})(Lc);(function(e){var t=_&&_.__createBinding||(Object.create?function(r,i,o,c){c===void 0&&(c=o);var a=Object.getOwnPropertyDescriptor(i,o);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(r,c,a)}:function(r,i,o,c){c===void 0&&(c=o),r[c]=i[o]}),n=_&&_.__exportStar||function(r,i){for(var o in r)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&t(i,r,o)};Object.defineProperty(e,"__esModule",{value:!0}),n(io,e),n(ao,e),n(Kc,e),n(Dc,e),n(uo,e),n(fo,e),n(Rc,e),n(ho,e),n(Lc,e),n(po,e)})(jc);(function(e){var t=_&&_.__createBinding||(Object.create?function(r,i,o,c){c===void 0&&(c=o);var a=Object.getOwnPropertyDescriptor(i,o);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(r,c,a)}:function(r,i,o,c){c===void 0&&(c=o),r[c]=i[o]}),n=_&&_.__exportStar||function(r,i){for(var o in r)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&t(i,r,o)};Object.defineProperty(e,"__esModule",{value:!0}),n(Rt,e),n(Ci,e),n(ze,e),n(Nc,e),n(jc,e)})(ki);const Mh={mainnet:"social.near",testnet:"v1.social08.testnet"},Nh=new ki.Social({contractId:Mh[Io],network:Io});async function jh(e){const t=await Nh.get({keys:[`${e}/profile/**`]});if(!t)return null;const{profile:n}=t[e];return n}function xc(){const{wallet:e,signedAccountId:t}=oa(),{data:n,isLoading:r,isError:i}=Ma({queryKey:["profile",t],queryFn:async()=>jh(t),retry:3}),o=()=>{var c,a;return r?I.jsx("div",{className:"flex h-full w-full items-center justify-center bg-secondary",children:I.jsx(Ja,{className:"h-6 w-6 animate-spin text-primary"})}):i?I.jsx("div",{className:"flex h-full w-full items-center justify-center bg-secondary",children:I.jsx(Da,{className:"h-6 w-6 text-destructive"})}):I.jsxs(I.Fragment,{children:[I.jsx(ka,{src:`https://ipfs.near.social/ipfs/${(c=n==null?void 0:n.image)==null?void 0:c.ipfs_cid}`||"https://png.pngtree.com/png-clipart/20230927/original/pngtree-man-avatar-image-for-profile-png-image_13001882.png",alt:`${n==null?void 0:n.name}`||t||""}),I.jsx(Ca,{children:((a=n==null?void 0:n.name)==null?void 0:a[0])||(t==null?void 0:t[0])||"U"})]})};return I.jsxs(li,{children:[I.jsx(di,{asChild:!0,children:I.jsx(ai,{variant:"ghost",className:"relative h-14 w-14 rounded-full",children:I.jsx(Pa,{className:"h-14 w-14",children:o()})})}),I.jsxs(fi,{className:"w-56",align:"end",forceMount:!0,children:[I.jsx(ga,{className:"font-normal",children:I.jsxs("div",{className:"flex flex-col space-y-1",children:[I.jsx("p",{className:"text-sm font-medium leading-none",children:`${n==null?void 0:n.name}`||"User"}),I.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:t})]})}),I.jsx(Oo,{}),I.jsx(va,{children:I.jsx(Nr,{to:`https://near.social/mob.near/widget/ProfilePage?accountId=${t}`,children:I.jsxs(Dt,{children:["Profile",I.jsx(To,{children:"â§âP"})]})})}),I.jsx(Oo,{}),I.jsxs(Dt,{onClick:()=>e==null?void 0:e.signOut(),children:["Log out",I.jsx(To,{children:"â§âQ"})]})]})]})}function $c(){const{setTheme:e}=ia();return I.jsxs(li,{children:[I.jsx(di,{asChild:!0,children:I.jsxs(ai,{variant:"outline",size:"icon",children:[I.jsx(ts,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),I.jsx(mi,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),I.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),I.jsxs(fi,{align:"end",children:[I.jsx(Dt,{onClick:()=>e("light"),children:"Light"}),I.jsx(Dt,{onClick:()=>e("dark"),children:"Dark"}),I.jsx(Dt,{onClick:()=>e("system"),children:"System"})]})]})}function Bc({items:e,setOpen:t,isMobileNav:n=!1}){const r=vi(),{isMinimized:i}=si();return e!=null&&e.length?I.jsxs("nav",{className:"grid items-start gap-2",children:[I.jsx(Ts,{children:e.map((o,c)=>{const a=ss[o.icon||"arrowRight"];return o.href&&I.jsxs(Ps,{children:[I.jsx(ks,{asChild:!0,children:I.jsxs(Nr,{to:o.disabled?"/":o.href,className:$e("flex items-center gap-2 overflow-hidden rounded-md py-2 text-sm font-medium hover:text-muted-foreground",r===o.href?"bg-white text-black hover:text-black":"transparent",o.disabled&&"cursor-not-allowed opacity-80"),onClick:()=>{t&&t(!1)},children:[I.jsx(a,{className:"ml-2.5 size-5"}),n||!i&&!n?I.jsx("span",{className:"mr-2 truncate",children:o.title}):""]})}),I.jsx(Pi,{align:"center",side:"right",sideOffset:8,className:i?"inline-block":"hidden",children:o.title})]},c)})}),I.jsxs("div",{className:"ml-4 flex items-center md:ml-6",children:[I.jsx(xc,{}),I.jsx($c,{})]})]}):null}const dn=[{title:"Dashboard",href:"/",icon:"dashboard",label:"Dashboard"},{title:"Members",href:"/member",icon:"user",label:"Member"},{title:"Proposals",href:"/proposal",icon:"handHelping",label:"Proposal"},{title:"Settings",href:"/settings",icon:"cog",label:"Settings"}];function Kh({className:e}){const{isMinimized:t,toggle:n}=si(),[r,i]=B.useState(!1),o=()=>{i(!0),n(),setTimeout(()=>i(!1),500)};return I.jsxs("nav",{className:$e("relative z-10 hidden h-screen flex-none  px-3 md:block",r&&"duration-500",t?"w-[80px]":"w-72",e),children:[I.jsxs("div",{className:$e("flex items-center px-0 py-5 md:px-2",t?"justify-center ":"justify-between"),children:[!t&&I.jsx(gi,{variant:"desktop-sidebar"}),I.jsx(Ka,{className:$e("size-8 cursor-pointer rounded-full border bg-background text-foreground",t&&"rotate-180"),onClick:o})]}),I.jsx("div",{className:"space-y-4 py-4",children:I.jsx("div",{className:"px-2 py-2",children:I.jsx("div",{className:"mt-3 space-y-1",children:I.jsx(Bc,{items:dn})})})})]})}const Dh=e=>{const t=dn.find(n=>n.href===e)||dn.find(n=>e.startsWith(n.href+"/")&&n.href!=="/");return(t==null?void 0:t.title)||""};function Rh(){const e=vi(),t=Dh(e);return I.jsxs("div",{className:"flex flex-1 items-center justify-between bg-secondary px-4",children:[I.jsx(ma,{title:t}),I.jsxs("div",{className:"ml-4 flex items-center md:ml-6",children:[I.jsx(xc,{}),I.jsx($c,{})]})]})}const Lh=ba,xh=Ea,Uc=B.forwardRef(({className:e,...t},n)=>I.jsx(yi,{className:$e("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));Uc.displayName=yi.displayName;const $h=ca("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Fc=B.forwardRef(({side:e="right",className:t,children:n,...r},i)=>I.jsxs(xh,{children:[I.jsx(Uc,{}),I.jsxs(hi,{ref:i,className:$e($h({side:e}),t),...r,children:[n,I.jsxs(wa,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[I.jsx(Aa,{className:"h-4 w-4"}),I.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Fc.displayName=hi.displayName;const Bh=B.forwardRef(({className:e,...t},n)=>I.jsx(_i,{ref:n,className:$e("text-lg font-semibold text-foreground",e),...t}));Bh.displayName=_i.displayName;const Uh=B.forwardRef(({className:e,...t},n)=>I.jsx(pi,{ref:n,className:$e("text-sm text-muted-foreground",e),...t}));Uh.displayName=pi.displayName;function Fh({setSidebarOpen:e,sidebarOpen:t}){return I.jsx(I.Fragment,{children:I.jsx(Lh,{open:t,onOpenChange:e,children:I.jsx(Fc,{side:"left",className:"bg-background !px-0",children:I.jsx("div",{className:"space-y-4 py-4",children:I.jsxs("div",{className:"space-y-4 px-3 py-2",children:[I.jsx(Nr,{to:"/",children:I.jsx(gi,{variant:"mobile-sidebar"})}),I.jsx("div",{className:"space-y-1 px-2",children:I.jsx(Bc,{items:dn,setOpen:e})})]})})})})})}function n_({children:e}){const[t,n]=B.useState(!1);return I.jsxs("div",{className:"flex h-screen overflow-hidden bg-secondary",children:[I.jsx(Fh,{sidebarOpen:t,setSidebarOpen:n}),I.jsx(Kh,{}),I.jsxs("div",{className:"flex w-0 flex-1 flex-col overflow-hidden",children:[I.jsxs("div",{className:"relative z-10 flex h-20 flex-shrink-0 md:hidden",children:[I.jsxs("button",{className:"pl-4 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500 xl:hidden",onClick:()=>n(!0),children:[I.jsx("span",{className:"sr-only",children:"Open sidebar"}),I.jsx(Xa,{className:"h-6 w-6","aria-hidden":"true"})]}),I.jsx(Rh,{})]}),I.jsx("main",{className:"relative mx-2 my-3 mr-2 flex-1 overflow-hidden rounded-xl  bg-background focus:outline-none md:mx-0 md:my-4 md:mr-4 ",children:e})]})]})}export{n_ as default};
